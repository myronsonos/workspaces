
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>networking.ht_proxy package &#8212; TestCase Documentation  documentation</title>
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/language_data.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="networking.netstart package" href="networking.netstart.html" />
    <link rel="prev" title="networking.direct_routing package" href="networking.direct_routing.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="networking-ht-proxy-package">
<h1>networking.ht_proxy package<a class="headerlink" href="#networking-ht-proxy-package" title="Permalink to this headline">¶</a></h1>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-networking.ht_proxy.proxy">
<span id="networking-ht-proxy-proxy-module"></span><h2>networking.ht_proxy.proxy module<a class="headerlink" href="#module-networking.ht_proxy.proxy" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="networking.ht_proxy.proxy.ProxyBaseFixture">
<em class="property">class </em><code class="descclassname">networking.ht_proxy.proxy.</code><code class="descname">ProxyBaseFixture</code><span class="sig-paren">(</span><em>fixture_name</em>, <em>zone_json</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/networking/ht_proxy/proxy.html#ProxyBaseFixture"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#networking.ht_proxy.proxy.ProxyBaseFixture" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">sonos.workflow.fixture.WorkflowTestFixture</span></code>, <a class="reference internal" href="common.networking.html#common.networking.wireless_mode.WirelessModeMixin" title="common.networking.wireless_mode.WirelessModeMixin"><code class="xref py py-class docutils literal notranslate"><span class="pre">common.networking.wireless_mode.WirelessModeMixin</span></code></a>, <a class="reference internal" href="common.networking.html#common.networking.access_point.OpenWrtWifiFixtureMixin" title="common.networking.access_point.OpenWrtWifiFixtureMixin"><code class="xref py py-class docutils literal notranslate"><span class="pre">common.networking.access_point.OpenWrtWifiFixtureMixin</span></code></a></p>
<p>ProxyBaseFixture:
Base fixture class to testing station mode home theater.
‘setUpFixture’ of this class can bring up station mode home theater,
and steps are:</p>
<blockquote>
<div><ol class="arabic simple">
<li>Configure wireless credentials and keep wired connectivity.</li>
<li>Disable wireless interface of ZPs that are not in test.</li>
<li>Configure Home Theater.</li>
<li>Disable wired connectivity of ZPs that are in test, so that
playbar will operate in station mode and satellites will connect
to playbar using wireless.</li>
</ol>
</div></blockquote>
<dl class="method">
<dt id="networking.ht_proxy.proxy.ProxyBaseFixture.are_satellites_on_interface">
<code class="descname">are_satellites_on_interface</code><span class="sig-paren">(</span><em>interface</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/networking/ht_proxy/proxy.html#ProxyBaseFixture.are_satellites_on_interface"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#networking.ht_proxy.proxy.ProxyBaseFixture.are_satellites_on_interface" title="Permalink to this definition">¶</a></dt>
<dd><p>Get whether all satellites settled on given interface
:param interface: interface that will be checked
:type interface <code class="xref py py-obj docutils literal notranslate"><span class="pre">str</span></code>
:return: whether all satellites settled on given interface
:rtype: <code class="xref py py-obj docutils literal notranslate"><span class="pre">bool</span></code></p>
</dd></dl>

<dl class="method">
<dt id="networking.ht_proxy.proxy.ProxyBaseFixture.booted_up_after">
<code class="descname">booted_up_after</code><span class="sig-paren">(</span><em>zp</em>, <em>start</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/networking/ht_proxy/proxy.html#ProxyBaseFixture.booted_up_after"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#networking.ht_proxy.proxy.ProxyBaseFixture.booted_up_after" title="Permalink to this definition">¶</a></dt>
<dd><p>This function can be used to check whether ZP booted up
after time point ‘start’(datetime type).
:param zp: reboot checking DUT
:type zp :class:~sonos.client.internal.SonosZoneComponent
:param start: time when reboot command issued to ZP
:type start :class: datetime.datetime
:return: whether ZP rebooted
:rtype: <code class="xref py py-obj docutils literal notranslate"><span class="pre">bool</span></code></p>
</dd></dl>

<dl class="method">
<dt id="networking.ht_proxy.proxy.ProxyBaseFixture.clean_up_setup">
<code class="descname">clean_up_setup</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/networking/ht_proxy/proxy.html#ProxyBaseFixture.clean_up_setup"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#networking.ht_proxy.proxy.ProxyBaseFixture.clean_up_setup" title="Permalink to this definition">¶</a></dt>
<dd><p>Ensure testbed devices are in a clean state, ie. freshly rebooted
and Telnet-connectable.</p>
<p>Raises sonos.exception.TimeoutError</p>
</dd></dl>

<dl class="method">
<dt id="networking.ht_proxy.proxy.ProxyBaseFixture.find_sats_in_testbed">
<code class="descname">find_sats_in_testbed</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/networking/ht_proxy/proxy.html#ProxyBaseFixture.find_sats_in_testbed"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#networking.ht_proxy.proxy.ProxyBaseFixture.find_sats_in_testbed" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="networking.ht_proxy.proxy.ProxyBaseFixture.get_freshed_zp">
<code class="descname">get_freshed_zp</code><span class="sig-paren">(</span><em>target_zp</em>, <em>ip</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/networking/ht_proxy/proxy.html#ProxyBaseFixture.get_freshed_zp"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#networking.ht_proxy.proxy.ProxyBaseFixture.get_freshed_zp" title="Permalink to this definition">¶</a></dt>
<dd><p>Try to ZP automaticly refreshed by framework. ‘target_zp’ is
original object of that ZP. ‘ip’ is original IP.
‘target_zp.ip’ may be updated by framework, but other part of
it won’t be updated after refreshing. Thats’s why original IP is
needed here as input.
:return: refreshed ZP object
:rtype: <code class="xref py py-obj docutils literal notranslate"><span class="pre">SonosZoneComponent</span></code></p>
</dd></dl>

<dl class="method">
<dt id="networking.ht_proxy.proxy.ProxyBaseFixture.install_tools_on_zps">
<code class="descname">install_tools_on_zps</code><span class="sig-paren">(</span><em>zps</em>, <em>tools</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/networking/ht_proxy/proxy.html#ProxyBaseFixture.install_tools_on_zps"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#networking.ht_proxy.proxy.ProxyBaseFixture.install_tools_on_zps" title="Permalink to this definition">¶</a></dt>
<dd><p>Install a list of tools onto multiple zps
:param zps: zps to install tool(s) on
:type zps <code class="xref py py-obj docutils literal notranslate"><span class="pre">list</span></code> of class:~sonos.client.internal.SonosZoneComponent
:param tools: binary tools to install
:type tools: <code class="xref py py-obj docutils literal notranslate"><span class="pre">list</span></code> of <cite>str</cite></p>
</dd></dl>

<dl class="method">
<dt id="networking.ht_proxy.proxy.ProxyBaseFixture.is_layer3_connected">
<code class="descname">is_layer3_connected</code><span class="sig-paren">(</span><em>zp</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/networking/ht_proxy/proxy.html#ProxyBaseFixture.is_layer3_connected"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#networking.ht_proxy.proxy.ProxyBaseFixture.is_layer3_connected" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="networking.ht_proxy.proxy.ProxyBaseFixture.is_telnet_cli_available">
<code class="descname">is_telnet_cli_available</code><span class="sig-paren">(</span><em>zp</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/networking/ht_proxy/proxy.html#ProxyBaseFixture.is_telnet_cli_available"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#networking.ht_proxy.proxy.ProxyBaseFixture.is_telnet_cli_available" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="networking.ht_proxy.proxy.ProxyBaseFixture.mac_to_int">
<code class="descname">mac_to_int</code><span class="sig-paren">(</span><em>mac</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/networking/ht_proxy/proxy.html#ProxyBaseFixture.mac_to_int"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#networking.ht_proxy.proxy.ProxyBaseFixture.mac_to_int" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert mac address to integer format. This function can be used
when you want comparison between MAC adresses of different
interfaces to be easier.
:return: integer format of a MAC address
:rtype: <code class="xref py py-obj docutils literal notranslate"><span class="pre">int</span></code></p>
</dd></dl>

<dl class="method">
<dt id="networking.ht_proxy.proxy.ProxyBaseFixture.prepare_brctl_for_zp">
<code class="descname">prepare_brctl_for_zp</code><span class="sig-paren">(</span><em>zp</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/networking/ht_proxy/proxy.html#ProxyBaseFixture.prepare_brctl_for_zp"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#networking.ht_proxy.proxy.ProxyBaseFixture.prepare_brctl_for_zp" title="Permalink to this definition">¶</a></dt>
<dd><p>Prepare brctls variable in proxy class for ZP.</p>
</dd></dl>

<dl class="method">
<dt id="networking.ht_proxy.proxy.ProxyBaseFixture.refresh_zp">
<code class="descname">refresh_zp</code><span class="sig-paren">(</span><em>target_zp</em>, <em>ip</em>, <em>wait_for_new=False</em>, <em>timeout=120</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/networking/ht_proxy/proxy.html#ProxyBaseFixture.refresh_zp"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#networking.ht_proxy.proxy.ProxyBaseFixture.refresh_zp" title="Permalink to this definition">¶</a></dt>
<dd><p>Get ZP automaticly refreshed by framework.
If ‘wait_for_new’ is true, this function will wait for ZP really
get refreshed. If ‘wait_for_new’ is false, when framework is
still holding original ZP object, None will be returned.
:return: refreshed ZP object
:rtype: <code class="xref py py-obj docutils literal notranslate"><span class="pre">SonosZoneComponent</span></code></p>
</dd></dl>

<dl class="method">
<dt id="networking.ht_proxy.proxy.ProxyBaseFixture.setUpFixture">
<code class="descname">setUpFixture</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/networking/ht_proxy/proxy.html#ProxyBaseFixture.setUpFixture"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#networking.ht_proxy.proxy.ProxyBaseFixture.setUpFixture" title="Permalink to this definition">¶</a></dt>
<dd><p>Called once per fixture, before all tests are run.</p>
</dd></dl>

<dl class="method">
<dt id="networking.ht_proxy.proxy.ProxyBaseFixture.setUpTest">
<code class="descname">setUpTest</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/networking/ht_proxy/proxy.html#ProxyBaseFixture.setUpTest"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#networking.ht_proxy.proxy.ProxyBaseFixture.setUpTest" title="Permalink to this definition">¶</a></dt>
<dd><p>Called once per test case, before each test case is run.</p>
</dd></dl>

<dl class="method">
<dt id="networking.ht_proxy.proxy.ProxyBaseFixture.tearDownFixture">
<code class="descname">tearDownFixture</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/networking/ht_proxy/proxy.html#ProxyBaseFixture.tearDownFixture"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#networking.ht_proxy.proxy.ProxyBaseFixture.tearDownFixture" title="Permalink to this definition">¶</a></dt>
<dd><p>Called once per fixture, after all tests are run</p>
</dd></dl>

<dl class="method">
<dt id="networking.ht_proxy.proxy.ProxyBaseFixture.verify_p2p_tunnel_entries">
<code class="descname">verify_p2p_tunnel_entries</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/networking/ht_proxy/proxy.html#ProxyBaseFixture.verify_p2p_tunnel_entries"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#networking.ht_proxy.proxy.ProxyBaseFixture.verify_p2p_tunnel_entries" title="Permalink to this definition">¶</a></dt>
<dd><p>Verify that on each satellite, MAC address of primary is already
learned; and verify that, on primary, MAC and IP address of each
satellite is already learned.
MAC of primary learned by satellites should be MAC of its ath1
MAC of satellite learned by satellites should be MAC of ath0</p>
</dd></dl>

<dl class="method">
<dt id="networking.ht_proxy.proxy.ProxyBaseFixture.verify_sats_in_hh">
<code class="descname">verify_sats_in_hh</code><span class="sig-paren">(</span><em>ht_config</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/networking/ht_proxy/proxy.html#ProxyBaseFixture.verify_sats_in_hh"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#networking.ht_proxy.proxy.ProxyBaseFixture.verify_sats_in_hh" title="Permalink to this definition">¶</a></dt>
<dd><p>Verifies that the satellites in the given ht config have the same HHID
as the given home theater master or fails the test.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>ht_config</strong> (<em>:optuple:class`~sonos.client.internal.SonosZoneComponent`</em>) – The HT config used for the test</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="networking.ht_proxy.proxy.ProxyBaseFixture.verify_stp_forwarding_state_for_zp">
<code class="descname">verify_stp_forwarding_state_for_zp</code><span class="sig-paren">(</span><em>local_zp</em>, <em>other_zp</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/networking/ht_proxy/proxy.html#ProxyBaseFixture.verify_stp_forwarding_state_for_zp"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#networking.ht_proxy.proxy.ProxyBaseFixture.verify_stp_forwarding_state_for_zp" title="Permalink to this definition">¶</a></dt>
<dd><p>Verify that, in STP status of local_zp, state of link between
other_zp and itself is ‘forwarding’</p>
</dd></dl>

<dl class="method">
<dt id="networking.ht_proxy.proxy.ProxyBaseFixture.wait_for_sats_settle_on_interface">
<code class="descname">wait_for_sats_settle_on_interface</code><span class="sig-paren">(</span><em>interface</em>, <em>timeout_seconds=120</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/networking/ht_proxy/proxy.html#ProxyBaseFixture.wait_for_sats_settle_on_interface"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#networking.ht_proxy.proxy.ProxyBaseFixture.wait_for_sats_settle_on_interface" title="Permalink to this definition">¶</a></dt>
<dd><p>Wait for satellites settle on given interface
:param interface: interface that satellites should settle on
:type interface <code class="xref py py-obj docutils literal notranslate"><span class="pre">str</span></code>
:param timeout_seconds: how long it takes before timeout
:type timeout_seconds <code class="xref py py-obj docutils literal notranslate"><span class="pre">int</span></code></p>
</dd></dl>

<dl class="method">
<dt id="networking.ht_proxy.proxy.ProxyBaseFixture.wait_for_station_mode_ht">
<code class="descname">wait_for_station_mode_ht</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/networking/ht_proxy/proxy.html#ProxyBaseFixture.wait_for_station_mode_ht"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#networking.ht_proxy.proxy.ProxyBaseFixture.wait_for_station_mode_ht" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="networking.ht_proxy.proxy.ProxyBaseFixture.zp_install_tool">
<code class="descname">zp_install_tool</code><span class="sig-paren">(</span><em>zp</em>, <em>tool_name</em>, <em>force_install=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/networking/ht_proxy/proxy.html#ProxyBaseFixture.zp_install_tool"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#networking.ht_proxy.proxy.ProxyBaseFixture.zp_install_tool" title="Permalink to this definition">¶</a></dt>
<dd><p>Install a binary tool on a zp
:param zp: zp to install binary on
:type zp :class:~sonos.client.internal.SonosZoneComponent
:param tool_name: binary name of tool to install
:type interface <code class="xref py py-obj docutils literal notranslate"><span class="pre">str</span></code>
:param force_install: If binary exists, overwrite it
:type interface <code class="xref py py-obj docutils literal notranslate"><span class="pre">bool</span></code>
:return: installation was successful
:rtype: <code class="xref py py-obj docutils literal notranslate"><span class="pre">bool</span></code></p>
</dd></dl>

<dl class="method">
<dt id="networking.ht_proxy.proxy.ProxyBaseFixture.zp_mode_matches">
<code class="descname">zp_mode_matches</code><span class="sig-paren">(</span><em>zp</em>, <em>mode</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/networking/ht_proxy/proxy.html#ProxyBaseFixture.zp_mode_matches"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#networking.ht_proxy.proxy.ProxyBaseFixture.zp_mode_matches" title="Permalink to this definition">¶</a></dt>
<dd><p>Check whether mode running on ZP matches ‘mode’.
Possible modes are: ‘sonosnet’, ‘station’ and ‘satellite’</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-networking.ht_proxy.test_dhcp">
<span id="networking-ht-proxy-test-dhcp-module"></span><h2>networking.ht_proxy.test_dhcp module<a class="headerlink" href="#module-networking.ht_proxy.test_dhcp" title="Permalink to this headline">¶</a></h2>
<dl class="data">
<dt id="networking.ht_proxy.test_dhcp.ACCEPTABLE_SAT_NM_TRANSITION_INTERVAL">
<code class="descclassname">networking.ht_proxy.test_dhcp.</code><code class="descname">ACCEPTABLE_SAT_NM_TRANSITION_INTERVAL</code><em class="property"> = 60</em><a class="headerlink" href="#networking.ht_proxy.test_dhcp.ACCEPTABLE_SAT_NM_TRANSITION_INTERVAL" title="Permalink to this definition">¶</a></dt>
<dd><p>ProxyDHCPTestFixture:
The class to test DHCP related functionality of station mode home theater.
test_proxy_dhcp_broadcast_flag: Test whether DHCP discovers/request sent by
satellites have broadcast flag set.</p>
</dd></dl>

<dl class="class">
<dt id="networking.ht_proxy.test_dhcp.ProxyDHCPTestFixture">
<em class="property">class </em><code class="descclassname">networking.ht_proxy.test_dhcp.</code><code class="descname">ProxyDHCPTestFixture</code><span class="sig-paren">(</span><em>fixture_name</em>, <em>zone_json</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/networking/ht_proxy/test_dhcp.html#ProxyDHCPTestFixture"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#networking.ht_proxy.test_dhcp.ProxyDHCPTestFixture" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#networking.ht_proxy.proxy.ProxyBaseFixture" title="networking.ht_proxy.proxy.ProxyBaseFixture"><code class="xref py py-class docutils literal notranslate"><span class="pre">networking.ht_proxy.proxy.ProxyBaseFixture</span></code></a>, <a class="reference internal" href="common.networking.html#common.networking.packet_capture.PacketCaptureMixin" title="common.networking.packet_capture.PacketCaptureMixin"><code class="xref py py-class docutils literal notranslate"><span class="pre">common.networking.packet_capture.PacketCaptureMixin</span></code></a></p>
<p>Test whether DHCP discovers/request sent by satellites have broadcast
flag set and whether satellites can finish complete DHCP transaction.</p>
<dl class="attribute">
<dt id="networking.ht_proxy.test_dhcp.ProxyDHCPTestFixture.TEST_TYPE">
<code class="descname">TEST_TYPE</code><em class="property"> = ['HT_PROXY']</em><a class="headerlink" href="#networking.ht_proxy.test_dhcp.ProxyDHCPTestFixture.TEST_TYPE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="networking.ht_proxy.test_dhcp.ProxyDHCPTestFixture.get_last_dhcp_log_time_stamp">
<code class="descname">get_last_dhcp_log_time_stamp</code><span class="sig-paren">(</span><em>zp</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/networking/ht_proxy/test_dhcp.html#ProxyDHCPTestFixture.get_last_dhcp_log_time_stamp"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#networking.ht_proxy.test_dhcp.ProxyDHCPTestFixture.get_last_dhcp_log_time_stamp" title="Permalink to this definition">¶</a></dt>
<dd><p>This function goes to ZP to get last DHCP leasing log, and then
return its timestamp.
:return: timestamp of last DHCP leasing log.
:rtype: <code class="xref py py-obj docutils literal notranslate"><span class="pre">datetime</span></code></p>
</dd></dl>

<dl class="method">
<dt id="networking.ht_proxy.test_dhcp.ProxyDHCPTestFixture.get_packet_capture_from_zp">
<code class="descname">get_packet_capture_from_zp</code><span class="sig-paren">(</span><em>zp</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/networking/ht_proxy/test_dhcp.html#ProxyDHCPTestFixture.get_packet_capture_from_zp"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#networking.ht_proxy.test_dhcp.ProxyDHCPTestFixture.get_packet_capture_from_zp" title="Permalink to this definition">¶</a></dt>
<dd><p>Copy packet capture from ZP, which is located in
“/tmp/SERIAL_NUMBER.pcap”</p>
</dd></dl>

<dl class="method">
<dt id="networking.ht_proxy.test_dhcp.ProxyDHCPTestFixture.get_time_as_str_from_zp">
<code class="descname">get_time_as_str_from_zp</code><span class="sig-paren">(</span><em>zp</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/networking/ht_proxy/test_dhcp.html#ProxyDHCPTestFixture.get_time_as_str_from_zp"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#networking.ht_proxy.test_dhcp.ProxyDHCPTestFixture.get_time_as_str_from_zp" title="Permalink to this definition">¶</a></dt>
<dd><p>Get local date from ZP, as string.</p>
</dd></dl>

<dl class="method">
<dt id="networking.ht_proxy.test_dhcp.ProxyDHCPTestFixture.kick_dhcp_renew_on_zp">
<code class="descname">kick_dhcp_renew_on_zp</code><span class="sig-paren">(</span><em>zp</em>, <em>expect_new_ip</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/networking/ht_proxy/test_dhcp.html#ProxyDHCPTestFixture.kick_dhcp_renew_on_zp"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#networking.ht_proxy.test_dhcp.ProxyDHCPTestFixture.kick_dhcp_renew_on_zp" title="Permalink to this definition">¶</a></dt>
<dd><p>Kick DHCP renew by USR1 signal on ZP.
:return: timestamp of DHCP renew log triggered by this function.
:rtype: <code class="xref py py-obj docutils literal notranslate"><span class="pre">datetime</span></code></p>
</dd></dl>

<dl class="method">
<dt id="networking.ht_proxy.test_dhcp.ProxyDHCPTestFixture.setUpFixture">
<code class="descname">setUpFixture</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/networking/ht_proxy/test_dhcp.html#ProxyDHCPTestFixture.setUpFixture"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#networking.ht_proxy.test_dhcp.ProxyDHCPTestFixture.setUpFixture" title="Permalink to this definition">¶</a></dt>
<dd><p>Called once per fixture, before all tests are run.</p>
</dd></dl>

<dl class="method">
<dt id="networking.ht_proxy.test_dhcp.ProxyDHCPTestFixture.start_packet_capture_on_zp">
<code class="descname">start_packet_capture_on_zp</code><span class="sig-paren">(</span><em>zp</em>, <em>interface_name</em>, <em>cap_filter=''</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/networking/ht_proxy/test_dhcp.html#ProxyDHCPTestFixture.start_packet_capture_on_zp"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#networking.ht_proxy.test_dhcp.ProxyDHCPTestFixture.start_packet_capture_on_zp" title="Permalink to this definition">¶</a></dt>
<dd><p>Call tcpdump on ZP through cli.command. And tcpdump will be run in
background, so that we can do other work or wait for certain time
while tcpdump is running on ZP.</p>
</dd></dl>

<dl class="method">
<dt id="networking.ht_proxy.test_dhcp.ProxyDHCPTestFixture.stop_packet_capture_on_zp">
<code class="descname">stop_packet_capture_on_zp</code><span class="sig-paren">(</span><em>zp</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/networking/ht_proxy/test_dhcp.html#ProxyDHCPTestFixture.stop_packet_capture_on_zp"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#networking.ht_proxy.test_dhcp.ProxyDHCPTestFixture.stop_packet_capture_on_zp" title="Permalink to this definition">¶</a></dt>
<dd><p>Kill running tcpdump on ZP.</p>
</dd></dl>

<dl class="method">
<dt id="networking.ht_proxy.test_dhcp.ProxyDHCPTestFixture.tearDownFixture">
<code class="descname">tearDownFixture</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/networking/ht_proxy/test_dhcp.html#ProxyDHCPTestFixture.tearDownFixture"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#networking.ht_proxy.test_dhcp.ProxyDHCPTestFixture.tearDownFixture" title="Permalink to this definition">¶</a></dt>
<dd><p>Called once per fixture, after all tests are run</p>
</dd></dl>

<dl class="method">
<dt id="networking.ht_proxy.test_dhcp.ProxyDHCPTestFixture.test_proxy_dhcp_broadcast_flag">
<code class="descname">test_proxy_dhcp_broadcast_flag</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/networking/ht_proxy/test_dhcp.html#ProxyDHCPTestFixture.test_proxy_dhcp_broadcast_flag"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#networking.ht_proxy.test_dhcp.ProxyDHCPTestFixture.test_proxy_dhcp_broadcast_flag" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="networking.ht_proxy.test_dhcp.ProxyDHCPTestFixture.test_proxy_dhcp_renew_on_primary_new_ip">
<code class="descname">test_proxy_dhcp_renew_on_primary_new_ip</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/networking/ht_proxy/test_dhcp.html#ProxyDHCPTestFixture.test_proxy_dhcp_renew_on_primary_new_ip"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#networking.ht_proxy.test_dhcp.ProxyDHCPTestFixture.test_proxy_dhcp_renew_on_primary_new_ip" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="networking.ht_proxy.test_dhcp.ProxyDHCPTestFixture.test_proxy_dhcp_renew_on_primary_orignal_ip">
<code class="descname">test_proxy_dhcp_renew_on_primary_orignal_ip</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/networking/ht_proxy/test_dhcp.html#ProxyDHCPTestFixture.test_proxy_dhcp_renew_on_primary_orignal_ip"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#networking.ht_proxy.test_dhcp.ProxyDHCPTestFixture.test_proxy_dhcp_renew_on_primary_orignal_ip" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="networking.ht_proxy.test_dhcp.ProxyDHCPTestFixture.test_proxy_dhcp_renew_on_satellites">
<code class="descname">test_proxy_dhcp_renew_on_satellites</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/networking/ht_proxy/test_dhcp.html#ProxyDHCPTestFixture.test_proxy_dhcp_renew_on_satellites"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#networking.ht_proxy.test_dhcp.ProxyDHCPTestFixture.test_proxy_dhcp_renew_on_satellites" title="Permalink to this definition">¶</a></dt>
<dd><p>This function test DHCP renew on satellites by:
Change DHCP server lease duration to 5 minutes. Then reboot satellites
So when satellites come back, they will get DHCP offer with new lease
duration and will send DHCP renew every 2 and half minutes.
According to packet captures done on ZPs, check whether DHCP renew
transactions were successful.</p>
</dd></dl>

<dl class="method">
<dt id="networking.ht_proxy.test_dhcp.ProxyDHCPTestFixture.test_proxy_fast_boot_to_ip">
<code class="descname">test_proxy_fast_boot_to_ip</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/networking/ht_proxy/test_dhcp.html#ProxyDHCPTestFixture.test_proxy_fast_boot_to_ip"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#networking.ht_proxy.test_dhcp.ProxyDHCPTestFixture.test_proxy_fast_boot_to_ip" title="Permalink to this definition">¶</a></dt>
<dd><p>Test whether satellites can quickly come up after reboot
and whether satellites come up with expected behavior.</p>
</dd></dl>

<dl class="method">
<dt id="networking.ht_proxy.test_dhcp.ProxyDHCPTestFixture.verify_dhcp_broadcast_flag">
<code class="descname">verify_dhcp_broadcast_flag</code><span class="sig-paren">(</span><em>pkts</em>, <em>ht_config</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/networking/ht_proxy/test_dhcp.html#ProxyDHCPTestFixture.verify_dhcp_broadcast_flag"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#networking.ht_proxy.test_dhcp.ProxyDHCPTestFixture.verify_dhcp_broadcast_flag" title="Permalink to this definition">¶</a></dt>
<dd><p>Verify DHCP broadcast flag was set for DHCP transactions
in given packet capture.</p>
</dd></dl>

<dl class="method">
<dt id="networking.ht_proxy.test_dhcp.ProxyDHCPTestFixture.verify_proxy_dhcp_log_is_present_on_zp">
<code class="descname">verify_proxy_dhcp_log_is_present_on_zp</code><span class="sig-paren">(</span><em>zp</em>, <em>retry_times</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/networking/ht_proxy/test_dhcp.html#ProxyDHCPTestFixture.verify_proxy_dhcp_log_is_present_on_zp"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#networking.ht_proxy.test_dhcp.ProxyDHCPTestFixture.verify_proxy_dhcp_log_is_present_on_zp" title="Permalink to this definition">¶</a></dt>
<dd><p>Verify that there is DHCP leasing log present on ZP, and return
that log
:return: last DHCP leasing log.
:rtype: <code class="xref py py-obj docutils literal notranslate"><span class="pre">list</span></code></p>
</dd></dl>

<dl class="method">
<dt id="networking.ht_proxy.test_dhcp.ProxyDHCPTestFixture.verify_proxy_dhcp_renew_capture_on_satellites">
<code class="descname">verify_proxy_dhcp_renew_capture_on_satellites</code><span class="sig-paren">(</span><em>pkts</em>, <em>zp</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/networking/ht_proxy/test_dhcp.html#ProxyDHCPTestFixture.verify_proxy_dhcp_renew_capture_on_satellites"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#networking.ht_proxy.test_dhcp.ProxyDHCPTestFixture.verify_proxy_dhcp_renew_capture_on_satellites" title="Permalink to this definition">¶</a></dt>
<dd><p>Verify there are successful DHCP renew transactions among give
packet capture.</p>
</dd></dl>

<dl class="method">
<dt id="networking.ht_proxy.test_dhcp.ProxyDHCPTestFixture.verify_proxy_dhcp_renew_log_on_satellite">
<code class="descname">verify_proxy_dhcp_renew_log_on_satellite</code><span class="sig-paren">(</span><em>zp</em>, <em>retry_times=0</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/networking/ht_proxy/test_dhcp.html#ProxyDHCPTestFixture.verify_proxy_dhcp_renew_log_on_satellite"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#networking.ht_proxy.test_dhcp.ProxyDHCPTestFixture.verify_proxy_dhcp_renew_log_on_satellite" title="Permalink to this definition">¶</a></dt>
<dd><p>This function checks DHCP log for DHCP renew.
For successful DHCP renew, there should be valid logs for udhcpc.
IP address in lease should match original IP. And DHCP server’s IP
is expected to be the original one.</p>
</dd></dl>

<dl class="method">
<dt id="networking.ht_proxy.test_dhcp.ProxyDHCPTestFixture.verify_proxy_dhcp_renew_on_primary">
<code class="descname">verify_proxy_dhcp_renew_on_primary</code><span class="sig-paren">(</span><em>get_new_ip=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/networking/ht_proxy/test_dhcp.html#ProxyDHCPTestFixture.verify_proxy_dhcp_renew_on_primary"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#networking.ht_proxy.test_dhcp.ProxyDHCPTestFixture.verify_proxy_dhcp_renew_on_primary" title="Permalink to this definition">¶</a></dt>
<dd><p>This function test DHCP renew on primary, to make sure when DHCP renew
happens on primary, satellites won’t be impacted. For example,
renew on primary should not trigger renew on satellites, and IP address
of satellites should not change.</p>
</dd></dl>

<dl class="method">
<dt id="networking.ht_proxy.test_dhcp.ProxyDHCPTestFixture.verify_proxy_fast_boot_to_ip_on_zp">
<code class="descname">verify_proxy_fast_boot_to_ip_on_zp</code><span class="sig-paren">(</span><em>zp</em>, <em>expected_sequence</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/networking/ht_proxy/test_dhcp.html#ProxyDHCPTestFixture.verify_proxy_fast_boot_to_ip_on_zp"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#networking.ht_proxy.test_dhcp.ProxyDHCPTestFixture.verify_proxy_fast_boot_to_ip_on_zp" title="Permalink to this definition">¶</a></dt>
<dd><p>Verify whether given ZP’s behavior matches what is expected
through netstartd log.
:param zp: Zoneplayer that is under test
:type zp :class:~sonos.client.internal.SonosZoneComponent
:param expected_sequence: Expected netstartd state/event/mode
:type expected_sequence: <code class="xref py py-obj docutils literal notranslate"><span class="pre">list</span></code> of (NetManagerState,</p>
<blockquote>
<div>NetManagerEvent, NetManagerMode)</div></blockquote>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="networking-ht-proxy-test-p2p-module">
<h2>networking.ht_proxy.test_p2p module<a class="headerlink" href="#networking-ht-proxy-test-p2p-module" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-networking.ht_proxy">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-networking.ht_proxy" title="Permalink to this headline">¶</a></h2>
</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">TestCase Documentation</a></h1>








<h3>Navigation</h3>
<p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="audio.html">audio package</a></li>
<li class="toctree-l1"><a class="reference internal" href="cloud.html">cloud package</a></li>
<li class="toctree-l1"><a class="reference internal" href="common.html">common package</a></li>
<li class="toctree-l1"><a class="reference internal" href="data_reporting.html">data_reporting package</a></li>
<li class="toctree-l1"><a class="reference internal" href="dataio.html">dataio package</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples.html">examples package</a></li>
<li class="toctree-l1"><a class="reference internal" href="hdmi.html">hdmi package</a></li>
<li class="toctree-l1"><a class="reference internal" href="ixchariot.html">ixchariot package</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="networking.html">networking package</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="networking.html#subpackages">Subpackages</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="networking.acs.html">networking.acs package</a></li>
<li class="toctree-l3"><a class="reference internal" href="networking.direct_routing.html">networking.direct_routing package</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">networking.ht_proxy package</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#submodules">Submodules</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-networking.ht_proxy.proxy">networking.ht_proxy.proxy module</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-networking.ht_proxy.test_dhcp">networking.ht_proxy.test_dhcp module</a></li>
<li class="toctree-l4"><a class="reference internal" href="#networking-ht-proxy-test-p2p-module">networking.ht_proxy.test_p2p module</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-networking.ht_proxy">Module contents</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="networking.netstart.html">networking.netstart package</a></li>
<li class="toctree-l3"><a class="reference internal" href="networking.path_to_wire.html">networking.path_to_wire package</a></li>
<li class="toctree-l3"><a class="reference internal" href="networking.qos.html">networking.qos package</a></li>
<li class="toctree-l3"><a class="reference internal" href="networking.smp.html">networking.smp package</a></li>
<li class="toctree-l3"><a class="reference internal" href="networking.spanning_tree.html">networking.spanning_tree package</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="networking.html#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="networking.html#networking-channel-change-2ghz-module">networking.channel_change_2ghz module</a></li>
<li class="toctree-l2"><a class="reference internal" href="networking.html#module-networking.channel_change_5ghz">networking.channel_change_5ghz module</a></li>
<li class="toctree-l2"><a class="reference internal" href="networking.html#module-networking.test_misc_station_mode">networking.test_misc_station_mode module</a></li>
<li class="toctree-l2"><a class="reference internal" href="networking.html#module-networking.test_sonosnet_encryption">networking.test_sonosnet_encryption module</a></li>
<li class="toctree-l2"><a class="reference internal" href="networking.html#module-networking.test_sonosnet_probes">networking.test_sonosnet_probes module</a></li>
<li class="toctree-l2"><a class="reference internal" href="networking.html#module-networking.test_wifi_reset">networking.test_wifi_reset module</a></li>
<li class="toctree-l2"><a class="reference internal" href="networking.html#module-networking.test_wifi_rx">networking.test_wifi_rx module</a></li>
<li class="toctree-l2"><a class="reference internal" href="networking.html#networking-wifi-mixed-regions-module">networking.wifi_mixed_regions module</a></li>
<li class="toctree-l2"><a class="reference internal" href="networking.html#module-networking">Module contents</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="other.html">other package</a></li>
<li class="toctree-l1"><a class="reference internal" href="perf.html">perf package</a></li>
<li class="toctree-l1"><a class="reference internal" href="pytest_automation.html">pytest_automation package</a></li>
<li class="toctree-l1"><a class="reference internal" href="secure_registration.html">secure_registration package</a></li>
<li class="toctree-l1"><a class="reference internal" href="syssw.html">syssw package</a></li>
<li class="toctree-l1"><a class="reference internal" href="upnp.html">upnp package</a></li>
<li class="toctree-l1"><a class="reference internal" href="voice.html">voice package</a></li>
<li class="toctree-l1"><a class="reference internal" href="webserver.html">webserver package</a></li>
<li class="toctree-l1"><a class="reference internal" href="webserver_v0.html">webserver_v0 package</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
  <li><a href="networking.html">networking package</a><ul>
      <li>Previous: <a href="networking.direct_routing.html" title="previous chapter">networking.direct_routing package</a></li>
      <li>Next: <a href="networking.netstart.html" title="next chapter">networking.netstart package</a></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2019, Author.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.8.5</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/networking.ht_proxy.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>
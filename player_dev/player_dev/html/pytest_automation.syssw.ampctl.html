
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>pytest_automation.syssw.ampctl package &#8212; TestCase Documentation  documentation</title>
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/language_data.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="pytest_automation.syssw.cap_touch package" href="pytest_automation.syssw.cap_touch.html" />
    <link rel="prev" title="pytest_automation.syssw package" href="pytest_automation.syssw.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="pytest-automation-syssw-ampctl-package">
<h1>pytest_automation.syssw.ampctl package<a class="headerlink" href="#pytest-automation-syssw-ampctl-package" title="Permalink to this headline">¶</a></h1>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-pytest_automation.syssw.ampctl.common">
<span id="pytest-automation-syssw-ampctl-common-module"></span><h2>pytest_automation.syssw.ampctl.common module<a class="headerlink" href="#module-pytest_automation.syssw.ampctl.common" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="pytest_automation.syssw.ampctl.common.AmpctlState">
<em class="property">class </em><code class="descclassname">pytest_automation.syssw.ampctl.common.</code><code class="descname">AmpctlState</code><a class="reference internal" href="_modules/pytest_automation/syssw/ampctl/common.html#AmpctlState"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pytest_automation.syssw.ampctl.common.AmpctlState" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">enum.Enum</span></code></p>
<p>Enum that contains all possible ampctl states. These states
are specific to the “ampctl” driver and not the “amperctl” driver.</p>
<dl class="attribute">
<dt id="pytest_automation.syssw.ampctl.common.AmpctlState.ERROR">
<code class="descname">ERROR</code><em class="property"> = 'fsm_error'</em><a class="headerlink" href="#pytest_automation.syssw.ampctl.common.AmpctlState.ERROR" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="pytest_automation.syssw.ampctl.common.AmpctlState.FAULT">
<code class="descname">FAULT</code><em class="property"> = 'fsm_amp_fault'</em><a class="headerlink" href="#pytest_automation.syssw.ampctl.common.AmpctlState.FAULT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="pytest_automation.syssw.ampctl.common.AmpctlState.IDLE">
<code class="descname">IDLE</code><em class="property"> = 'fsm_idle'</em><a class="headerlink" href="#pytest_automation.syssw.ampctl.common.AmpctlState.IDLE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="pytest_automation.syssw.ampctl.common.AmpctlState.POWER_STABLE">
<code class="descname">POWER_STABLE</code><em class="property"> = 'fsm_power_stable'</em><a class="headerlink" href="#pytest_automation.syssw.ampctl.common.AmpctlState.POWER_STABLE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="pytest_automation.syssw.ampctl.common.AmpctlState.RUN_HIGH">
<code class="descname">RUN_HIGH</code><em class="property"> = 'fsm_run_high'</em><a class="headerlink" href="#pytest_automation.syssw.ampctl.common.AmpctlState.RUN_HIGH" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="pytest_automation.syssw.ampctl.common.AmpctlState.RUN_LOW">
<code class="descname">RUN_LOW</code><em class="property"> = 'fsm_run_low'</em><a class="headerlink" href="#pytest_automation.syssw.ampctl.common.AmpctlState.RUN_LOW" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="function">
<dt id="pytest_automation.syssw.ampctl.common.clear_error_state">
<code class="descclassname">pytest_automation.syssw.ampctl.common.</code><code class="descname">clear_error_state</code><span class="sig-paren">(</span><em>device</em>, <em>error_state</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pytest_automation/syssw/ampctl/common.html#clear_error_state"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pytest_automation.syssw.ampctl.common.clear_error_state" title="Permalink to this definition">¶</a></dt>
<dd><p>This function clears a device’s amp error state.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>device</strong> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">sonos.client.internal.SonosZoneComponent</span></code>) – A Sonos Zone Player</li>
<li><strong>error_state</strong> (<a class="reference internal" href="#pytest_automation.syssw.ampctl.common.AmpctlState" title="pytest_automation.syssw.ampctl.common.AmpctlState"><code class="xref py py-obj docutils literal notranslate"><span class="pre">AmpctlState</span></code></a>) – The error state to clear</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="pytest_automation.syssw.ampctl.common.generate_ampctl_state_transitions">
<code class="descclassname">pytest_automation.syssw.ampctl.common.</code><code class="descname">generate_ampctl_state_transitions</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pytest_automation/syssw/ampctl/common.html#generate_ampctl_state_transitions"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pytest_automation.syssw.ampctl.common.generate_ampctl_state_transitions" title="Permalink to this definition">¶</a></dt>
<dd><p>Generates all possible ampctl state transitions and splits the
transitions up into two lists, one containing all valid state
transitions and one containing only the non-error -&gt; error state
transitions.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">A list of all valid state transitions and a list of
non-error -&gt; error state transitions</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Tuple</span></code> of (<code class="xref py py-obj docutils literal notranslate"><span class="pre">list</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">list</span></code>)</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="pytest_automation.syssw.ampctl.common.get_expected_ampctl_settings">
<code class="descclassname">pytest_automation.syssw.ampctl.common.</code><code class="descname">get_expected_ampctl_settings</code><span class="sig-paren">(</span><em>device</em>, <em>state</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pytest_automation/syssw/ampctl/common.html#get_expected_ampctl_settings"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pytest_automation.syssw.ampctl.common.get_expected_ampctl_settings" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the expected ampctl settings a device should have when in
a given state (amp state). These “settings” are found under
/proc/driver/ampctl. See the <cite>sonos.client.cli.base.Ampctl</cite>
tuple for more information.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>device</strong> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">sonos.client.internal.SonosZoneComponent</span></code>) – A Sonos Zone Player</li>
<li><strong>state</strong> (<a class="reference internal" href="#pytest_automation.syssw.ampctl.common.AmpctlState" title="pytest_automation.syssw.ampctl.common.AmpctlState"><code class="xref py py-obj docutils literal notranslate"><span class="pre">AmpctlState</span></code></a>) – The state to get expected settings for</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">The expected ampctl settings for a given state</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><code class="xref py py-obj docutils literal notranslate"><span class="pre">sonos.client.cli.base.Ampctl</span></code></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="pytest_automation.syssw.ampctl.common.put_device_in_state">
<code class="descclassname">pytest_automation.syssw.ampctl.common.</code><code class="descname">put_device_in_state</code><span class="sig-paren">(</span><em>device</em>, <em>state</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pytest_automation/syssw/ampctl/common.html#put_device_in_state"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pytest_automation.syssw.ampctl.common.put_device_in_state" title="Permalink to this definition">¶</a></dt>
<dd><p>This function puts a device’s amps into a given state.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>device</strong> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">sonos.client.internal.SonosZoneComponent</span></code>) – A Sonos Zone Player</li>
<li><strong>state</strong> (<a class="reference internal" href="#pytest_automation.syssw.ampctl.common.AmpctlState" title="pytest_automation.syssw.ampctl.common.AmpctlState"><code class="xref py py-obj docutils literal notranslate"><span class="pre">AmpctlState</span></code></a>) – The state to put the device in (ampctl state)</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-pytest_automation.syssw.ampctl.conftest">
<span id="pytest-automation-syssw-ampctl-conftest-module"></span><h2>pytest_automation.syssw.ampctl.conftest module<a class="headerlink" href="#module-pytest_automation.syssw.ampctl.conftest" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="pytest_automation.syssw.ampctl.conftest.ampctl_device">
<code class="descclassname">pytest_automation.syssw.ampctl.conftest.</code><code class="descname">ampctl_device</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pytest_automation/syssw/ampctl/conftest.html#ampctl_device"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pytest_automation.syssw.ampctl.conftest.ampctl_device" title="Permalink to this definition">¶</a></dt>
<dd><p>Yield <a class="reference internal" href="#pytest_automation.syssw.ampctl.conftest.override_amp_interface_device" title="pytest_automation.syssw.ampctl.conftest.override_amp_interface_device"><code class="xref py py-func docutils literal notranslate"><span class="pre">override_amp_interface_device()</span></code></a>
if it is a device using the ampctl amp driver design.</p>
</dd></dl>

<dl class="function">
<dt id="pytest_automation.syssw.ampctl.conftest.amperctl_device">
<code class="descclassname">pytest_automation.syssw.ampctl.conftest.</code><code class="descname">amperctl_device</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pytest_automation/syssw/ampctl/conftest.html#amperctl_device"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pytest_automation.syssw.ampctl.conftest.amperctl_device" title="Permalink to this definition">¶</a></dt>
<dd><p>Yield <a class="reference internal" href="#pytest_automation.syssw.ampctl.conftest.override_amp_interface_device" title="pytest_automation.syssw.ampctl.conftest.override_amp_interface_device"><code class="xref py py-func docutils literal notranslate"><span class="pre">override_amp_interface_device()</span></code></a>
if it is a device using the amperctl amp driver design.</p>
</dd></dl>

<dl class="function">
<dt id="pytest_automation.syssw.ampctl.conftest.check_and_clear_dmesg">
<code class="descclassname">pytest_automation.syssw.ampctl.conftest.</code><code class="descname">check_and_clear_dmesg</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pytest_automation/syssw/ampctl/conftest.html#check_and_clear_dmesg"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pytest_automation.syssw.ampctl.conftest.check_and_clear_dmesg" title="Permalink to this definition">¶</a></dt>
<dd><p>Check for unexpected errors for the
<a class="reference internal" href="#pytest_automation.syssw.ampctl.conftest.override_amp_interface_device" title="pytest_automation.syssw.ampctl.conftest.override_amp_interface_device"><code class="xref py py-func docutils literal notranslate"><span class="pre">override_amp_interface_device()</span></code></a>
then clear dmesg after each test. If unexpected errors found, fail test.</p>
</dd></dl>

<dl class="function">
<dt id="pytest_automation.syssw.ampctl.conftest.cleanup_ampctl">
<code class="descclassname">pytest_automation.syssw.ampctl.conftest.</code><code class="descname">cleanup_ampctl</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pytest_automation/syssw/ampctl/conftest.html#cleanup_ampctl"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pytest_automation.syssw.ampctl.conftest.cleanup_ampctl" title="Permalink to this definition">¶</a></dt>
<dd><p>Clears ampctl override at the end of testing on the
<a class="reference internal" href="#pytest_automation.syssw.ampctl.conftest.override_amp_interface_device" title="pytest_automation.syssw.ampctl.conftest.override_amp_interface_device"><code class="xref py py-func docutils literal notranslate"><span class="pre">override_amp_interface_device()</span></code></a></p>
</dd></dl>

<dl class="function">
<dt id="pytest_automation.syssw.ampctl.conftest.override_amp_interface_device">
<code class="descclassname">pytest_automation.syssw.ampctl.conftest.</code><code class="descname">override_amp_interface_device</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pytest_automation/syssw/ampctl/conftest.html#override_amp_interface_device"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pytest_automation.syssw.ampctl.conftest.override_amp_interface_device" title="Permalink to this definition">¶</a></dt>
<dd><p>Yield <a class="reference internal" href="pytest_automation.html#pytest_automation.pytest_sonos_device_selection.secure_boot_device" title="pytest_automation.pytest_sonos_device_selection.secure_boot_device"><code class="xref py py-func docutils literal notranslate"><span class="pre">secure_boot_device()</span></code></a>
if it is a device which can override its amps.</p>
</dd></dl>

<dl class="function">
<dt id="pytest_automation.syssw.ampctl.conftest.pytest_generate_tests">
<code class="descclassname">pytest_automation.syssw.ampctl.conftest.</code><code class="descname">pytest_generate_tests</code><span class="sig-paren">(</span><em>metafunc</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pytest_automation/syssw/ampctl/conftest.html#pytest_generate_tests"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pytest_automation.syssw.ampctl.conftest.pytest_generate_tests" title="Permalink to this definition">¶</a></dt>
<dd><p>Pytest hook used to generate test cases and parameterize fixtures
related to the ampctl tests. This is specifically used to generate
ampctl state test cases and parametrize fixtures present in that
test with the appropriate state transitions.</p>
</dd></dl>

</div>
<div class="section" id="module-pytest_automation.syssw.ampctl.test_ampctl_commands">
<span id="pytest-automation-syssw-ampctl-test-ampctl-commands-module"></span><h2>pytest_automation.syssw.ampctl.test_ampctl_commands module<a class="headerlink" href="#module-pytest_automation.syssw.ampctl.test_ampctl_commands" title="Permalink to this headline">¶</a></h2>
<p>Test commands for the various ampctl drivers.
Ampctl devices are devices that follow the IMX6 ampctl driver
implementation.
Amperctl devices are devices that follow the amperctl driver
implementation.</p>
<p>Amp Timing commands are used by hardware verification and
do not need to be regression tested by us.</p>
<dl class="function">
<dt id="pytest_automation.syssw.ampctl.test_ampctl_commands.cleanup_hipower">
<code class="descclassname">pytest_automation.syssw.ampctl.test_ampctl_commands.</code><code class="descname">cleanup_hipower</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pytest_automation/syssw/ampctl/test_ampctl_commands.html#cleanup_hipower"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pytest_automation.syssw.ampctl.test_ampctl_commands.cleanup_hipower" title="Permalink to this definition">¶</a></dt>
<dd><p>If device is in hipower mode, it will need some time to power low before
the test can continue, because some commands will not toggle while the
device is in the powering_low state. Wait for device to fully transition
from hipower so commands will toggle as expected in other tests.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>ampctl_device</strong> – Session-scoped fixture that returns an
ampctl device.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="pytest_automation.syssw.ampctl.test_ampctl_commands.setup_spur">
<code class="descclassname">pytest_automation.syssw.ampctl.test_ampctl_commands.</code><code class="descname">setup_spur</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pytest_automation/syssw/ampctl/test_ampctl_commands.html#setup_spur"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pytest_automation.syssw.ampctl.test_ampctl_commands.setup_spur" title="Permalink to this definition">¶</a></dt>
<dd><p>Set up the ampctl device to check for a spurious error in blackbox.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>ampctl_device</strong> – Session-scoped fixture that returns an
ampctl device.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">Ampctl device and instance of BlackboxLogInspector</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><code class="xref py py-class docutils literal notranslate"><span class="pre">sonos.client.internal.SonosZoneComponent</span></code>,
<code class="xref py py-class docutils literal notranslate"><span class="pre">sonos.log_inspector.blackbox.BlackboxLogInspector</span></code></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="pytest_automation.syssw.ampctl.test_ampctl_commands.test_amp_power_toggle">
<code class="descclassname">pytest_automation.syssw.ampctl.test_ampctl_commands.</code><code class="descname">test_amp_power_toggle</code><span class="sig-paren">(</span><em>override_amp_interface_device</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pytest_automation/syssw/ampctl/test_ampctl_commands.html#test_amp_power_toggle"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pytest_automation.syssw.ampctl.test_ampctl_commands.test_amp_power_toggle" title="Permalink to this definition">¶</a></dt>
<dd><p>Test amp-power=on/off for ampctl devices.
Test enable/disable for amperctl devices.</p>
<p>Steps:
Toggle amp power.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>override_amp_interface_device</strong> – Session-scoped fixture that returns a
secure boot device which can override
amp interface.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="pytest_automation.syssw.ampctl.test_ampctl_commands.test_clear_override">
<code class="descclassname">pytest_automation.syssw.ampctl.test_ampctl_commands.</code><code class="descname">test_clear_override</code><span class="sig-paren">(</span><em>override_amp_interface_device</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pytest_automation/syssw/ampctl/test_ampctl_commands.html#test_clear_override"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pytest_automation.syssw.ampctl.test_ampctl_commands.test_clear_override" title="Permalink to this definition">¶</a></dt>
<dd><p>Test clear-override command.</p>
<p>Steps:
1. Turn off amps.
2. Send clear override command.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>override_amp_interface_device</strong> – Session-scoped fixture that returns a
secure boot device which can override
amp interface.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="pytest_automation.syssw.ampctl.test_ampctl_commands.test_dither_toggle">
<code class="descclassname">pytest_automation.syssw.ampctl.test_ampctl_commands.</code><code class="descname">test_dither_toggle</code><span class="sig-paren">(</span><em>amperctl_device</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pytest_automation/syssw/ampctl/test_ampctl_commands.html#test_dither_toggle"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pytest_automation.syssw.ampctl.test_ampctl_commands.test_dither_toggle" title="Permalink to this definition">¶</a></dt>
<dd><p>Test dither toggle.</p>
<p>Steps:
Toggle dither state.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>amperctl_device</strong> – Session-scoped fixture that returns a
amperctl device.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="pytest_automation.syssw.ampctl.test_ampctl_commands.test_error">
<code class="descclassname">pytest_automation.syssw.ampctl.test_ampctl_commands.</code><code class="descname">test_error</code><span class="sig-paren">(</span><em>ampctl_device</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pytest_automation/syssw/ampctl/test_ampctl_commands.html#test_error"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pytest_automation.syssw.ampctl.test_ampctl_commands.test_error" title="Permalink to this definition">¶</a></dt>
<dd><p>Test error command and clear via play/pause.</p>
<p>Steps:
1. Send error command to device.
2. Clear ampctl override.
3. Simulate play/pause to clear error state.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>ampctl_device</strong> – Session-scoped fixture that returns an
ampctl device.</td>
</tr>
<tr class="field-even field"><th class="field-name">Raise:</th><td class="field-body"><cite>AssertionError</cite> if device not in expected error state.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="pytest_automation.syssw.ampctl.test_ampctl_commands.test_fault">
<code class="descclassname">pytest_automation.syssw.ampctl.test_ampctl_commands.</code><code class="descname">test_fault</code><span class="sig-paren">(</span><em>override_amp_interface_device</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pytest_automation/syssw/ampctl/test_ampctl_commands.html#test_fault"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pytest_automation.syssw.ampctl.test_ampctl_commands.test_fault" title="Permalink to this definition">¶</a></dt>
<dd><p>Test for fault and fault clear by play/pause.</p>
<p>Steps:
1. Send fault command to device.
2. Clear ampctl override.
3. Simulate play/pause to clear fault state.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>override_amp_interface_device</strong> – Session-scoped fixture that returns a
secure boot device which can override
amp interface.</td>
</tr>
<tr class="field-even field"><th class="field-name">Raise:</th><td class="field-body"><code class="xref py py-exc docutils literal notranslate"><span class="pre">TimeoutError</span></code> if device not in expected fault state.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="pytest_automation.syssw.ampctl.test_ampctl_commands.test_hipower_toggle">
<code class="descclassname">pytest_automation.syssw.ampctl.test_ampctl_commands.</code><code class="descname">test_hipower_toggle</code><span class="sig-paren">(</span><em>ampctl_device</em>, <em>cleanup_hipower</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pytest_automation/syssw/ampctl/test_ampctl_commands.html#test_hipower_toggle"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pytest_automation.syssw.ampctl.test_ampctl_commands.test_hipower_toggle" title="Permalink to this definition">¶</a></dt>
<dd><p>Test high power toggle.</p>
<p>Steps:
Toggle high power state.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>ampctl_device</strong> – Session-scoped fixture that returns an
ampctl device.</td>
</tr>
<tr class="field-even field"><th class="field-name">Raise:</th><td class="field-body"><code class="xref py py-exc docutils literal notranslate"><span class="pre">AssertionError</span></code> if non-high-power device has a high power
state.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="pytest_automation.syssw.ampctl.test_ampctl_commands.test_mute_toggle">
<code class="descclassname">pytest_automation.syssw.ampctl.test_ampctl_commands.</code><code class="descname">test_mute_toggle</code><span class="sig-paren">(</span><em>ampctl_device</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pytest_automation/syssw/ampctl/test_ampctl_commands.html#test_mute_toggle"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pytest_automation.syssw.ampctl.test_ampctl_commands.test_mute_toggle" title="Permalink to this definition">¶</a></dt>
<dd><p>Test amp mute toggle.</p>
<p>Steps:
Toggle amp mute state.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>ampctl_device</strong> – Session-scoped fixture that returns an
ampctl device.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="pytest_automation.syssw.ampctl.test_ampctl_commands.test_nofault">
<code class="descclassname">pytest_automation.syssw.ampctl.test_ampctl_commands.</code><code class="descname">test_nofault</code><span class="sig-paren">(</span><em>amperctl_device</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pytest_automation/syssw/ampctl/test_ampctl_commands.html#test_nofault"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pytest_automation.syssw.ampctl.test_ampctl_commands.test_nofault" title="Permalink to this definition">¶</a></dt>
<dd><p>Test nofault command.</p>
<p>Steps:
1. Send fault command to device.
2. Send nofault command to device.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>amperctl_device</strong> – Session-scoped fixture that returns a
amperctl device.</td>
</tr>
<tr class="field-even field"><th class="field-name">Raise:</th><td class="field-body"><code class="xref py py-exc docutils literal notranslate"><span class="pre">TimeoutError</span></code> if device not in expected fault state.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="pytest_automation.syssw.ampctl.test_ampctl_commands.test_spur">
<code class="descclassname">pytest_automation.syssw.ampctl.test_ampctl_commands.</code><code class="descname">test_spur</code><span class="sig-paren">(</span><em>setup_spur</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pytest_automation/syssw/ampctl/test_ampctl_commands.html#test_spur"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pytest_automation.syssw.ampctl.test_ampctl_commands.test_spur" title="Permalink to this definition">¶</a></dt>
<dd><p>Test spurious amp fault sends message to blackbox.</p>
<p>Steps:
1. Create blackbox log inspector instance for device.
2. Send spur command.
3. Find spur message in blackbox.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>test_spur</strong> – Function-scoped fixture to setup the blackbox log</td>
</tr>
</tbody>
</table>
<p>inspector
:type test_spur: <code class="xref py py-class docutils literal notranslate"><span class="pre">SonosZoneComponent</span></code> and
<code class="xref py py-class docutils literal notranslate"><span class="pre">BlackboxLogInspector</span></code></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Raise:</th><td class="field-body"><code class="xref py py-exc docutils literal notranslate"><span class="pre">AssertionError</span></code> if spur message not in blackbox.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="pytest_automation.syssw.ampctl.test_ampctl_commands.toggle_state">
<code class="descclassname">pytest_automation.syssw.ampctl.test_ampctl_commands.</code><code class="descname">toggle_state</code><span class="sig-paren">(</span><em>false_predicate</em>, <em>true_predicate</em>, <em>bool_predicate</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pytest_automation/syssw/ampctl/test_ampctl_commands.html#toggle_state"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pytest_automation.syssw.ampctl.test_ampctl_commands.toggle_state" title="Permalink to this definition">¶</a></dt>
<dd><p>Take advantage of int(True)==1 and int(False)==0 to toggle a binary
state and toggle again to return to the initial state.
Determine current state with bool_predicate and determine toggle
action. Compare new value of bool_predicate against initial value to
ensure toggle occured. Perform next toggle action to return device to
initial state.</p>
<p>Ex. Toggle Amp
false_predicate: Turn amp off
true_predicate: Turn amp on
bool_predicate: Is amp on</p>
<dl class="docutils">
<dt>“Is amp on” is False:</dt>
<dd>Turn amp off</dd>
<dt>“Is amp on” is True:</dt>
<dd>Turn amp on</dd>
</dl>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>false_predicate</strong> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">function</span></code>) – Action to perform if bool_predicate is False.</li>
<li><strong>true_predicate</strong> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">function</span></code>) – Action to perform if bool_predicate is True.</li>
<li><strong>bool_predicate</strong> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">function</span></code>) – Function with bool return to determine which
state device is in.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raise:</th><td class="field-body"><p class="first last"><code class="xref py py-exc docutils literal notranslate"><span class="pre">AssertionError</span></code> if device does not toggle state or return</p>
</td>
</tr>
</tbody>
</table>
<p>to initial state.</p>
</dd></dl>

</div>
<div class="section" id="module-pytest_automation.syssw.ampctl.test_ampctl_states">
<span id="pytest-automation-syssw-ampctl-test-ampctl-states-module"></span><h2>pytest_automation.syssw.ampctl.test_ampctl_states module<a class="headerlink" href="#module-pytest_automation.syssw.ampctl.test_ampctl_states" title="Permalink to this headline">¶</a></h2>
<p>This test is used to verify the ampctl driver state machine by
verifying devices can transition through all supported states. Because
this is specific to the ampctl driver, only devices which use this driver
are supported. Note: the use of “error states” in this test refers to both the
fsm_error and fsm_amp_fault states a device’s amps can be in.</p>
<p>This design is based on the following documents:
<a class="reference external" href="https://confluence.sonos.com/x/4sYqBw">https://confluence.sonos.com/x/4sYqBw</a>
<a class="reference external" href="https://confluence.sonos.com/x/piIPBQ">https://confluence.sonos.com/x/piIPBQ</a></p>
<p>Because we verify all of the ampctl settings on a device are expected for
each state, we can just use one command to transition the device through
states instead of keeping track of a state machine map containing
the functions required to transition a device from one state to the next.
This is because the transition commands we use will try to toggle several
ampctl settings, but only one will actually change depending on the device’s
state and this is verified by the test inherently (see the links above
for more information).</p>
<dl class="function">
<dt id="pytest_automation.syssw.ampctl.test_ampctl_states.ampctl_device_in_non_error_state">
<code class="descclassname">pytest_automation.syssw.ampctl.test_ampctl_states.</code><code class="descname">ampctl_device_in_non_error_state</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pytest_automation/syssw/ampctl/test_ampctl_states.html#ampctl_device_in_non_error_state"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pytest_automation.syssw.ampctl.test_ampctl_states.ampctl_device_in_non_error_state" title="Permalink to this definition">¶</a></dt>
<dd><p>Parametrized fixture that returns an ampctl supported
device that is not in an error state.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">An ampctl device in a non-error state</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><code class="xref py py-obj docutils literal notranslate"><span class="pre">sonos.client.internal.SonosZoneComponent</span></code></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="pytest_automation.syssw.ampctl.test_ampctl_states.generate_state_transition_case">
<code class="descclassname">pytest_automation.syssw.ampctl.test_ampctl_states.</code><code class="descname">generate_state_transition_case</code><span class="sig-paren">(</span><em>device</em>, <em>state_transition</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pytest_automation/syssw/ampctl/test_ampctl_states.html#generate_state_transition_case"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pytest_automation.syssw.ampctl.test_ampctl_states.generate_state_transition_case" title="Permalink to this definition">¶</a></dt>
<dd><p>Helper function used to generate an ampctl state transition test
case for a device. Skips high power state testing if the device
does not support high power.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>device</strong> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">sonos.client.internal.SonosZoneComponent</span></code>) – A Sonos Zone Player</li>
<li><strong>state_transition</strong> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">Tuple</span></code> of (
<code class="xref py py-obj docutils literal notranslate"><span class="pre">sonos.client.internal.SonosZoneComponent</span></code>,
<code class="xref py py-obj docutils literal notranslate"><span class="pre">AmpctlState</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">AmpctlState</span></code>)) – The start and end states to put the device in</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">A device, the start state, and the end state</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Tuple</span></code> of (<code class="xref py py-obj docutils literal notranslate"><span class="pre">sonos.client.internal.SonosZoneComponent</span></code>,
<code class="xref py py-obj docutils literal notranslate"><span class="pre">AmpctlState</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">AmpctlState</span></code>)</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="pytest_automation.syssw.ampctl.test_ampctl_states.get_expected_state_after_error_clear">
<code class="descclassname">pytest_automation.syssw.ampctl.test_ampctl_states.</code><code class="descname">get_expected_state_after_error_clear</code><span class="sig-paren">(</span><em>device</em>, <em>state_before_error</em>, <em>error_state</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pytest_automation/syssw/ampctl/test_ampctl_states.html#get_expected_state_after_error_clear"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pytest_automation.syssw.ampctl.test_ampctl_states.get_expected_state_after_error_clear" title="Permalink to this definition">¶</a></dt>
<dd><p>This function is used to get a device’s expected state after
an error or fault is cleared from the device.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>device</strong> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">sonos.client.internal.SonosZoneComponent</span></code>) – A Sonos Zone Player</li>
<li><strong>state_before_error</strong> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">AmpctlState</span></code>) – The device’s state before reaching the error</li>
<li><strong>error_state</strong> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">AmpctlState</span></code>) – The error state the device was in
(AmpctlState.FAULT or AmpctlState.ERROR)</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="pytest_automation.syssw.ampctl.test_ampctl_states.non_error_to_error_state_transition">
<code class="descclassname">pytest_automation.syssw.ampctl.test_ampctl_states.</code><code class="descname">non_error_to_error_state_transition</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pytest_automation/syssw/ampctl/test_ampctl_states.html#non_error_to_error_state_transition"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pytest_automation.syssw.ampctl.test_ampctl_states.non_error_to_error_state_transition" title="Permalink to this definition">¶</a></dt>
<dd><p>This fixture yields parametrized non-error -&gt; error state transitions
of the form (start_state, end_state). In these scenarios the transition out
of the error is also tested. Because transitioning out of an error state
requires knowledge of the state the device was in before reaching the error
state, a different test case and this fixture is needed to cover these
cases.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">An ampctl state transition</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Tuple</span></code> of <code class="xref py py-obj docutils literal notranslate"><span class="pre">sonos.client.base.Ampctl</span></code> provided as
(start_state, end_state)</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="pytest_automation.syssw.ampctl.test_ampctl_states.non_error_to_error_state_transition_case">
<code class="descclassname">pytest_automation.syssw.ampctl.test_ampctl_states.</code><code class="descname">non_error_to_error_state_transition_case</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pytest_automation/syssw/ampctl/test_ampctl_states.html#non_error_to_error_state_transition_case"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pytest_automation.syssw.ampctl.test_ampctl_states.non_error_to_error_state_transition_case" title="Permalink to this definition">¶</a></dt>
<dd><p>Parametrized fixture that returns a non-error -&gt; error transition
test case. The fixture is used to skip any test cases
that are not suppored by a device.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">An ampctl device, the start state, and the end state</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Tuple</span></code> of (<code class="xref py py-obj docutils literal notranslate"><span class="pre">sonos.client.internal.SonosZoneComponent</span></code>,
<code class="xref py py-obj docutils literal notranslate"><span class="pre">AmpctlState</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">AmpctlState</span></code>)</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="pytest_automation.syssw.ampctl.test_ampctl_states.state_transition">
<code class="descclassname">pytest_automation.syssw.ampctl.test_ampctl_states.</code><code class="descname">state_transition</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pytest_automation/syssw/ampctl/test_ampctl_states.html#state_transition"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pytest_automation.syssw.ampctl.test_ampctl_states.state_transition" title="Permalink to this definition">¶</a></dt>
<dd><p>This fixture yields parametrized state transitions of the form
(start_state, end_state). This yields all possible state transitions
with the exception of error -&gt; non-error which are covered separately.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">An ampctl state transition</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Tuple</span></code> of <code class="xref py py-obj docutils literal notranslate"><span class="pre">sonos.client.base.Ampctl</span></code> provided as
(start_state, end_state)</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="pytest_automation.syssw.ampctl.test_ampctl_states.state_transition_case">
<code class="descclassname">pytest_automation.syssw.ampctl.test_ampctl_states.</code><code class="descname">state_transition_case</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pytest_automation/syssw/ampctl/test_ampctl_states.html#state_transition_case"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pytest_automation.syssw.ampctl.test_ampctl_states.state_transition_case" title="Permalink to this definition">¶</a></dt>
<dd><p>Parametrized fixture that returns a state transition
test case. The fixture is used to skip any test cases
that are not supported by a device.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">An ampctl device, the start state, and the end state</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Tuple</span></code> of (<code class="xref py py-obj docutils literal notranslate"><span class="pre">sonos.client.internal.SonosZoneComponent</span></code>,
<code class="xref py py-obj docutils literal notranslate"><span class="pre">AmpctlState</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">AmpctlState</span></code>)</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="pytest_automation.syssw.ampctl.test_ampctl_states.test_clear_error_state">
<code class="descclassname">pytest_automation.syssw.ampctl.test_ampctl_states.</code><code class="descname">test_clear_error_state</code><span class="sig-paren">(</span><em>non_error_to_error_state_transition_case</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pytest_automation/syssw/ampctl/test_ampctl_states.html#test_clear_error_state"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pytest_automation.syssw.ampctl.test_ampctl_states.test_clear_error_state" title="Permalink to this definition">¶</a></dt>
<dd><p>Tests all ampctl state transitions supported by a device that
start in a non-error state and transition to an error state
(fault or error). After the transition is verified, the error state
is cleared and the device’s post error state is verified because
it is dependent on the state the device was in before it reached
an error state. Currently this test does not cover the case of
non-error -&gt; error -&gt; error -&gt; (clear error) -&gt; non-error. This is,
however, inherently verified because the state transitions are
shuffled.</p>
<p>Steps:
1. Put device into start state
2. Verify transition to end state (in this case an error)
3. Clear the error state
4. Verify transition to the expected post-error state</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>non_error_to_error_state_transition_case</strong> (<em>Function scoped fixture</em>) – Parametrized fixture that provides an ampctl device
and start/end states</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="pytest_automation.syssw.ampctl.test_ampctl_states.test_state_transitions">
<code class="descclassname">pytest_automation.syssw.ampctl.test_ampctl_states.</code><code class="descname">test_state_transitions</code><span class="sig-paren">(</span><em>state_transition_case</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pytest_automation/syssw/ampctl/test_ampctl_states.html#test_state_transitions"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pytest_automation.syssw.ampctl.test_ampctl_states.test_state_transitions" title="Permalink to this definition">¶</a></dt>
<dd><p>Tests all ampctl state transition cases supported by a device
except for cases where the start state is an error state and the
end state is a non-error state; these are covered by the
<cite>test_clear_error_state</cite> test case because information about the
state before the error state is needed.</p>
<p>Steps:
1. Put device into start state
2. Verify transition to end state</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>state_transition_case</strong> (<em>Function scoped fixture</em>) – Parametrized fixture that provides
an ampctl device and start/end states</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="pytest_automation.syssw.ampctl.test_ampctl_states.verify_device_in_state">
<code class="descclassname">pytest_automation.syssw.ampctl.test_ampctl_states.</code><code class="descname">verify_device_in_state</code><span class="sig-paren">(</span><em>device</em>, <em>state</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pytest_automation/syssw/ampctl/test_ampctl_states.html#verify_device_in_state"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pytest_automation.syssw.ampctl.test_ampctl_states.verify_device_in_state" title="Permalink to this definition">¶</a></dt>
<dd><p>Verifies a device is in a given state and all expected ampctl
settings match the settings set on the device.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>device</strong> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">sonos.client.internal.SonosZoneComponent</span></code>) – A Sonos Zone Player</li>
<li><strong>state</strong> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">AmpctlState</span></code>) – The state to verify</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="pytest_automation.syssw.ampctl.test_ampctl_states.verify_state_transition">
<code class="descclassname">pytest_automation.syssw.ampctl.test_ampctl_states.</code><code class="descname">verify_state_transition</code><span class="sig-paren">(</span><em>device</em>, <em>start_state</em>, <em>end_state</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pytest_automation/syssw/ampctl/test_ampctl_states.html#verify_state_transition"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pytest_automation.syssw.ampctl.test_ampctl_states.verify_state_transition" title="Permalink to this definition">¶</a></dt>
<dd><p>Verifies a device can transition from a start state to an end state
by putting the device into the start state, verifying, and then putting
the device into an end state and verifying.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>device</strong> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">sonos.client.internal.SonosZoneComponent</span></code>) – A Sonos Zone Player</li>
<li><strong>start_state</strong> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">AmpctlState</span></code>) – The initial state to transition from</li>
<li><strong>end_state</strong> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">AmpctlState</span></code>) – The state to transition to</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-pytest_automation.syssw.ampctl">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-pytest_automation.syssw.ampctl" title="Permalink to this headline">¶</a></h2>
</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">TestCase Documentation</a></h1>








<h3>Navigation</h3>
<p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="audio.html">audio package</a></li>
<li class="toctree-l1"><a class="reference internal" href="cloud.html">cloud package</a></li>
<li class="toctree-l1"><a class="reference internal" href="common.html">common package</a></li>
<li class="toctree-l1"><a class="reference internal" href="data_reporting.html">data_reporting package</a></li>
<li class="toctree-l1"><a class="reference internal" href="dataio.html">dataio package</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples.html">examples package</a></li>
<li class="toctree-l1"><a class="reference internal" href="hdmi.html">hdmi package</a></li>
<li class="toctree-l1"><a class="reference internal" href="ixchariot.html">ixchariot package</a></li>
<li class="toctree-l1"><a class="reference internal" href="networking.html">networking package</a></li>
<li class="toctree-l1"><a class="reference internal" href="other.html">other package</a></li>
<li class="toctree-l1"><a class="reference internal" href="perf.html">perf package</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="pytest_automation.html">pytest_automation package</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="pytest_automation.html#subpackages">Subpackages</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="pytest_automation.integration.html">pytest_automation.integration package</a></li>
<li class="toctree-l3"><a class="reference internal" href="pytest_automation.networking.html">pytest_automation.networking package</a></li>
<li class="toctree-l3"><a class="reference internal" href="pytest_automation.performance.html">pytest_automation.performance package</a></li>
<li class="toctree-l3"><a class="reference internal" href="pytest_automation.player.html">pytest_automation.player package</a></li>
<li class="toctree-l3"><a class="reference internal" href="pytest_automation.plugins.html">pytest_automation.plugins package</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="pytest_automation.syssw.html">pytest_automation.syssw package</a><ul class="current">
<li class="toctree-l4 current"><a class="reference internal" href="pytest_automation.syssw.html#subpackages">Subpackages</a></li>
<li class="toctree-l4"><a class="reference internal" href="pytest_automation.syssw.html#submodules">Submodules</a></li>
<li class="toctree-l4"><a class="reference internal" href="pytest_automation.syssw.html#module-pytest_automation.syssw.common">pytest_automation.syssw.common module</a></li>
<li class="toctree-l4"><a class="reference internal" href="pytest_automation.syssw.html#module-pytest_automation.syssw.conftest">pytest_automation.syssw.conftest module</a></li>
<li class="toctree-l4"><a class="reference internal" href="pytest_automation.syssw.html#module-pytest_automation.syssw.test_amp_hal">pytest_automation.syssw.test_amp_hal module</a></li>
<li class="toctree-l4"><a class="reference internal" href="pytest_automation.syssw.html#module-pytest_automation.syssw.test_cpu_freq">pytest_automation.syssw.test_cpu_freq module</a></li>
<li class="toctree-l4"><a class="reference internal" href="pytest_automation.syssw.html#module-pytest_automation.syssw.test_mic_state">pytest_automation.syssw.test_mic_state module</a></li>
<li class="toctree-l4"><a class="reference internal" href="pytest_automation.syssw.html#module-pytest_automation.syssw.test_module_load">pytest_automation.syssw.test_module_load module</a></li>
<li class="toctree-l4"><a class="reference internal" href="pytest_automation.syssw.html#module-pytest_automation.syssw.test_neptune_output_sync">pytest_automation.syssw.test_neptune_output_sync module</a></li>
<li class="toctree-l4"><a class="reference internal" href="pytest_automation.syssw.html#module-pytest_automation.syssw">Module contents</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="pytest_automation.html#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="pytest_automation.html#module-pytest_automation.conftest">pytest_automation.conftest module</a></li>
<li class="toctree-l2"><a class="reference internal" href="pytest_automation.html#module-pytest_automation.pytest_sonos_device_selection">pytest_automation.pytest_sonos_device_selection module</a></li>
<li class="toctree-l2"><a class="reference internal" href="pytest_automation.html#module-pytest_automation.pytest_sonos_json_report">pytest_automation.pytest_sonos_json_report module</a></li>
<li class="toctree-l2"><a class="reference internal" href="pytest_automation.html#module-pytest_automation.pytest_sonos_runlevels">pytest_automation.pytest_sonos_runlevels module</a></li>
<li class="toctree-l2"><a class="reference internal" href="pytest_automation.html#module-pytest_automation.pytest_sonos_testbed">pytest_automation.pytest_sonos_testbed module</a></li>
<li class="toctree-l2"><a class="reference internal" href="pytest_automation.html#module-pytest_automation.pytest_sonos_wireless_testbed">pytest_automation.pytest_sonos_wireless_testbed module</a></li>
<li class="toctree-l2"><a class="reference internal" href="pytest_automation.html#module-pytest_automation">Module contents</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="secure_registration.html">secure_registration package</a></li>
<li class="toctree-l1"><a class="reference internal" href="syssw.html">syssw package</a></li>
<li class="toctree-l1"><a class="reference internal" href="upnp.html">upnp package</a></li>
<li class="toctree-l1"><a class="reference internal" href="voice.html">voice package</a></li>
<li class="toctree-l1"><a class="reference internal" href="webserver.html">webserver package</a></li>
<li class="toctree-l1"><a class="reference internal" href="webserver_v0.html">webserver_v0 package</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
  <li><a href="pytest_automation.html">pytest_automation package</a><ul>
  <li><a href="pytest_automation.syssw.html">pytest_automation.syssw package</a><ul>
      <li>Previous: <a href="pytest_automation.syssw.html" title="previous chapter">pytest_automation.syssw package</a></li>
      <li>Next: <a href="pytest_automation.syssw.cap_touch.html" title="next chapter">pytest_automation.syssw.cap_touch package</a></li>
  </ul></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2019, Author.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.8.5</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/pytest_automation.syssw.ampctl.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>
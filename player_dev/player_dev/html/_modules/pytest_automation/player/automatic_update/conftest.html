
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>pytest_automation.player.automatic_update.conftest &#8212; TestCase Documentation  documentation</title>
    <link rel="stylesheet" href="../../../../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../../../../" src="../../../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../../../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" />
   
  <link rel="stylesheet" href="../../../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <h1>Source code for pytest_automation.player.automatic_update.conftest</h1><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">pytest</span>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">import</span> <span class="nn">webserver.helpers.muse_api_helpers</span>
<span class="kn">from</span> <span class="nn">sleep</span> <span class="k">import</span> <span class="n">guaranteed_sleep</span>
<span class="kn">from</span> <span class="nn">sonos.services.common</span> <span class="k">import</span> <span class="n">wait_until_true</span>
<span class="kn">from</span> <span class="nn">pytest_automation.player.common</span> <span class="k">import</span> <span class="n">get_scoped_oauth_token</span>
<span class="kn">from</span> <span class="nn">sonos.cloud.oauth_server</span> <span class="k">import</span> <span class="n">Scopes</span>
<span class="kn">from</span> <span class="nn">wifi.access_point.access_point_manager</span> <span class="k">import</span> <span class="n">NetworkManager</span>
<span class="kn">from</span> <span class="nn">sonos.client.zone_player</span> \
    <span class="kn">import</span> <span class="nn">ZP80</span><span class="o">,</span> <span class="nn">ZP90</span><span class="o">,</span> <span class="nn">ZP100</span><span class="o">,</span> <span class="nn">ZP120</span><span class="o">,</span> <span class="nn">S1</span><span class="o">,</span> <span class="nn">S3</span><span class="o">,</span> <span class="nn">S5</span><span class="o">,</span> <span class="nn">S6</span><span class="o">,</span> <span class="nn">S9</span><span class="o">,</span> <span class="nn">S11</span><span class="o">,</span> <span class="nn">S12</span><span class="o">,</span> <span class="nn">SUB</span> \
    <span class="k">as</span> <span class="n">otis_supported_players</span>

<span class="n">BATTERY_TEST_BINARY</span> <span class="o">=</span> <span class="s2">&quot;battery-test&quot;</span>
<span class="n">BATTERY_TEST_PLATFORMS</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;dhuez&quot;</span><span class="p">]</span>
<span class="n">BATTERY_TEST_ARCHIVE_PATH</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;syslib/tools/hal-battery-test/dhuez-release/&quot;</span> <span class="o">+</span> <span class="n">BATTERY_TEST_BINARY</span><span class="p">:</span>
    <span class="n">BATTERY_TEST_BINARY</span><span class="p">}</span>
<span class="n">BATTERY_TEST_PLAYER_PATH</span> <span class="o">=</span> <span class="s2">&quot;/jffs/&quot;</span> <span class="o">+</span> <span class="n">BATTERY_TEST_BINARY</span>
<span class="n">DEFAULT_HT_AUTOSTOP_THRESHOLD_SECS</span> <span class="o">=</span> <span class="mi">20</span>
<span class="n">UPGRADE_MANAGER_ELECTION_PROPIGATE_SECS</span> <span class="o">=</span> <span class="mi">5</span>
<span class="n">endpoint_key</span> <span class="o">=</span> <span class="s1">&#39;autoUpdatesEnabled&#39;</span>
<span class="n">endpoint_url</span> <span class="o">=</span> <span class="s1">&#39;https://</span><span class="si">{}</span><span class="s1">:</span><span class="si">{}</span><span class="s1">/api/v1/households/local/settings/restricted&#39;</span>
<span class="n">muse_helper</span> <span class="o">=</span> <span class="n">webserver</span><span class="o">.</span><span class="n">helpers</span><span class="o">.</span><span class="n">muse_api_helpers</span><span class="o">.</span><span class="n">MuseApiHelpers</span><span class="p">()</span>
<span class="n">hh_config_oauth_token</span> <span class="o">=</span> <span class="n">get_scoped_oauth_token</span><span class="p">(</span><span class="n">Scopes</span><span class="o">.</span><span class="n">AS_HH_CONFIG</span><span class="p">)</span>
<span class="n">otis_url</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;http://builds.sonos.com/archives/otis/published/&#39;</span>
            <span class="s1">&#39;35.3-39151-v7.2-Otis-GA-1/RELEASEALL/^35.3-39010&#39;</span><span class="p">)</span>


<div class="viewcode-block" id="sqatools_spec"><a class="viewcode-back" href="../../../../pytest_automation.player.automatic_update.html#pytest_automation.player.automatic_update.conftest.sqatools_spec">[docs]</a><span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span><span class="p">(</span><span class="n">scope</span><span class="o">=</span><span class="s2">&quot;session&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">sqatools_spec</span><span class="p">(</span><span class="n">sqatools_spec</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Overrides base sqatools_spec fixture to update archive and platform info</span>

<span class="sd">    :param sqatools_spec: Base fixture</span>
<span class="sd">    :return sqatools_spec</span>
<span class="sd">    :rtype: :obj:`dict`</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">sqatools_spec</span><span class="o">.</span><span class="n">update</span><span class="p">(</span>
        <span class="p">{</span><span class="s2">&quot;archive_files&quot;</span><span class="p">:</span> <span class="n">BATTERY_TEST_ARCHIVE_PATH</span><span class="p">,</span>
         <span class="s2">&quot;platform&quot;</span><span class="p">:</span> <span class="n">BATTERY_TEST_PLATFORMS</span><span class="p">})</span>
    <span class="k">return</span> <span class="n">sqatools_spec</span></div>


<div class="viewcode-block" id="download_and_install_battery_test_tool"><a class="viewcode-back" href="../../../../pytest_automation.player.automatic_update.html#pytest_automation.player.automatic_update.conftest.download_and_install_battery_test_tool">[docs]</a><span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span><span class="p">(</span><span class="n">scope</span><span class="o">=</span><span class="s2">&quot;session&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">download_and_install_battery_test_tool</span><span class="p">(</span><span class="n">unique_portable_device</span><span class="p">,</span>
                                           <span class="n">download_extract_and_host_archive</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Download and installs the battery-test binary from sqa-tools onto a player</span>

<span class="sd">    :param unique_portable_device: Sonos Zone Component</span>
<span class="sd">    :param download_extract_and_host_archive: sqa-tools fixture</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">urls</span> <span class="o">=</span> <span class="n">download_extract_and_host_archive</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">urls</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;Missing </span><span class="si">{}</span><span class="s2"> in archive&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">BATTERY_TEST_BINARY</span><span class="p">)</span>
    <span class="n">unique_portable_device</span><span class="o">.</span><span class="n">cli</span><span class="o">.</span><span class="n">command</span><span class="p">(</span><span class="s1">&#39;wget -O </span><span class="si">{}</span><span class="s1"> </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
        <span class="n">BATTERY_TEST_PLAYER_PATH</span><span class="p">,</span> <span class="n">urls</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
    <span class="k">assert</span> <span class="n">unique_portable_device</span><span class="o">.</span><span class="n">cli</span><span class="o">.</span><span class="n">does_file_exist</span><span class="p">(</span>
        <span class="n">BATTERY_TEST_PLAYER_PATH</span><span class="p">),</span> \
        <span class="s2">&quot;Installation of </span><span class="si">{}</span><span class="s2"> from </span><span class="si">{}</span><span class="s2"> failed on &lt;</span><span class="si">{}</span><span class="s2">&gt;&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="n">BATTERY_TEST_PLAYER_PATH</span><span class="p">,</span> <span class="n">urls</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">unique_portable_device</span><span class="p">)</span>
    <span class="n">unique_portable_device</span><span class="o">.</span><span class="n">cli</span><span class="o">.</span><span class="n">command</span><span class="p">(</span><span class="s2">&quot;chmod +x </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
        <span class="n">BATTERY_TEST_PLAYER_PATH</span><span class="p">))</span>
    <span class="k">yield</span>
    <span class="n">unique_portable_device</span><span class="o">.</span><span class="n">cli</span><span class="o">.</span><span class="n">command</span><span class="p">(</span><span class="s2">&quot;rm -f </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
        <span class="n">BATTERY_TEST_PLAYER_PATH</span><span class="p">))</span></div>


<div class="viewcode-block" id="enable_automatic_updates"><a class="viewcode-back" href="../../../../pytest_automation.player.automatic_update.html#pytest_automation.player.automatic_update.conftest.enable_automatic_updates">[docs]</a><span class="k">def</span> <span class="nf">enable_automatic_updates</span><span class="p">(</span><span class="n">zp</span><span class="p">,</span> <span class="n">url</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Enable automatic updates on testbed</span>
<span class="sd">    Set update policy to forced</span>

<span class="sd">    :param zp: Sonos Zone Component</span>
<span class="sd">    :param url: Update URL fixture</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">resp</span> <span class="o">=</span> <span class="n">muse_helper</span><span class="o">.</span><span class="n">hit_rest_endpoint</span><span class="p">(</span>
        <span class="n">zp</span><span class="o">=</span><span class="n">zp</span><span class="p">,</span>
        <span class="n">is_secure</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">token</span><span class="o">=</span><span class="n">hh_config_oauth_token</span><span class="p">,</span>
        <span class="n">req_url_stub</span><span class="o">=</span><span class="n">endpoint_url</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">zp</span><span class="o">.</span><span class="n">ip</span><span class="p">,</span> <span class="n">zp</span><span class="o">.</span><span class="n">ssl_port</span><span class="p">),</span>
        <span class="n">rest_endpoint</span><span class="o">=</span><span class="n">endpoint_key</span><span class="p">,</span>
        <span class="n">req_data</span><span class="o">=</span><span class="s1">&#39;true&#39;</span><span class="p">,</span>
        <span class="n">req_method</span><span class="o">=</span><span class="s1">&#39;POST&#39;</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">resp</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="n">requests</span><span class="o">.</span><span class="n">codes</span><span class="o">.</span><span class="n">ok</span><span class="p">,</span> \
        <span class="s2">&quot;Error enabling auto updates&quot;</span>
    <span class="n">zp</span><span class="o">.</span><span class="n">SystemProperties</span><span class="o">.</span><span class="n">set_automatic_update_policy</span><span class="p">(</span><span class="s1">&#39;forced&#39;</span><span class="p">)</span>
    <span class="n">zp</span><span class="o">.</span><span class="n">SystemProperties</span><span class="o">.</span><span class="n">SetString</span><span class="p">(</span><span class="s1">&#39;OnlineUpdateBaseURL&#39;</span><span class="p">,</span> <span class="n">url</span><span class="p">)</span></div>


<div class="viewcode-block" id="disable_automatic_updates"><a class="viewcode-back" href="../../../../pytest_automation.player.automatic_update.html#pytest_automation.player.automatic_update.conftest.disable_automatic_updates">[docs]</a><span class="k">def</span> <span class="nf">disable_automatic_updates</span><span class="p">(</span><span class="n">zp</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Disable automatic updates on testbed</span>
<span class="sd">    Remove update policy</span>

<span class="sd">    :param zp: Sonos Zone Component</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">resp</span> <span class="o">=</span> <span class="n">muse_helper</span><span class="o">.</span><span class="n">hit_rest_endpoint</span><span class="p">(</span>
        <span class="n">zp</span><span class="o">=</span><span class="n">zp</span><span class="p">,</span>
        <span class="n">is_secure</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">token</span><span class="o">=</span><span class="n">hh_config_oauth_token</span><span class="p">,</span>
        <span class="n">req_url_stub</span><span class="o">=</span><span class="n">endpoint_url</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">zp</span><span class="o">.</span><span class="n">ip</span><span class="p">,</span> <span class="n">zp</span><span class="o">.</span><span class="n">ssl_port</span><span class="p">),</span>
        <span class="n">rest_endpoint</span><span class="o">=</span><span class="n">endpoint_key</span><span class="p">,</span>
        <span class="n">req_data</span><span class="o">=</span><span class="s1">&#39;false&#39;</span><span class="p">,</span>
        <span class="n">req_method</span><span class="o">=</span><span class="s1">&#39;POST&#39;</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">resp</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="n">requests</span><span class="o">.</span><span class="n">codes</span><span class="o">.</span><span class="n">ok</span><span class="p">,</span> \
        <span class="s2">&quot;Error disabling auto updates&quot;</span>
    <span class="n">zp</span><span class="o">.</span><span class="n">SystemProperties</span><span class="o">.</span><span class="n">set_automatic_update_policy</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>
    <span class="n">zp</span><span class="o">.</span><span class="n">SystemProperties</span><span class="o">.</span><span class="n">Remove</span><span class="p">(</span><span class="s1">&#39;OnlineUpdateBaseURL&#39;</span><span class="p">)</span></div>


<div class="viewcode-block" id="delete_alarms"><a class="viewcode-back" href="../../../../pytest_automation.player.automatic_update.html#pytest_automation.player.automatic_update.conftest.delete_alarms">[docs]</a><span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span><span class="p">(</span><span class="n">scope</span><span class="o">=</span><span class="s2">&quot;function&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">delete_alarms</span><span class="p">(</span><span class="n">automatic_upgrade_manager_device</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Delete all alarms from player</span>

<span class="sd">    :param automatic_upgrade_manager_device: Sonos Zone Component</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">mgr</span> <span class="o">=</span> <span class="n">automatic_upgrade_manager_device</span>
    <span class="k">yield</span>
    <span class="k">for</span> <span class="n">alarm</span> <span class="ow">in</span> <span class="n">mgr</span><span class="o">.</span><span class="n">AlarmClock</span><span class="o">.</span><span class="n">ListAlarms</span><span class="p">()[</span><span class="s1">&#39;CurrentAlarmList&#39;</span><span class="p">]:</span>
        <span class="n">alarm_id</span> <span class="o">=</span> <span class="n">alarm</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;ID&#39;</span><span class="p">)</span>
        <span class="n">pytest</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Deleting alarm id </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">alarm_id</span><span class="p">))</span>
        <span class="k">assert</span> <span class="n">mgr</span><span class="o">.</span><span class="n">AlarmClock</span><span class="o">.</span><span class="n">DestroyAlarm</span><span class="p">(</span><span class="n">alarm_id</span><span class="p">),</span> \
            <span class="s2">&quot;Failed to delete alarm id </span><span class="si">{}</span><span class="s2"> on </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">alarm_id</span><span class="p">,</span> <span class="n">mgr</span><span class="o">.</span><span class="n">raw_udn</span><span class="p">)</span></div>


<div class="viewcode-block" id="automatic_upgrade_manager_device"><a class="viewcode-back" href="../../../../pytest_automation.player.automatic_update.html#pytest_automation.player.automatic_update.conftest.automatic_upgrade_manager_device">[docs]</a><span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span><span class="p">(</span><span class="n">scope</span><span class="o">=</span><span class="s2">&quot;session&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">automatic_upgrade_manager_device</span><span class="p">(</span><span class="n">all_devices</span><span class="p">,</span> <span class="n">update_url</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Yield the update manager device from</span>
<span class="sd">    :func:`~pytest_automation.pytest_sonos_device_selection.all_devices`, with</span>
<span class="sd">    automatic updates to :func:`~pytest_automation.conftest.update_url` enabled</span>
<span class="sd">    for the household.</span>
<span class="sd">    :return: SonosZoneComponent</span>
<span class="sd">    :rtype: :class:`~sonos.client.internal.SonosZoneComponent`</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">attempts</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">manager_devices</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">while</span> <span class="nb">len</span><span class="p">(</span><span class="n">manager_devices</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">attempts</span> <span class="o">&lt;</span> <span class="mi">5</span><span class="p">:</span>
        <span class="n">manager_devices</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">device</span> <span class="ow">in</span> <span class="n">all_devices</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">device</span><span class="o">.</span><span class="n">diag</span><span class="o">.</span><span class="n">get_auto_update_settings</span><span class="p">()[</span><span class="s1">&#39;manager&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;true&#39;</span><span class="p">:</span>
                <span class="n">manager_devices</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">device</span><span class="p">)</span>
        <span class="n">attempts</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="n">guaranteed_sleep</span><span class="p">(</span><span class="n">UPGRADE_MANAGER_ELECTION_PROPIGATE_SECS</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">manager_devices</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Upgrade manager device election not complete.</span><span class="se">\n</span><span class="s2">&quot;</span>
                        <span class="s2">&quot;Multiple upgrade manager devices found: </span><span class="si">{}</span><span class="s2">&quot;</span>
                        <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">manager_devices</span><span class="p">))</span>
    <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">manager_devices</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;No upgrade manager device found in testbed&quot;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">zp</span> <span class="o">=</span> <span class="n">manager_devices</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">enable_automatic_updates</span><span class="p">(</span><span class="n">zp</span><span class="p">,</span> <span class="n">update_url</span><span class="p">)</span>
        <span class="k">yield</span> <span class="n">zp</span>
        <span class="n">disable_automatic_updates</span><span class="p">(</span><span class="n">zp</span><span class="p">)</span></div>


<div class="viewcode-block" id="automatic_upgrade_client_devices"><a class="viewcode-back" href="../../../../pytest_automation.player.automatic_update.html#pytest_automation.player.automatic_update.conftest.automatic_upgrade_client_devices">[docs]</a><span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span><span class="p">(</span><span class="n">scope</span><span class="o">=</span><span class="s2">&quot;function&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">automatic_upgrade_client_devices</span><span class="p">(</span><span class="n">all_devices</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns the automatic update client devices from</span>
<span class="sd">    :func:`~pytest_automation.pytest_sonos_device_selection.all_devices`, and</span>
<span class="sd">    bonds a Sub to one player.</span>

<span class="sd">    :return: list of SonosZoneComponents</span>
<span class="sd">    :rtype: :obj:`list` of :class:`~sonos.client.internal.SonosZoneComponent`</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">devices</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">available_sub</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">device</span> <span class="ow">in</span> <span class="n">all_devices</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">device</span><span class="o">.</span><span class="n">is_sub</span><span class="p">():</span>
            <span class="n">available_sub</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">device</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">device</span><span class="o">.</span><span class="n">diag</span><span class="o">.</span><span class="n">get_auto_update_settings</span><span class="p">()[</span><span class="s1">&#39;manager&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;false&#39;</span> \
                <span class="ow">and</span> <span class="n">device</span><span class="o">.</span><span class="n">is_playback_device</span><span class="p">():</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">available_sub</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">device</span><span class="o">.</span><span class="n">DeviceProperties</span><span class="o">.</span><span class="n">add_bonded_sub_to_this_device</span><span class="p">(</span>
                    <span class="n">available_sub</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
            <span class="n">devices</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">device</span><span class="p">)</span>
    <span class="k">yield</span> <span class="n">devices</span>
    <span class="k">for</span> <span class="n">device</span> <span class="ow">in</span> <span class="n">all_devices</span><span class="p">:</span>
        <span class="n">device</span><span class="o">.</span><span class="n">DeviceProperties</span><span class="o">.</span><span class="n">cleanup_bonded_configuration</span><span class="p">()</span></div>


<div class="viewcode-block" id="automatic_upgrade_client_devices_with_stereo_pairs"><a class="viewcode-back" href="../../../../pytest_automation.player.automatic_update.html#pytest_automation.player.automatic_update.conftest.automatic_upgrade_client_devices_with_stereo_pairs">[docs]</a><span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span><span class="p">(</span><span class="n">scope</span><span class="o">=</span><span class="s2">&quot;function&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">automatic_upgrade_client_devices_with_stereo_pairs</span><span class="p">(</span>
        <span class="n">all_stereo_pairable_devices</span><span class="p">,</span> <span class="n">automatic_upgrade_client_devices</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns the automatic update client devices from</span>
<span class="sd">    :func:`~pytest_automation.pytest_sonos_device_selection.all_devices`,</span>
<span class="sd">    with as many devices as possible stereo paired, and bonds a Sub with one</span>
<span class="sd">    pair.</span>

<span class="sd">    :return: list of SonosZoneComponents</span>
<span class="sd">    :rtype: :obj:`list` of :class:`~sonos.client.internal.SonosZoneComponent`</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">devices</span> <span class="o">=</span> <span class="n">automatic_upgrade_client_devices</span>
    <span class="n">sub</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="c1"># If we have a Sub bonded to a zone already we need to remove it, and then</span>
    <span class="c1"># rebond it at the same time as when we create the stereo pair</span>
    <span class="k">for</span> <span class="n">device</span> <span class="ow">in</span> <span class="n">devices</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">device</span><span class="o">.</span><span class="n">is_bonded</span><span class="p">():</span>
            <span class="n">sub</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">device</span><span class="o">.</span><span class="n">get_bonded_zones</span><span class="p">()[</span><span class="s1">&#39;SW,SW&#39;</span><span class="p">])</span>
            <span class="n">device</span><span class="o">.</span><span class="n">DeviceProperties</span><span class="o">.</span><span class="n">cleanup_bonded_configuration</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">left</span><span class="p">,</span> <span class="n">right</span> <span class="ow">in</span> <span class="n">all_stereo_pairable_devices</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">left</span><span class="o">.</span><span class="n">is_in_stereo_pair</span><span class="p">()</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">right</span><span class="o">.</span><span class="n">is_in_stereo_pair</span><span class="p">():</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">sub</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">left</span><span class="o">.</span><span class="n">DeviceProperties</span><span class="o">.</span><span class="n">add_stereo_pair</span><span class="p">(</span><span class="n">right</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">left</span><span class="o">.</span><span class="n">DeviceProperties</span><span class="o">.</span><span class="n">add_stereo_bonded_zone_sub_to_this_device</span><span class="p">(</span>
                    <span class="n">right</span><span class="p">,</span> <span class="n">sub</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
            <span class="k">if</span> <span class="n">right</span> <span class="ow">in</span> <span class="n">devices</span><span class="p">:</span>
                <span class="n">devices</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">right</span><span class="p">)</span>
    <span class="k">yield</span> <span class="n">devices</span>
    <span class="k">for</span> <span class="n">left</span><span class="p">,</span> <span class="n">right</span> <span class="ow">in</span> <span class="n">all_stereo_pairable_devices</span><span class="p">:</span>
        <span class="n">left</span><span class="o">.</span><span class="n">DeviceProperties</span><span class="o">.</span><span class="n">cleanup_bonded_configuration</span><span class="p">()</span></div>


<div class="viewcode-block" id="automatic_upgrade_client_devices_with_ht_51"><a class="viewcode-back" href="../../../../pytest_automation.player.automatic_update.html#pytest_automation.player.automatic_update.conftest.automatic_upgrade_client_devices_with_ht_51">[docs]</a><span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span><span class="p">(</span><span class="n">scope</span><span class="o">=</span><span class="s2">&quot;function&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">automatic_upgrade_client_devices_with_ht_51</span><span class="p">(</span>
        <span class="n">all_ht_51_config_devices</span><span class="p">,</span> <span class="n">automatic_upgrade_client_devices</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns the automatic update client devices from</span>
<span class="sd">    :func:`~pytest_automation.pytest_sonos_device_selection.all_devices`,</span>
<span class="sd">    including a ht master with satellites and a Sub.</span>

<span class="sd">    :return: list of SonosZoneComponents</span>
<span class="sd">    :rtype: :obj:`list` of :class:`~sonos.client.internal.SonosZoneComponent`</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">devices</span> <span class="o">=</span> <span class="n">automatic_upgrade_client_devices</span>
    <span class="n">master</span><span class="p">,</span> <span class="n">left</span><span class="p">,</span> <span class="n">right</span><span class="p">,</span> <span class="n">sub</span> <span class="o">=</span> <span class="n">all_ht_51_config_devices</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">sub</span><span class="o">.</span><span class="n">DeviceProperties</span><span class="o">.</span><span class="n">cleanup_bonded_configuration</span><span class="p">()</span>
    <span class="n">master</span><span class="o">.</span><span class="n">DeviceProperties</span><span class="o">.</span><span class="n">create_51_config</span><span class="p">(</span><span class="n">sub</span><span class="p">,</span> <span class="n">left</span><span class="p">,</span> <span class="n">right</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">left</span> <span class="ow">in</span> <span class="n">devices</span><span class="p">:</span>
        <span class="n">devices</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">left</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">right</span> <span class="ow">in</span> <span class="n">devices</span><span class="p">:</span>
        <span class="n">devices</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">right</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">sub</span> <span class="ow">in</span> <span class="n">devices</span><span class="p">:</span>
        <span class="n">devices</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">sub</span><span class="p">)</span>
    <span class="k">yield</span> <span class="n">devices</span>
    <span class="n">master</span><span class="o">.</span><span class="n">DeviceProperties</span><span class="o">.</span><span class="n">cleanup_bonded_configuration</span><span class="p">()</span></div>


<div class="viewcode-block" id="a_ht_master_capable_device_with_autostop"><a class="viewcode-back" href="../../../../pytest_automation.player.automatic_update.html#pytest_automation.player.automatic_update.conftest.a_ht_master_capable_device_with_autostop">[docs]</a><span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span><span class="p">(</span><span class="n">scope</span><span class="o">=</span><span class="s2">&quot;session&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">a_ht_master_capable_device_with_autostop</span><span class="p">(</span><span class="n">all_ht_master_capable_devices</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Override the HT autostop threshold for</span>
<span class="sd">    :func:`~pytest_automation.pytest_sonos_device_selection.all_ht_master_capable_devices`</span>
<span class="sd">    in this testbed, then return a single device. Even though only a single</span>
<span class="sd">    device is needed by the test, all ht devices need to be idle in order for</span>
<span class="sd">    automatic updates to run. So they all need their auto stop threshold set</span>
<span class="sd">    and autoplay disabled. After all tests that depend on this fixture have</span>
<span class="sd">    run, the override will be reverted.</span>

<span class="sd">    :return: HT master SonosZoneComponent</span>
<span class="sd">    :rtype: :class:`~sonos.client.internal.SonosZoneComponent`</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">ht_master</span> <span class="ow">in</span> <span class="n">all_ht_master_capable_devices</span><span class="p">:</span>
        <span class="n">ht_master</span><span class="o">.</span><span class="n">DeviceProperties</span><span class="o">.</span><span class="n">SetAutoplayRoomUUID</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
        <span class="n">ht_master</span><span class="o">.</span><span class="n">cli</span><span class="o">.</span><span class="n">set_ht_autostop_threshold</span><span class="p">(</span>
            <span class="n">DEFAULT_HT_AUTOSTOP_THRESHOLD_SECS</span><span class="p">)</span>
        <span class="n">ht_master</span><span class="o">.</span><span class="n">wait_for_upnp_alive</span><span class="p">()</span>
        <span class="n">wait_until_true</span><span class="p">(</span>
            <span class="k">lambda</span><span class="p">:</span> <span class="n">ht_master</span><span class="o">.</span><span class="n">is_anacapa_running</span><span class="p">(),</span>
            <span class="n">reason</span><span class="o">=</span><span class="s2">&quot;Timeout waiting for anacapa to become ready on </span><span class="si">{}</span><span class="s2">&quot;</span>
            <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ht_master</span><span class="o">.</span><span class="n">raw_udn</span><span class="p">))</span>
    <span class="k">yield</span> <span class="n">all_ht_master_capable_devices</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="k">for</span> <span class="n">ht_master</span> <span class="ow">in</span> <span class="n">all_ht_master_capable_devices</span><span class="p">:</span>
        <span class="n">ht_master</span><span class="o">.</span><span class="n">DeviceProperties</span><span class="o">.</span><span class="n">SetAutoplayRoomUUID</span><span class="p">(</span><span class="n">ht_master</span><span class="o">.</span><span class="n">raw_udn</span><span class="p">)</span>
        <span class="n">ht_master</span><span class="o">.</span><span class="n">cli</span><span class="o">.</span><span class="n">set_ht_autostop_threshold</span><span class="p">()</span>
        <span class="n">ht_master</span><span class="o">.</span><span class="n">wait_for_upnp_alive</span><span class="p">()</span>
        <span class="n">wait_until_true</span><span class="p">(</span>
            <span class="k">lambda</span><span class="p">:</span> <span class="n">ht_master</span><span class="o">.</span><span class="n">is_anacapa_running</span><span class="p">(),</span>
            <span class="n">reason</span><span class="o">=</span><span class="s2">&quot;Timeout waiting for anacapa to become ready on </span><span class="si">{}</span><span class="s2">&quot;</span>
            <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ht_master</span><span class="o">.</span><span class="n">raw_udn</span><span class="p">))</span></div>


<div class="viewcode-block" id="update_base_url"><a class="viewcode-back" href="../../../../pytest_automation.player.automatic_update.html#pytest_automation.player.automatic_update.conftest.update_base_url">[docs]</a><span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span><span class="p">(</span><span class="n">scope</span><span class="o">=</span><span class="s2">&quot;session&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">update_base_url</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Override fixture that generates a URL which Sonos devices can use to</span>
<span class="sd">    update to target firmware.</span>

<span class="sd">    :return: A new URL composed of the &#39;update_url&#39; and &#39;version_number&#39;.</span>
<span class="sd">    :rtype: :obj:`str`</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">otis_url</span></div>


<div class="viewcode-block" id="a_device_on_a_pre_milestone_version"><a class="viewcode-back" href="../../../../pytest_automation.player.automatic_update.html#pytest_automation.player.automatic_update.conftest.a_device_on_a_pre_milestone_version">[docs]</a><span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span><span class="p">(</span><span class="n">scope</span><span class="o">=</span><span class="s2">&quot;module&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">a_device_on_a_pre_milestone_version</span><span class="p">(</span><span class="n">all_devices</span><span class="p">,</span> <span class="n">firmware_updater</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns a device from</span>
<span class="sd">    :func:`~pytest_automation.pytest_sonos_device_selection.all_devices` on a</span>
<span class="sd">    pre-milestone software version using the</span>
<span class="sd">    :func:`~pytest_automation.conftest.firmware_updater`, in this case Otis.</span>

<span class="sd">    :return: A single device on Otis firmware</span>
<span class="sd">    :rtype: :class:`~sonos.client.internal.SonosZoneComponent`</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">device</span> <span class="ow">in</span> <span class="n">all_devices</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">device</span><span class="o">.</span><span class="n">modelNumber</span> <span class="ow">in</span> <span class="n">otis_supported_players</span> \
                <span class="ow">and</span> <span class="n">device</span><span class="o">.</span><span class="n">diag</span><span class="o">.</span><span class="n">get_auto_update_settings</span><span class="p">()[</span><span class="s1">&#39;manager&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;false&#39;</span><span class="p">:</span>
            <span class="n">firmware_updater</span><span class="p">([</span><span class="n">device</span><span class="p">])</span>
            <span class="n">device</span><span class="o">.</span><span class="n">wait_for_upnp_alive</span><span class="p">()</span>
            <span class="n">wait_until_true</span><span class="p">(</span>
                <span class="k">lambda</span><span class="p">:</span> <span class="n">device</span><span class="o">.</span><span class="n">is_anacapa_running</span><span class="p">(),</span>
                <span class="n">reason</span><span class="o">=</span><span class="s2">&quot;Timeout waiting for anacapa to become ready on </span><span class="si">{}</span><span class="s2">&quot;</span>
                <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">device</span><span class="o">.</span><span class="n">raw_udn</span><span class="p">))</span>
            <span class="k">return</span> <span class="n">device</span></div>


<div class="viewcode-block" id="a_portable_device_in_wifi_mode_with_battery_spoofing"><a class="viewcode-back" href="../../../../pytest_automation.player.automatic_update.html#pytest_automation.player.automatic_update.conftest.a_portable_device_in_wifi_mode_with_battery_spoofing">[docs]</a><span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span><span class="p">(</span><span class="n">scope</span><span class="o">=</span><span class="s2">&quot;function&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">a_portable_device_in_wifi_mode_with_battery_spoofing</span><span class="p">(</span>
        <span class="n">unique_portable_device</span><span class="p">,</span>
        <span class="n">ap</span><span class="p">,</span>
        <span class="n">download_and_install_battery_test_tool</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns a portable_playback_device, in station mode, with the battery-test</span>
<span class="sd">    binary extracted from sqa-tools, and installed. Restores power and Ethernet</span>
<span class="sd">    after test, if either is off.</span>

<span class="sd">    :param unique_portable_device: Portable Sonos Zone Component</span>
<span class="sd">    :param ap: Pytest access point fixture</span>
<span class="sd">    :param download_and_install_battery_test_tool: Fixture for downloading</span>
<span class="sd">        SQATools and installing the battery spoofing binary</span>
<span class="sd">    :return: A single portable player with the battery-test binary installed</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">ntw_manager</span> <span class="o">=</span> <span class="n">NetworkManager</span><span class="p">(</span><span class="n">unique_portable_device</span><span class="p">,</span> <span class="n">ap</span><span class="p">)</span>
    <span class="n">ntw_manager</span><span class="o">.</span><span class="n">setup_player_in_wifi_mode</span><span class="p">()</span>
    <span class="k">yield</span> <span class="n">unique_portable_device</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">unique_portable_device</span><span class="o">.</span><span class="n">power</span><span class="o">.</span><span class="n">is_on</span><span class="p">():</span>
        <span class="n">unique_portable_device</span><span class="o">.</span><span class="n">power</span><span class="o">.</span><span class="n">on</span><span class="p">()</span>
    <span class="n">ntw_manager</span><span class="o">.</span><span class="n">return_player_to_wired_mode</span><span class="p">()</span></div>


<div class="viewcode-block" id="a_standalone_portable_device_in_wifi_mode_with_battery_spoofing"><a class="viewcode-back" href="../../../../pytest_automation.player.automatic_update.html#pytest_automation.player.automatic_update.conftest.a_standalone_portable_device_in_wifi_mode_with_battery_spoofing">[docs]</a><span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span><span class="p">(</span><span class="n">scope</span><span class="o">=</span><span class="s2">&quot;function&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">a_standalone_portable_device_in_wifi_mode_with_battery_spoofing</span><span class="p">(</span>
        <span class="n">all_devices</span><span class="p">,</span>
        <span class="n">a_portable_device_in_wifi_mode_with_battery_spoofing</span><span class="p">,</span>
        <span class="n">update_url</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Stops anacapa on all players in the testbed, except for the portable device</span>
<span class="sd">    under test.</span>

<span class="sd">    Returns a portable_playback_device, in station mode, with the battery-test</span>
<span class="sd">    binary extracted from sqa-tools, and installed. Restores power and Ethernet</span>
<span class="sd">    after test, if either is off.</span>

<span class="sd">    :param all_devices: All SonosZoneComponents in the testbed</span>
<span class="sd">    :param a_portable_device_in_wifi_mode_with_battery_spoofing: Portable</span>
<span class="sd">        SonosZoneComponents</span>
<span class="sd">    :param update_url: Update url parameter</span>
<span class="sd">    :return: A single portable player with the battery-test binary installed</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">test_device</span> <span class="o">=</span> <span class="n">a_portable_device_in_wifi_mode_with_battery_spoofing</span>
    <span class="k">for</span> <span class="n">device</span> <span class="ow">in</span> <span class="n">all_devices</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">device</span> <span class="o">!=</span> <span class="n">test_device</span><span class="p">:</span>
            <span class="n">pytest</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Stopping anacapa on </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">device</span><span class="p">))</span>
            <span class="n">device</span><span class="o">.</span><span class="n">cli</span><span class="o">.</span><span class="n">stop_anacapa_nicely</span><span class="p">()</span>
    <span class="c1"># Wait for our standalone player to become the update manager</span>
    <span class="n">wait_until_true</span><span class="p">(</span>
        <span class="k">lambda</span><span class="p">:</span> <span class="n">test_device</span><span class="o">.</span><span class="n">diag</span><span class="o">.</span><span class="n">get_auto_update_settings</span><span class="p">()[</span><span class="s1">&#39;manager&#39;</span><span class="p">]</span>
        <span class="o">==</span> <span class="s1">&#39;true&#39;</span><span class="p">,</span>
        <span class="n">reason</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">{}</span><span class="s2"> did not become update manager&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">test_device</span><span class="p">))</span>
    <span class="c1"># Enable automatic updates</span>
    <span class="n">enable_automatic_updates</span><span class="p">(</span><span class="n">test_device</span><span class="p">,</span> <span class="n">update_url</span><span class="p">)</span>
    <span class="k">yield</span> <span class="n">test_device</span>
    <span class="k">for</span> <span class="n">device</span> <span class="ow">in</span> <span class="n">all_devices</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">device</span> <span class="o">!=</span> <span class="n">test_device</span><span class="p">:</span>
            <span class="n">pytest</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Starting anacapa on </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">device</span><span class="p">))</span>
            <span class="n">device</span><span class="o">.</span><span class="n">cli</span><span class="o">.</span><span class="n">start_anacapa</span><span class="p">()</span></div>
</pre></div>

          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../../../../index.html">TestCase Documentation</a></h1>








<h3>Navigation</h3>
<p class="caption"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../audio.html">audio package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../cloud.html">cloud package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../common.html">common package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../data_reporting.html">data_reporting package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../dataio.html">dataio package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../examples.html">examples package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../hdmi.html">hdmi package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../ixchariot.html">ixchariot package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../networking.html">networking package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../other.html">other package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../perf.html">perf package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../pytest_automation.html">pytest_automation package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../secure_registration.html">secure_registration package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../syssw.html">syssw package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../upnp.html">upnp package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../voice.html">voice package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../webserver.html">webserver package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../webserver_v0.html">webserver_v0 package</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../../../index.html">Documentation overview</a><ul>
  <li><a href="../../../index.html">Module code</a><ul>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2019, Author.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.8.5</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
    </div>

    

    
  </body>
</html>
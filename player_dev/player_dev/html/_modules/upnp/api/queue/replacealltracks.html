
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>upnp.api.queue.replacealltracks &#8212; TestCase Documentation  documentation</title>
    <link rel="stylesheet" href="../../../../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../../../../" src="../../../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../../../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" />
   
  <link rel="stylesheet" href="../../../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <h1>Source code for upnp.api.queue.replacealltracks</h1><div class="highlight"><pre>
<span></span><span class="c1"># coding: latin-1</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd"> Tests the Queue::ReplaceAllTracks API specifically with the Sonos queue (queue_id=0)</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">from</span> <span class="nn">upnp.functional.queue.queue_test_fixture</span> <span class="k">import</span> <span class="n">BaseQueueTestFixture</span>
<span class="kn">from</span> <span class="nn">sonos.workflow.fixture</span> <span class="k">import</span> <span class="n">combinatorial</span>
<span class="kn">from</span> <span class="nn">sonos.workflow.suite</span> <span class="k">import</span> <span class="n">WorkflowTestSuite</span>
<span class="kn">import</span> <span class="nn">sonos.exception</span>
<span class="kn">import</span> <span class="nn">random</span>
<span class="kn">from</span> <span class="nn">upnp.api.queue.helpers</span> <span class="k">import</span> <span class="n">QueueServiceHelpers</span>
<span class="kn">from</span> <span class="nn">sonos.services.avtransport</span> <span class="k">import</span> <span class="n">AVTransportService</span>
<span class="kn">from</span> <span class="nn">sonos.services.common</span> <span class="k">import</span> <span class="n">wait_until_true</span>
<span class="kn">from</span> <span class="nn">datetime</span> <span class="k">import</span> <span class="n">datetime</span><span class="p">,</span> <span class="n">timedelta</span>

<span class="n">helpers</span> <span class="o">=</span> <span class="n">QueueServiceHelpers</span><span class="p">()</span>

<span class="n">suite</span> <span class="o">=</span> <span class="kc">None</span>
<div class="viewcode-block" id="playable_zone_generator"><a class="viewcode-back" href="../../../../upnp.api.queue.html#upnp.api.queue.replacealltracks.playable_zone_generator">[docs]</a><span class="k">def</span> <span class="nf">playable_zone_generator</span><span class="p">():</span>
    <span class="n">device_models</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">zone</span> <span class="ow">in</span> <span class="nb">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">is_playback_device</span><span class="p">()</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">x</span><span class="o">.</span><span class="n">AVTransport</span><span class="o">.</span><span class="n">is_group_member</span><span class="p">(),</span> <span class="n">suite</span><span class="o">.</span><span class="n">my_devices</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">zone</span><span class="o">.</span><span class="n">modelNumber</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">device_models</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
            <span class="n">device_models</span><span class="p">[</span><span class="n">zone</span><span class="o">.</span><span class="n">modelNumber</span><span class="p">]</span> <span class="o">=</span> <span class="n">zone</span>
    <span class="k">for</span> <span class="n">model</span> <span class="ow">in</span> <span class="n">device_models</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
        <span class="k">yield</span> <span class="n">model</span></div>

<div class="viewcode-block" id="ReplaceAllTracksTests"><a class="viewcode-back" href="../../../../upnp.api.queue.html#upnp.api.queue.replacealltracks.ReplaceAllTracksTests">[docs]</a><span class="k">class</span> <span class="nc">ReplaceAllTracksTests</span><span class="p">(</span><span class="n">BaseQueueTestFixture</span><span class="p">):</span>

    <span class="n">TEST_TYPE</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;NIGHTLY_API_QUEUE&quot;</span><span class="p">]</span>

    <span class="n">zones</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">queue_ids</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">track_list</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">md_list</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">tracks_and_metadata_for_setup</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">two_track_list</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">four_track_list</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">five_track_list</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">six_track_list</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">two_track_md_and_uris</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">four_track_md_and_uris</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">five_track_md_and_uris</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">six_track_md_and_uris</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">limit_track_list</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">limit_track_md_and_uris</span> <span class="o">=</span> <span class="kc">None</span>

<div class="viewcode-block" id="ReplaceAllTracksTests.setUpFixture"><a class="viewcode-back" href="../../../../upnp.api.queue.html#upnp.api.queue.replacealltracks.ReplaceAllTracksTests.setUpFixture">[docs]</a>    <span class="k">def</span> <span class="nf">setUpFixture</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">ReplaceAllTracksTests</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">setUpFixture</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">z</span> <span class="ow">in</span> <span class="nb">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">is_playback_device</span><span class="p">()</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">x</span><span class="o">.</span><span class="n">AVTransport</span><span class="o">.</span><span class="n">is_group_member</span><span class="p">(),</span> <span class="n">suite</span><span class="o">.</span><span class="n">my_devices</span><span class="p">):</span>
            <span class="n">queue_id</span> <span class="o">=</span> <span class="n">z</span><span class="o">.</span><span class="n">Queue</span><span class="o">.</span><span class="n">CreateQueue</span><span class="p">(</span><span class="n">queueownerid</span><span class="o">=</span><span class="n">z</span><span class="o">.</span><span class="n">raw_udn</span><span class="p">,</span> <span class="n">queueownercontext</span><span class="o">=</span><span class="n">z</span><span class="o">.</span><span class="n">modelName</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">queue_ids</span><span class="p">[</span><span class="n">z</span><span class="o">.</span><span class="n">raw_udn</span><span class="p">]</span> <span class="o">=</span> <span class="n">queue_id</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">zones</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">z</span><span class="p">);</span>

        <span class="k">while</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">track_list</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">9</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">track_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">track_source</span><span class="o">.</span><span class="n">tracks</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">3</span><span class="p">]))</span>

        <span class="n">md_list</span> <span class="o">=</span> <span class="n">helpers</span><span class="o">.</span><span class="n">create_didl_lite_md</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">track_list</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tracks_and_metadata_for_setup</span> <span class="o">=</span> <span class="n">helpers</span><span class="o">.</span><span class="n">create_uri_and_metadata_xml</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">track_list</span><span class="p">,</span> <span class="n">md_list</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">two_track_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">track_list</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">track_list</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
        <span class="n">two_track_md</span> <span class="o">=</span> <span class="n">helpers</span><span class="o">.</span><span class="n">create_didl_lite_md</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">two_track_list</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">two_track_md_and_uris</span> <span class="o">=</span> <span class="n">helpers</span><span class="o">.</span><span class="n">create_uri_and_metadata_xml</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">two_track_list</span><span class="p">,</span> <span class="n">two_track_md</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">four_track_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">track_list</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">track_list</span><span class="p">[</span><span class="mi">5</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">track_list</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">track_list</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span>
        <span class="n">four_track_md</span> <span class="o">=</span> <span class="n">helpers</span><span class="o">.</span><span class="n">create_didl_lite_md</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">four_track_list</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">four_track_md_and_uris</span> <span class="o">=</span> <span class="n">helpers</span><span class="o">.</span><span class="n">create_uri_and_metadata_xml</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">four_track_list</span><span class="p">,</span> <span class="n">four_track_md</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">five_track_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">track_list</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">track_list</span><span class="p">[</span><span class="mi">5</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">track_list</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">track_list</span><span class="p">[</span><span class="mi">4</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">track_list</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">five_track_md</span> <span class="o">=</span> <span class="n">helpers</span><span class="o">.</span><span class="n">create_didl_lite_md</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">five_track_list</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">five_track_md_and_uris</span> <span class="o">=</span> <span class="n">helpers</span><span class="o">.</span><span class="n">create_uri_and_metadata_xml</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">five_track_list</span><span class="p">,</span> <span class="n">five_track_md</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">six_track_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">track_list</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">track_list</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">track_list</span><span class="p">[</span><span class="mi">5</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">track_list</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">track_list</span><span class="p">[</span><span class="mi">6</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">track_list</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
        <span class="n">six_track_md</span> <span class="o">=</span> <span class="n">helpers</span><span class="o">.</span><span class="n">create_didl_lite_md</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">six_track_list</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">six_track_md_and_uris</span> <span class="o">=</span> <span class="n">helpers</span><span class="o">.</span><span class="n">create_uri_and_metadata_xml</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">six_track_list</span><span class="p">,</span> <span class="n">six_track_md</span><span class="p">)</span>

        <span class="c1"># set up a track list with 250 entries to be used to completely fill the private queue later</span>
        <span class="k">while</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">limit_track_list</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">250</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">limit_track_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">track_source</span><span class="o">.</span><span class="n">tracks</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">3</span><span class="p">]))</span>

        <span class="n">limit_track_md</span> <span class="o">=</span> <span class="n">helpers</span><span class="o">.</span><span class="n">create_didl_lite_md</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">limit_track_list</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">limit_track_md_and_uris</span> <span class="o">=</span> <span class="n">helpers</span><span class="o">.</span><span class="n">create_uri_and_metadata_xml</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">limit_track_list</span><span class="p">,</span> <span class="n">limit_track_md</span><span class="p">)</span></div>

<div class="viewcode-block" id="ReplaceAllTracksTests.tearDownFixture"><a class="viewcode-back" href="../../../../upnp.api.queue.html#upnp.api.queue.replacealltracks.ReplaceAllTracksTests.tearDownFixture">[docs]</a>    <span class="k">def</span> <span class="nf">tearDownFixture</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        if all([zp.is_virtual() for zp in suite.my_devices]):</span>
<span class="sd">            self.skip(&quot;Skip this fixture&quot;)</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">ReplaceAllTracksTests</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">tearDownFixture</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">z</span> <span class="ow">in</span> <span class="nb">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">is_playback_device</span><span class="p">()</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">x</span><span class="o">.</span><span class="n">AVTransport</span><span class="o">.</span><span class="n">is_group_member</span><span class="p">(),</span> <span class="n">suite</span><span class="o">.</span><span class="n">my_devices</span><span class="p">):</span>
            <span class="n">z</span><span class="o">.</span><span class="n">AVTransport</span><span class="o">.</span><span class="n">clear_queue</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">queue_id</span><span class="p">)</span></div>

<div class="viewcode-block" id="ReplaceAllTracksTests.setUpTest"><a class="viewcode-back" href="../../../../upnp.api.queue.html#upnp.api.queue.replacealltracks.ReplaceAllTracksTests.setUpTest">[docs]</a>    <span class="k">def</span> <span class="nf">setUpTest</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># STA-1025 override BaseQueueTestFixture method to preserve original test procedure</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="ReplaceAllTracksTests.tearDownTest"><a class="viewcode-back" href="../../../../upnp.api.queue.html#upnp.api.queue.replacealltracks.ReplaceAllTracksTests.tearDownTest">[docs]</a>    <span class="k">def</span> <span class="nf">tearDownTest</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">z</span> <span class="ow">in</span> <span class="nb">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">is_playback_device</span><span class="p">()</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">x</span><span class="o">.</span><span class="n">AVTransport</span><span class="o">.</span><span class="n">is_group_member</span><span class="p">(),</span> <span class="n">suite</span><span class="o">.</span><span class="n">my_devices</span><span class="p">):</span>
            <span class="n">z</span><span class="o">.</span><span class="n">Queue</span><span class="o">.</span><span class="n">RemoveAllTracks</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">queue_ids</span><span class="p">[</span><span class="n">z</span><span class="o">.</span><span class="n">raw_udn</span><span class="p">],</span> <span class="mi">0</span><span class="p">)</span></div>

<div class="viewcode-block" id="ReplaceAllTracksTests.test_replacealltracks_including_current_playing_while_paused"><a class="viewcode-back" href="../../../../upnp.api.queue.html#upnp.api.queue.replacealltracks.ReplaceAllTracksTests.test_replacealltracks_including_current_playing_while_paused">[docs]</a>    <span class="nd">@combinatorial</span><span class="p">(</span><span class="n">playable_zone_generator</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">test_replacealltracks_including_current_playing_while_paused</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">zone</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Test: Queue:ReplaceAllTracks without preserving the currently playing track</span>
<span class="sd">        Devices: All playable</span>
<span class="sd">        Expected: Success</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1">#Add tracks to the queue</span>
        <span class="n">zone</span><span class="o">.</span><span class="n">Queue</span><span class="o">.</span><span class="n">AddMultipleURIs</span><span class="p">(</span><span class="n">queue_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">queue_ids</span><span class="p">[</span><span class="n">zone</span><span class="o">.</span><span class="n">raw_udn</span><span class="p">],</span>
                                   <span class="n">update_id</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                                   <span class="n">container_uri</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                                   <span class="n">container_metadata</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                                   <span class="n">desired_first_track_number_enqueued</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                                   <span class="n">enqueue_as_next</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                                   <span class="n">number_of_uris</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">track_list</span><span class="p">),</span>
                                   <span class="n">enqueued_uris_and_metadata</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">tracks_and_metadata_for_setup</span><span class="p">)</span>

        <span class="n">zone</span><span class="o">.</span><span class="n">AVTransport</span><span class="o">.</span><span class="n">SetAVTransportURI</span><span class="p">(</span><span class="n">uri</span><span class="o">=</span><span class="s2">&quot;x-rincon-queue:</span><span class="si">{}</span><span class="s2">#</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                                           <span class="n">zone</span><span class="o">.</span><span class="n">raw_udn</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">queue_ids</span><span class="p">[</span><span class="n">zone</span><span class="o">.</span><span class="n">raw_udn</span><span class="p">]),</span>
                                           <span class="n">metadata</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">)</span>

        <span class="c1">#Use a different track list for ReplaceAllTracks</span>
        <span class="n">zone</span><span class="o">.</span><span class="n">Queue</span><span class="o">.</span><span class="n">ReplaceAllTracks</span><span class="p">(</span><span class="n">queue_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">queue_ids</span><span class="p">[</span><span class="n">zone</span><span class="o">.</span><span class="n">raw_udn</span><span class="p">],</span>
                                    <span class="n">update_id</span><span class="o">=</span><span class="n">helpers</span><span class="o">.</span><span class="n">get_private_queue_update_id</span><span class="p">(</span><span class="n">zone</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">queue_ids</span><span class="p">[</span><span class="n">zone</span><span class="o">.</span><span class="n">raw_udn</span><span class="p">]),</span>
                                    <span class="n">container_uri</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                                    <span class="n">container_metadata</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                                    <span class="n">current_track_index</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                                    <span class="n">new_current_track_indices</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                                    <span class="n">number_of_uris</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">four_track_list</span><span class="p">),</span>
                                    <span class="n">enqueued_uris_and_metadata</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">four_track_md_and_uris</span><span class="p">)</span>

        <span class="c1"># Apparently GetPositionInfo doesn&#39;t care about the queue, for now.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">verifyEqualOrFailCase</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">int</span><span class="p">(</span><span class="n">zone</span><span class="o">.</span><span class="n">AVTransport</span><span class="o">.</span><span class="n">GetPositionInfo</span><span class="p">()[</span><span class="s2">&quot;Track&quot;</span><span class="p">]),</span>
                                   <span class="s2">&quot;Track should reset to first track&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">verifyTrueOrFailCase</span><span class="p">(</span><span class="n">helpers</span><span class="o">.</span><span class="n">_verify_tracks_in_queue</span><span class="p">(</span><span class="n">zone</span><span class="o">=</span><span class="n">zone</span><span class="p">,</span>
                                                                  <span class="n">queue_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">queue_ids</span><span class="p">[</span><span class="n">zone</span><span class="o">.</span><span class="n">raw_udn</span><span class="p">],</span>
                                                                  <span class="n">expected_track_list</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">four_track_list</span><span class="p">,</span>
                                                                  <span class="n">start_position</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span>
                                  <span class="s2">&quot;Expected tracks should be in the queue&quot;</span><span class="p">)</span></div>

<div class="viewcode-block" id="ReplaceAllTracksTests.test_replacealltracks_including_current_playing_while_playing"><a class="viewcode-back" href="../../../../upnp.api.queue.html#upnp.api.queue.replacealltracks.ReplaceAllTracksTests.test_replacealltracks_including_current_playing_while_playing">[docs]</a>    <span class="nd">@combinatorial</span><span class="p">(</span><span class="n">playable_zone_generator</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">test_replacealltracks_including_current_playing_while_playing</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">zone</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Test: Queue:ReplaceAllTracks without preserving the currently playing track</span>
<span class="sd">        Devices: All playable</span>
<span class="sd">        Expected: Success</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1">#Add tracks to the queue</span>
        <span class="n">zone</span><span class="o">.</span><span class="n">Queue</span><span class="o">.</span><span class="n">AddMultipleURIs</span><span class="p">(</span><span class="n">queue_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">queue_ids</span><span class="p">[</span><span class="n">zone</span><span class="o">.</span><span class="n">raw_udn</span><span class="p">],</span>
                                   <span class="n">update_id</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                                   <span class="n">container_uri</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                                   <span class="n">container_metadata</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                                   <span class="n">desired_first_track_number_enqueued</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                                   <span class="n">enqueue_as_next</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                                   <span class="n">number_of_uris</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">track_list</span><span class="p">),</span>
                                   <span class="n">enqueued_uris_and_metadata</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">tracks_and_metadata_for_setup</span><span class="p">)</span>

        <span class="n">zone</span><span class="o">.</span><span class="n">AVTransport</span><span class="o">.</span><span class="n">SetAVTransportURI</span><span class="p">(</span><span class="n">uri</span><span class="o">=</span><span class="s2">&quot;x-rincon-queue:</span><span class="si">{}</span><span class="s2">#</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                                           <span class="n">zone</span><span class="o">.</span><span class="n">raw_udn</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">queue_ids</span><span class="p">[</span><span class="n">zone</span><span class="o">.</span><span class="n">raw_udn</span><span class="p">]),</span>
                                           <span class="n">metadata</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">)</span>

        <span class="n">zone</span><span class="o">.</span><span class="n">AVTransport</span><span class="o">.</span><span class="n">Play</span><span class="p">()</span>

        <span class="c1"># Use a different track list for ReplaceAllTracks</span>
        <span class="n">zone</span><span class="o">.</span><span class="n">Queue</span><span class="o">.</span><span class="n">ReplaceAllTracks</span><span class="p">(</span><span class="n">queue_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">queue_ids</span><span class="p">[</span><span class="n">zone</span><span class="o">.</span><span class="n">raw_udn</span><span class="p">],</span>
                                    <span class="n">update_id</span><span class="o">=</span><span class="n">helpers</span><span class="o">.</span><span class="n">get_private_queue_update_id</span><span class="p">(</span><span class="n">zone</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">queue_ids</span><span class="p">[</span><span class="n">zone</span><span class="o">.</span><span class="n">raw_udn</span><span class="p">]),</span>
                                    <span class="n">container_uri</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                                    <span class="n">container_metadata</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                                    <span class="n">current_track_index</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                                    <span class="n">new_current_track_indices</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                                    <span class="n">number_of_uris</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">four_track_list</span><span class="p">),</span>
                                    <span class="n">enqueued_uris_and_metadata</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">four_track_md_and_uris</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">verifyEqualOrFailCase</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">int</span><span class="p">(</span><span class="n">zone</span><span class="o">.</span><span class="n">AVTransport</span><span class="o">.</span><span class="n">GetPositionInfo</span><span class="p">()[</span><span class="s2">&quot;Track&quot;</span><span class="p">]),</span>
                                   <span class="s2">&quot;Track should reset to first track&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">verifyTrueOrFailCase</span><span class="p">(</span><span class="n">helpers</span><span class="o">.</span><span class="n">_verify_tracks_in_queue</span><span class="p">(</span><span class="n">zone</span><span class="o">=</span><span class="n">zone</span><span class="p">,</span>
                                                                  <span class="n">queue_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">queue_ids</span><span class="p">[</span><span class="n">zone</span><span class="o">.</span><span class="n">raw_udn</span><span class="p">],</span>
                                                                  <span class="n">expected_track_list</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">four_track_list</span><span class="p">,</span>
                                                                  <span class="n">start_position</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span>
                                  <span class="s2">&quot;Expected tracks should be in the queue&quot;</span><span class="p">)</span></div>

<div class="viewcode-block" id="ReplaceAllTracksTests.test_play_from_private_queue_replacealltracks_on_shared_queue"><a class="viewcode-back" href="../../../../upnp.api.queue.html#upnp.api.queue.replacealltracks.ReplaceAllTracksTests.test_play_from_private_queue_replacealltracks_on_shared_queue">[docs]</a>    <span class="k">def</span> <span class="nf">test_play_from_private_queue_replacealltracks_on_shared_queue</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        SWPBL-56338 skipToItem should not interrupt playback</span>
<span class="sd">        Tests that the playback should not be interrupted when playing from private queue and calling</span>
<span class="sd">        replacealltracks on shared queue.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">zone</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">zones</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
        <span class="n">private_queue_uri</span> <span class="o">=</span> <span class="s2">&quot;x-rincon-queue:</span><span class="si">{}</span><span class="s2">#</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">zone</span><span class="o">.</span><span class="n">raw_udn</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">queue_ids</span><span class="p">[</span><span class="n">zone</span><span class="o">.</span><span class="n">raw_udn</span><span class="p">])</span>
        <span class="n">shared_queue_uri</span> <span class="o">=</span> <span class="s2">&quot;x-rincon-queue:</span><span class="si">{}</span><span class="s2">#</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">zone</span><span class="o">.</span><span class="n">raw_udn</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

        <span class="c1"># Add tracks to private queue</span>
        <span class="n">zone</span><span class="o">.</span><span class="n">Queue</span><span class="o">.</span><span class="n">AddMultipleURIs</span><span class="p">(</span><span class="n">queue_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">queue_ids</span><span class="p">[</span><span class="n">zone</span><span class="o">.</span><span class="n">raw_udn</span><span class="p">],</span>
                                   <span class="n">update_id</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                                   <span class="n">container_uri</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                                   <span class="n">container_metadata</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                                   <span class="n">desired_first_track_number_enqueued</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                                   <span class="n">enqueue_as_next</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                                   <span class="n">number_of_uris</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">track_list</span><span class="p">),</span>
                                   <span class="n">enqueued_uris_and_metadata</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">tracks_and_metadata_for_setup</span><span class="p">)</span>
        <span class="c1"># Use private queue</span>
        <span class="n">zone</span><span class="o">.</span><span class="n">AVTransport</span><span class="o">.</span><span class="n">SetAVTransportURI</span><span class="p">(</span><span class="n">uri</span><span class="o">=</span><span class="n">private_queue_uri</span><span class="p">,</span>
                                           <span class="n">metadata</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">)</span>

        <span class="c1"># Play</span>
        <span class="n">zone</span><span class="o">.</span><span class="n">AVTransport</span><span class="o">.</span><span class="n">Play</span><span class="p">();</span>
        <span class="c1"># Seek to 15 seconds into the track</span>
        <span class="n">zone</span><span class="o">.</span><span class="n">AVTransport</span><span class="o">.</span><span class="n">Seek</span><span class="p">(</span><span class="n">unit</span><span class="o">=</span><span class="s2">&quot;REL_TIME&quot;</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="s2">&quot;00:00:15&quot;</span><span class="p">)</span>
        <span class="c1"># Make sure player is playing after the seek</span>
        <span class="n">wait_until_true</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="n">zone</span><span class="o">.</span><span class="n">AVTransport</span><span class="o">.</span><span class="n">is_playing</span><span class="p">(),</span>
                       <span class="n">timeout_seconds</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

        <span class="c1"># Call replacealltracks on shared queue</span>
        <span class="n">zone</span><span class="o">.</span><span class="n">Queue</span><span class="o">.</span><span class="n">ReplaceAllTracks</span><span class="p">(</span><span class="n">queue_id</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                                    <span class="n">update_id</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                                    <span class="n">container_uri</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                                    <span class="n">container_metadata</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                                    <span class="n">current_track_index</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                                    <span class="n">new_current_track_indices</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                                    <span class="n">number_of_uris</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">four_track_list</span><span class="p">),</span>
                                    <span class="n">enqueued_uris_and_metadata</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">four_track_md_and_uris</span><span class="p">)</span>

        <span class="c1"># Make sure player is playing after the replaceall</span>
        <span class="n">wait_until_true</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="n">zone</span><span class="o">.</span><span class="n">AVTransport</span><span class="o">.</span><span class="n">is_playing</span><span class="p">(),</span>
                        <span class="n">timeout_seconds</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
        <span class="c1"># Verify that the current position is greater than 15 seconds after replaceall</span>
        <span class="n">time_str</span> <span class="o">=</span> <span class="n">zone</span><span class="o">.</span><span class="n">AVTransport</span><span class="o">.</span><span class="n">GetPositionInfo</span><span class="p">()[</span><span class="s1">&#39;RelTime&#39;</span><span class="p">]</span>
        <span class="n">t</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">time_str</span><span class="p">,</span> <span class="s2">&quot;%H:%M:%S&quot;</span><span class="p">)</span>
        <span class="n">current_position</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">seconds</span><span class="o">=</span><span class="n">t</span><span class="o">.</span><span class="n">second</span><span class="p">,</span> <span class="n">minutes</span><span class="o">=</span><span class="n">t</span><span class="o">.</span><span class="n">minute</span><span class="p">,</span> <span class="n">hours</span><span class="o">=</span><span class="n">t</span><span class="o">.</span><span class="n">hour</span><span class="p">)</span><span class="o">.</span><span class="n">seconds</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">verifyGreaterEqualOrFailCase</span><span class="p">(</span><span class="n">current_position</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span>
                                          <span class="s2">&quot;Current position should be greater than or equal to 15 seconds after replaceall&quot;</span><span class="p">)</span></div>

<div class="viewcode-block" id="ReplaceAllTracksTests.test_replacealltracks_preserve_current_track_while_paused"><a class="viewcode-back" href="../../../../upnp.api.queue.html#upnp.api.queue.replacealltracks.ReplaceAllTracksTests.test_replacealltracks_preserve_current_track_while_paused">[docs]</a>    <span class="nd">@combinatorial</span><span class="p">(</span><span class="n">playable_zone_generator</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">test_replacealltracks_preserve_current_track_while_paused</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">zone</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Test: Queue:ReplaceAllTracks while preserving the currently playing track</span>
<span class="sd">        Devices: All playable</span>
<span class="sd">        Expected: Success</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1">#Add tracks to the queue</span>
        <span class="n">zone</span><span class="o">.</span><span class="n">Queue</span><span class="o">.</span><span class="n">AddMultipleURIs</span><span class="p">(</span><span class="n">queue_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">queue_ids</span><span class="p">[</span><span class="n">zone</span><span class="o">.</span><span class="n">raw_udn</span><span class="p">],</span>
                                   <span class="n">update_id</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                                   <span class="n">container_uri</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                                   <span class="n">container_metadata</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                                   <span class="n">desired_first_track_number_enqueued</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                                   <span class="n">enqueue_as_next</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                                   <span class="n">number_of_uris</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">track_list</span><span class="p">),</span>
                                   <span class="n">enqueued_uris_and_metadata</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">tracks_and_metadata_for_setup</span><span class="p">)</span>

        <span class="n">zone</span><span class="o">.</span><span class="n">AVTransport</span><span class="o">.</span><span class="n">SetAVTransportURI</span><span class="p">(</span><span class="n">uri</span><span class="o">=</span><span class="s2">&quot;x-rincon-queue:</span><span class="si">{}</span><span class="s2">#</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                                           <span class="n">zone</span><span class="o">.</span><span class="n">raw_udn</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">queue_ids</span><span class="p">[</span><span class="n">zone</span><span class="o">.</span><span class="n">raw_udn</span><span class="p">]),</span>
                                           <span class="n">metadata</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">)</span>

        <span class="c1"># Use a different track list for ReplaceAllTracks</span>
        <span class="n">zone</span><span class="o">.</span><span class="n">Queue</span><span class="o">.</span><span class="n">ReplaceAllTracks</span><span class="p">(</span><span class="n">queue_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">queue_ids</span><span class="p">[</span><span class="n">zone</span><span class="o">.</span><span class="n">raw_udn</span><span class="p">],</span>
                                    <span class="n">update_id</span><span class="o">=</span><span class="n">helpers</span><span class="o">.</span><span class="n">get_private_queue_update_id</span><span class="p">(</span><span class="n">zone</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">queue_ids</span><span class="p">[</span><span class="n">zone</span><span class="o">.</span><span class="n">raw_udn</span><span class="p">]),</span>
                                    <span class="n">container_uri</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                                    <span class="n">container_metadata</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                                    <span class="n">current_track_index</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                                    <span class="n">new_current_track_indices</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                                    <span class="n">number_of_uris</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">six_track_list</span><span class="p">),</span>
                                    <span class="n">enqueued_uris_and_metadata</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">six_track_md_and_uris</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">verifyEqualOrFailCase</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">int</span><span class="p">(</span><span class="n">zone</span><span class="o">.</span><span class="n">AVTransport</span><span class="o">.</span><span class="n">GetPositionInfo</span><span class="p">()[</span><span class="s2">&quot;Track&quot;</span><span class="p">]),</span>
                                   <span class="s2">&quot;Track should reset to first track&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">verifyTrueOrFailCase</span><span class="p">(</span><span class="n">helpers</span><span class="o">.</span><span class="n">_verify_tracks_in_queue</span><span class="p">(</span><span class="n">zone</span><span class="o">=</span><span class="n">zone</span><span class="p">,</span>
                                                                  <span class="n">queue_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">queue_ids</span><span class="p">[</span><span class="n">zone</span><span class="o">.</span><span class="n">raw_udn</span><span class="p">],</span>
                                                                  <span class="n">expected_track_list</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">six_track_list</span><span class="p">,</span>
                                                                  <span class="n">start_position</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span>
                                  <span class="s2">&quot;Expected tracks should remain in the queue&quot;</span><span class="p">)</span></div>

<div class="viewcode-block" id="ReplaceAllTracksTests.test_replacealltracks_preserve_current_track_while_playing"><a class="viewcode-back" href="../../../../upnp.api.queue.html#upnp.api.queue.replacealltracks.ReplaceAllTracksTests.test_replacealltracks_preserve_current_track_while_playing">[docs]</a>    <span class="nd">@combinatorial</span><span class="p">(</span><span class="n">playable_zone_generator</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">test_replacealltracks_preserve_current_track_while_playing</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">zone</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Test: Queue:ReplaceAllTracks while preserving the currently playing track</span>
<span class="sd">        Devices: All playable</span>
<span class="sd">        Expected: Success</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1">#Add tracks to the queue</span>
        <span class="n">zone</span><span class="o">.</span><span class="n">Queue</span><span class="o">.</span><span class="n">AddMultipleURIs</span><span class="p">(</span><span class="n">queue_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">queue_ids</span><span class="p">[</span><span class="n">zone</span><span class="o">.</span><span class="n">raw_udn</span><span class="p">],</span>
                                   <span class="n">update_id</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                                   <span class="n">container_uri</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                                   <span class="n">container_metadata</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                                   <span class="n">desired_first_track_number_enqueued</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                                   <span class="n">enqueue_as_next</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                                   <span class="n">number_of_uris</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">track_list</span><span class="p">),</span>
                                   <span class="n">enqueued_uris_and_metadata</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">tracks_and_metadata_for_setup</span><span class="p">)</span>

        <span class="n">zone</span><span class="o">.</span><span class="n">AVTransport</span><span class="o">.</span><span class="n">SetAVTransportURI</span><span class="p">(</span><span class="n">uri</span><span class="o">=</span><span class="s2">&quot;x-rincon-queue:</span><span class="si">{}</span><span class="s2">#</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                                           <span class="n">zone</span><span class="o">.</span><span class="n">raw_udn</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">queue_ids</span><span class="p">[</span><span class="n">zone</span><span class="o">.</span><span class="n">raw_udn</span><span class="p">]),</span>
                                           <span class="n">metadata</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
        <span class="n">zone</span><span class="o">.</span><span class="n">AVTransport</span><span class="o">.</span><span class="n">Play</span><span class="p">()</span>

        <span class="c1"># Use a different track list for ReplaceAllTracks</span>
        <span class="n">zone</span><span class="o">.</span><span class="n">Queue</span><span class="o">.</span><span class="n">ReplaceAllTracks</span><span class="p">(</span><span class="n">queue_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">queue_ids</span><span class="p">[</span><span class="n">zone</span><span class="o">.</span><span class="n">raw_udn</span><span class="p">],</span>
                                    <span class="n">update_id</span><span class="o">=</span><span class="n">helpers</span><span class="o">.</span><span class="n">get_private_queue_update_id</span><span class="p">(</span><span class="n">zone</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">queue_ids</span><span class="p">[</span><span class="n">zone</span><span class="o">.</span><span class="n">raw_udn</span><span class="p">]),</span>
                                    <span class="n">container_uri</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                                    <span class="n">container_metadata</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                                    <span class="n">current_track_index</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                                    <span class="n">new_current_track_indices</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                                    <span class="n">number_of_uris</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">six_track_list</span><span class="p">),</span>
                                    <span class="n">enqueued_uris_and_metadata</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">six_track_md_and_uris</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">verifyTrueOrFailCase</span><span class="p">(</span><span class="n">helpers</span><span class="o">.</span><span class="n">_verify_tracks_in_queue</span><span class="p">(</span><span class="n">zone</span><span class="o">=</span><span class="n">zone</span><span class="p">,</span>
                                                                  <span class="n">queue_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">queue_ids</span><span class="p">[</span><span class="n">zone</span><span class="o">.</span><span class="n">raw_udn</span><span class="p">],</span>
                                                                  <span class="n">expected_track_list</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">six_track_list</span><span class="p">,</span>
                                                                  <span class="n">start_position</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span>
                                  <span class="s2">&quot;Expected tracks should remain in the queue&quot;</span><span class="p">)</span></div>

<div class="viewcode-block" id="ReplaceAllTracksTests.test_replace_all_tracks_invalid_updateid"><a class="viewcode-back" href="../../../../upnp.api.queue.html#upnp.api.queue.replacealltracks.ReplaceAllTracksTests.test_replace_all_tracks_invalid_updateid">[docs]</a>    <span class="nd">@combinatorial</span><span class="p">(</span><span class="n">playable_zone_generator</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">test_replace_all_tracks_invalid_updateid</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">zone</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Test: ReplaceAllTracks() using an invalid update_id</span>
<span class="sd">        Devices: All playable</span>
<span class="sd">        Expected: 1028 error</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1">#Add tracks to the queue</span>
        <span class="n">zone</span><span class="o">.</span><span class="n">Queue</span><span class="o">.</span><span class="n">AddMultipleURIs</span><span class="p">(</span><span class="n">queue_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">queue_ids</span><span class="p">[</span><span class="n">zone</span><span class="o">.</span><span class="n">raw_udn</span><span class="p">],</span>
                                   <span class="n">update_id</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                                   <span class="n">container_uri</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                                   <span class="n">container_metadata</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                                   <span class="n">desired_first_track_number_enqueued</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                                   <span class="n">enqueue_as_next</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                                   <span class="n">number_of_uris</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">track_list</span><span class="p">),</span>
                                   <span class="n">enqueued_uris_and_metadata</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tracks_and_metadata_for_setup</span><span class="p">)</span>

        <span class="n">zone</span><span class="o">.</span><span class="n">AVTransport</span><span class="o">.</span><span class="n">SetAVTransportURI</span><span class="p">(</span><span class="n">uri</span><span class="o">=</span><span class="s2">&quot;x-rincon-queue:</span><span class="si">{}</span><span class="s2">#</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                                           <span class="n">zone</span><span class="o">.</span><span class="n">raw_udn</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">queue_ids</span><span class="p">[</span><span class="n">zone</span><span class="o">.</span><span class="n">raw_udn</span><span class="p">]),</span>
                                           <span class="n">metadata</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">)</span>

        <span class="c1"># Attempt to ReplaceAllTracks with a different track list and an invalid updateid</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">zone</span><span class="o">.</span><span class="n">Queue</span><span class="o">.</span><span class="n">ReplaceAllTracks</span><span class="p">(</span><span class="n">queue_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">queue_ids</span><span class="p">[</span><span class="n">zone</span><span class="o">.</span><span class="n">raw_udn</span><span class="p">],</span>
                                        <span class="n">update_id</span><span class="o">=</span><span class="mi">123456789</span><span class="p">,</span>
                                        <span class="n">container_uri</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                                        <span class="n">container_metadata</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                                        <span class="n">current_track_index</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                                        <span class="n">new_current_track_indices</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                                        <span class="n">number_of_uris</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">two_track_list</span><span class="p">),</span>
                                        <span class="n">enqueued_uris_and_metadata</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">two_track_md_and_uris</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">sonos</span><span class="o">.</span><span class="n">exception</span><span class="o">.</span><span class="n">UPnPError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">verifyEqualOrFailCase</span><span class="p">(</span>
                <span class="n">sonos</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">zone_player</span><span class="o">.</span><span class="n">UPNP_ERROR_1028_STALE_OBJECT</span><span class="p">,</span>
                <span class="n">e</span><span class="o">.</span><span class="n">upnp_error</span><span class="p">,</span>
                <span class="s2">&quot;ReplaceAllTracks with invalid updateid should fail (1028&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fail</span><span class="p">(</span><span class="s2">&quot;ReplaceAllTracks with invalid updateid should raise a &quot;</span>
                      <span class="s2">&quot;UPnP error!&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">verifyTrueOrFailCase</span><span class="p">(</span><span class="n">helpers</span><span class="o">.</span><span class="n">_verify_tracks_in_queue</span><span class="p">(</span><span class="n">zone</span><span class="o">=</span><span class="n">zone</span><span class="p">,</span>
                                                                  <span class="n">queue_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">queue_ids</span><span class="p">[</span><span class="n">zone</span><span class="o">.</span><span class="n">raw_udn</span><span class="p">],</span>
                                                                  <span class="n">expected_track_list</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">track_list</span><span class="p">,</span>
                                                                  <span class="n">start_position</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span>
                                  <span class="s2">&quot;Expected tracks should exist in the queue.&quot;</span><span class="p">)</span></div>

<div class="viewcode-block" id="ReplaceAllTracksTests.test_replace_all_tracks_invalid_queueid"><a class="viewcode-back" href="../../../../upnp.api.queue.html#upnp.api.queue.replacealltracks.ReplaceAllTracksTests.test_replace_all_tracks_invalid_queueid">[docs]</a>    <span class="nd">@combinatorial</span><span class="p">(</span><span class="n">playable_zone_generator</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">test_replace_all_tracks_invalid_queueid</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">zone</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Test: ReplaceAllTracks using an invalid queue_id</span>
<span class="sd">        Devices: All playable</span>
<span class="sd">        Expected: 718 error</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1">#Add tracks to the queue</span>
        <span class="n">zone</span><span class="o">.</span><span class="n">Queue</span><span class="o">.</span><span class="n">AddMultipleURIs</span><span class="p">(</span><span class="n">queue_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">queue_ids</span><span class="p">[</span><span class="n">zone</span><span class="o">.</span><span class="n">raw_udn</span><span class="p">],</span>
                                   <span class="n">update_id</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                                   <span class="n">container_uri</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                                   <span class="n">container_metadata</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                                   <span class="n">desired_first_track_number_enqueued</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                                   <span class="n">enqueue_as_next</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                                   <span class="n">number_of_uris</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">track_list</span><span class="p">),</span>
                                   <span class="n">enqueued_uris_and_metadata</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">tracks_and_metadata_for_setup</span><span class="p">)</span>

        <span class="n">zone</span><span class="o">.</span><span class="n">AVTransport</span><span class="o">.</span><span class="n">SetAVTransportURI</span><span class="p">(</span><span class="n">uri</span><span class="o">=</span><span class="s2">&quot;x-rincon-queue:</span><span class="si">{}</span><span class="s2">#</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                                           <span class="n">zone</span><span class="o">.</span><span class="n">raw_udn</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">queue_ids</span><span class="p">[</span><span class="n">zone</span><span class="o">.</span><span class="n">raw_udn</span><span class="p">]),</span>
                                           <span class="n">metadata</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">)</span>

        <span class="c1"># Use a different track list to attept to ReplaceAllTracks with an invalid queueid</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">zone</span><span class="o">.</span><span class="n">Queue</span><span class="o">.</span><span class="n">ReplaceAllTracks</span><span class="p">(</span><span class="n">queue_id</span><span class="o">=</span><span class="mi">123456789</span><span class="p">,</span>
                                        <span class="n">update_id</span><span class="o">=</span><span class="n">helpers</span><span class="o">.</span><span class="n">get_private_queue_update_id</span><span class="p">(</span><span class="n">zone</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">queue_ids</span><span class="p">[</span><span class="n">zone</span><span class="o">.</span><span class="n">raw_udn</span><span class="p">]),</span>
                                        <span class="n">container_uri</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                                        <span class="n">container_metadata</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                                        <span class="n">current_track_index</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                                        <span class="n">new_current_track_indices</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                                        <span class="n">number_of_uris</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">two_track_list</span><span class="p">),</span>
                                        <span class="n">enqueued_uris_and_metadata</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">two_track_md_and_uris</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">sonos</span><span class="o">.</span><span class="n">exception</span><span class="o">.</span><span class="n">UPnPError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">verifyEqualOrFailCase</span><span class="p">(</span>
                <span class="n">sonos</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">zone_player</span><span class="o">.</span><span class="n">UPNP_ERROR_718_INVALID_INSTANCE_ID</span><span class="p">,</span>
                <span class="n">e</span><span class="o">.</span><span class="n">upnp_error</span><span class="p">,</span>
                <span class="s2">&quot;ReplaceAllTracks with invalid queue id should fail (718)&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fail</span><span class="p">(</span><span class="s2">&quot;ReplaceAllTracks with invalid queue id should raise a &quot;</span>
                      <span class="s2">&quot;UPnP error!&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">verifyTrueOrFailCase</span><span class="p">(</span><span class="n">helpers</span><span class="o">.</span><span class="n">_verify_tracks_in_queue</span><span class="p">(</span><span class="n">zone</span><span class="o">=</span><span class="n">zone</span><span class="p">,</span>
                                                                  <span class="n">queue_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">queue_ids</span><span class="p">[</span><span class="n">zone</span><span class="o">.</span><span class="n">raw_udn</span><span class="p">],</span>
                                                                  <span class="n">expected_track_list</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">track_list</span><span class="p">,</span>
                                                                  <span class="n">start_position</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span>
                                  <span class="s2">&quot;Expected tracks should remain in the queue&quot;</span><span class="p">)</span></div>

<div class="viewcode-block" id="ReplaceAllTracksTests.test_replace_all_tracks_verify_new_current_track_index_while_paused"><a class="viewcode-back" href="../../../../upnp.api.queue.html#upnp.api.queue.replacealltracks.ReplaceAllTracksTests.test_replace_all_tracks_verify_new_current_track_index_while_paused">[docs]</a>    <span class="nd">@combinatorial</span><span class="p">(</span><span class="n">playable_zone_generator</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">test_replace_all_tracks_verify_new_current_track_index_while_paused</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">zone</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Test: ReplaceAllTracks while preserving the current track which is not at queue position 1</span>
<span class="sd">        Devices: All playable</span>
<span class="sd">        Expected: Success</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1">#Add tracks to the queue</span>
        <span class="n">zone</span><span class="o">.</span><span class="n">Queue</span><span class="o">.</span><span class="n">AddMultipleURIs</span><span class="p">(</span><span class="n">queue_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">queue_ids</span><span class="p">[</span><span class="n">zone</span><span class="o">.</span><span class="n">raw_udn</span><span class="p">],</span>
                                   <span class="n">update_id</span><span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
                                   <span class="n">container_uri</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                                   <span class="n">container_metadata</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                                   <span class="n">desired_first_track_number_enqueued</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                                   <span class="n">enqueue_as_next</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                                   <span class="n">number_of_uris</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">track_list</span><span class="p">),</span>
                                   <span class="n">enqueued_uris_and_metadata</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">tracks_and_metadata_for_setup</span><span class="p">)</span>

        <span class="n">zone</span><span class="o">.</span><span class="n">AVTransport</span><span class="o">.</span><span class="n">SetAVTransportURI</span><span class="p">(</span><span class="n">uri</span><span class="o">=</span><span class="s2">&quot;x-rincon-queue:</span><span class="si">{}</span><span class="s2">#</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                                           <span class="n">zone</span><span class="o">.</span><span class="n">raw_udn</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">queue_ids</span><span class="p">[</span><span class="n">zone</span><span class="o">.</span><span class="n">raw_udn</span><span class="p">]),</span>
                                           <span class="n">metadata</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
        <span class="c1"># Skip ahead so the current track is not at index 1</span>
        <span class="n">zone</span><span class="o">.</span><span class="n">AVTransport</span><span class="o">.</span><span class="n">Next</span><span class="p">()</span>
        <span class="n">zone</span><span class="o">.</span><span class="n">AVTransport</span><span class="o">.</span><span class="n">Next</span><span class="p">()</span>

        <span class="c1"># Use a different track list for ReplaceAllTracks</span>

        <span class="n">zone</span><span class="o">.</span><span class="n">Queue</span><span class="o">.</span><span class="n">ReplaceAllTracks</span><span class="p">(</span><span class="n">queue_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">queue_ids</span><span class="p">[</span><span class="n">zone</span><span class="o">.</span><span class="n">raw_udn</span><span class="p">],</span>
                                    <span class="n">update_id</span><span class="o">=</span><span class="n">helpers</span><span class="o">.</span><span class="n">get_private_queue_update_id</span><span class="p">(</span><span class="n">zone</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">queue_ids</span><span class="p">[</span><span class="n">zone</span><span class="o">.</span><span class="n">raw_udn</span><span class="p">]),</span>
                                    <span class="n">container_uri</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                                    <span class="n">container_metadata</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                                    <span class="n">current_track_index</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
                                    <span class="n">new_current_track_indices</span><span class="o">=</span><span class="s2">&quot;0,0,0,1&quot;</span><span class="p">,</span>
                                    <span class="n">number_of_uris</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">five_track_list</span><span class="p">),</span>
                                    <span class="n">enqueued_uris_and_metadata</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">five_track_md_and_uris</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">verifyTrueOrFailCase</span><span class="p">(</span><span class="n">helpers</span><span class="o">.</span><span class="n">_verify_tracks_in_queue</span><span class="p">(</span><span class="n">zone</span><span class="o">=</span><span class="n">zone</span><span class="p">,</span>
                                                                  <span class="n">queue_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">queue_ids</span><span class="p">[</span><span class="n">zone</span><span class="o">.</span><span class="n">raw_udn</span><span class="p">],</span>
                                                                  <span class="n">expected_track_list</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">five_track_list</span><span class="p">,</span>
                                                                  <span class="n">start_position</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span>
                                  <span class="s2">&quot;Expected tracks should remain in queue.&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">verifyEqualOrFailCase</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">int</span><span class="p">(</span><span class="n">zone</span><span class="o">.</span><span class="n">AVTransport</span><span class="o">.</span><span class="n">GetPositionInfo</span><span class="p">()[</span><span class="s2">&quot;Track&quot;</span><span class="p">]),</span>
                                   <span class="s2">&quot;Preserved track should be at index given&quot;</span><span class="p">)</span></div>

<div class="viewcode-block" id="ReplaceAllTracksTests.test_replace_all_tracks_verify_new_current_track_index_while_playing"><a class="viewcode-back" href="../../../../upnp.api.queue.html#upnp.api.queue.replacealltracks.ReplaceAllTracksTests.test_replace_all_tracks_verify_new_current_track_index_while_playing">[docs]</a>    <span class="nd">@combinatorial</span><span class="p">(</span><span class="n">playable_zone_generator</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">test_replace_all_tracks_verify_new_current_track_index_while_playing</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">zone</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Test: ReplaceAllTracks while preserving the current track which is not at queue position 1</span>
<span class="sd">        Devices: All playable</span>
<span class="sd">        Expected: Success</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1">#Add tracks to the queue</span>
        <span class="n">zone</span><span class="o">.</span><span class="n">Queue</span><span class="o">.</span><span class="n">AddMultipleURIs</span><span class="p">(</span><span class="n">queue_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">queue_ids</span><span class="p">[</span><span class="n">zone</span><span class="o">.</span><span class="n">raw_udn</span><span class="p">],</span>
                                   <span class="n">update_id</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                                   <span class="n">container_uri</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                                   <span class="n">container_metadata</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                                   <span class="n">desired_first_track_number_enqueued</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                                   <span class="n">enqueue_as_next</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                                   <span class="n">number_of_uris</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">track_list</span><span class="p">),</span>
                                   <span class="n">enqueued_uris_and_metadata</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">tracks_and_metadata_for_setup</span><span class="p">)</span>

        <span class="n">zone</span><span class="o">.</span><span class="n">AVTransport</span><span class="o">.</span><span class="n">SetAVTransportURI</span><span class="p">(</span><span class="n">uri</span><span class="o">=</span><span class="s2">&quot;x-rincon-queue:</span><span class="si">{}</span><span class="s2">#</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                                           <span class="n">zone</span><span class="o">.</span><span class="n">raw_udn</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">queue_ids</span><span class="p">[</span><span class="n">zone</span><span class="o">.</span><span class="n">raw_udn</span><span class="p">]),</span>
                                           <span class="n">metadata</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
        <span class="n">zone</span><span class="o">.</span><span class="n">AVTransport</span><span class="o">.</span><span class="n">Play</span><span class="p">()</span>

        <span class="c1"># Skip ahead so the current track is not at queue index 1</span>
        <span class="n">zone</span><span class="o">.</span><span class="n">AVTransport</span><span class="o">.</span><span class="n">Next</span><span class="p">()</span>
        <span class="n">zone</span><span class="o">.</span><span class="n">AVTransport</span><span class="o">.</span><span class="n">Next</span><span class="p">()</span>

        <span class="n">zone</span><span class="o">.</span><span class="n">Queue</span><span class="o">.</span><span class="n">ReplaceAllTracks</span><span class="p">(</span><span class="n">queue_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">queue_ids</span><span class="p">[</span><span class="n">zone</span><span class="o">.</span><span class="n">raw_udn</span><span class="p">],</span>
                                    <span class="n">update_id</span><span class="o">=</span><span class="n">helpers</span><span class="o">.</span><span class="n">get_private_queue_update_id</span><span class="p">(</span><span class="n">zone</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">queue_ids</span><span class="p">[</span><span class="n">zone</span><span class="o">.</span><span class="n">raw_udn</span><span class="p">]),</span>
                                    <span class="n">container_uri</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                                    <span class="n">container_metadata</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                                    <span class="n">current_track_index</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                                    <span class="n">new_current_track_indices</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                                    <span class="n">number_of_uris</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">four_track_list</span><span class="p">),</span>
                                    <span class="n">enqueued_uris_and_metadata</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">four_track_md_and_uris</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">verifyTrueOrFailCase</span><span class="p">(</span><span class="n">helpers</span><span class="o">.</span><span class="n">_verify_tracks_in_queue</span><span class="p">(</span><span class="n">zone</span><span class="o">=</span><span class="n">zone</span><span class="p">,</span>
                                                                  <span class="n">queue_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">queue_ids</span><span class="p">[</span><span class="n">zone</span><span class="o">.</span><span class="n">raw_udn</span><span class="p">],</span>
                                                                  <span class="n">expected_track_list</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">four_track_list</span><span class="p">,</span>
                                                                  <span class="n">start_position</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span>
                                  <span class="s2">&quot;Expected tracks should remain in queue.&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">verifyEqualOrFailCase</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">int</span><span class="p">(</span><span class="n">zone</span><span class="o">.</span><span class="n">AVTransport</span><span class="o">.</span><span class="n">GetPositionInfo</span><span class="p">()[</span><span class="s2">&quot;Track&quot;</span><span class="p">]),</span>
                                   <span class="s2">&quot;Preserved track should be at index given&quot;</span><span class="p">)</span></div>

<div class="viewcode-block" id="ReplaceAllTracksTests.test_replace_all_tracks_move_to_end_of_queue_while_playing"><a class="viewcode-back" href="../../../../upnp.api.queue.html#upnp.api.queue.replacealltracks.ReplaceAllTracksTests.test_replace_all_tracks_move_to_end_of_queue_while_playing">[docs]</a>    <span class="nd">@combinatorial</span><span class="p">(</span><span class="n">playable_zone_generator</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">test_replace_all_tracks_move_to_end_of_queue_while_playing</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">zone</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Test: Queue:ReplaceAllTracks whle preserving the current playing track and moving it to the end of the new queue</span>
<span class="sd">        Devices: All playable</span>
<span class="sd">        Expected: Success</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1">#Add tracks to the queue</span>
        <span class="n">zone</span><span class="o">.</span><span class="n">Queue</span><span class="o">.</span><span class="n">AddMultipleURIs</span><span class="p">(</span><span class="n">queue_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">queue_ids</span><span class="p">[</span><span class="n">zone</span><span class="o">.</span><span class="n">raw_udn</span><span class="p">],</span>
                                   <span class="n">update_id</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                                   <span class="n">container_uri</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                                   <span class="n">container_metadata</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                                   <span class="n">desired_first_track_number_enqueued</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                                   <span class="n">enqueue_as_next</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                                   <span class="n">number_of_uris</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">track_list</span><span class="p">),</span>
                                   <span class="n">enqueued_uris_and_metadata</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">tracks_and_metadata_for_setup</span><span class="p">)</span>

        <span class="n">zone</span><span class="o">.</span><span class="n">AVTransport</span><span class="o">.</span><span class="n">SetAVTransportURI</span><span class="p">(</span><span class="n">uri</span><span class="o">=</span><span class="s2">&quot;x-rincon-queue:</span><span class="si">{}</span><span class="s2">#</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                                           <span class="n">zone</span><span class="o">.</span><span class="n">raw_udn</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">queue_ids</span><span class="p">[</span><span class="n">zone</span><span class="o">.</span><span class="n">raw_udn</span><span class="p">]),</span>
                                           <span class="n">metadata</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
        <span class="n">zone</span><span class="o">.</span><span class="n">AVTransport</span><span class="o">.</span><span class="n">Play</span><span class="p">()</span>

        <span class="n">zone</span><span class="o">.</span><span class="n">Queue</span><span class="o">.</span><span class="n">ReplaceAllTracks</span><span class="p">(</span><span class="n">queue_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">queue_ids</span><span class="p">[</span><span class="n">zone</span><span class="o">.</span><span class="n">raw_udn</span><span class="p">],</span>
                                    <span class="n">update_id</span><span class="o">=</span><span class="n">helpers</span><span class="o">.</span><span class="n">get_private_queue_update_id</span><span class="p">(</span><span class="n">zone</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">queue_ids</span><span class="p">[</span><span class="n">zone</span><span class="o">.</span><span class="n">raw_udn</span><span class="p">]),</span>
                                    <span class="n">container_uri</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                                    <span class="n">container_metadata</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                                    <span class="n">current_track_index</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                                    <span class="n">new_current_track_indices</span><span class="o">=</span><span class="s2">&quot;5,0,0,0,0&quot;</span><span class="p">,</span>
                                    <span class="n">number_of_uris</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">five_track_list</span><span class="p">),</span>
                                    <span class="n">enqueued_uris_and_metadata</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">five_track_md_and_uris</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">verifyTrueOrFailCase</span><span class="p">(</span><span class="n">helpers</span><span class="o">.</span><span class="n">_verify_tracks_in_queue</span><span class="p">(</span><span class="n">zone</span><span class="o">=</span><span class="n">zone</span><span class="p">,</span>
                                                                  <span class="n">queue_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">queue_ids</span><span class="p">[</span><span class="n">zone</span><span class="o">.</span><span class="n">raw_udn</span><span class="p">],</span>
                                                                  <span class="n">expected_track_list</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">five_track_list</span><span class="p">,</span>
                                                                  <span class="n">start_position</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span>
                                  <span class="s2">&quot;Expected tracks should remain in queue.&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">verifyEqualOrFailCase</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="nb">int</span><span class="p">(</span><span class="n">zone</span><span class="o">.</span><span class="n">AVTransport</span><span class="o">.</span><span class="n">GetPositionInfo</span><span class="p">()[</span><span class="s2">&quot;Track&quot;</span><span class="p">]),</span>
                                   <span class="s2">&quot;Preserved track should be at index given&quot;</span><span class="p">)</span></div>

<div class="viewcode-block" id="ReplaceAllTracksTests.test_replace_all_tracks_move_to_end_of_queue_while_paused"><a class="viewcode-back" href="../../../../upnp.api.queue.html#upnp.api.queue.replacealltracks.ReplaceAllTracksTests.test_replace_all_tracks_move_to_end_of_queue_while_paused">[docs]</a>    <span class="nd">@combinatorial</span><span class="p">(</span><span class="n">playable_zone_generator</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">test_replace_all_tracks_move_to_end_of_queue_while_paused</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">zone</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Test: Queue:ReplaceAllTracks whle preserving the current playing track and moving it to the end of the new queue</span>
<span class="sd">        Devices: All playable</span>
<span class="sd">        Expected: Success</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1">#Add tracks to the queue</span>
        <span class="n">zone</span><span class="o">.</span><span class="n">Queue</span><span class="o">.</span><span class="n">AddMultipleURIs</span><span class="p">(</span><span class="n">queue_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">queue_ids</span><span class="p">[</span><span class="n">zone</span><span class="o">.</span><span class="n">raw_udn</span><span class="p">],</span>
                                   <span class="n">update_id</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                                   <span class="n">container_uri</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                                   <span class="n">container_metadata</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                                   <span class="n">desired_first_track_number_enqueued</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                                   <span class="n">enqueue_as_next</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                                   <span class="n">number_of_uris</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">track_list</span><span class="p">),</span>
                                   <span class="n">enqueued_uris_and_metadata</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">tracks_and_metadata_for_setup</span><span class="p">)</span>

        <span class="n">zone</span><span class="o">.</span><span class="n">AVTransport</span><span class="o">.</span><span class="n">SetAVTransportURI</span><span class="p">(</span><span class="n">uri</span><span class="o">=</span><span class="s2">&quot;x-rincon-queue:</span><span class="si">{}</span><span class="s2">#</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                                           <span class="n">zone</span><span class="o">.</span><span class="n">raw_udn</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">queue_ids</span><span class="p">[</span><span class="n">zone</span><span class="o">.</span><span class="n">raw_udn</span><span class="p">]),</span>
                                           <span class="n">metadata</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">)</span>

        <span class="c1"># Use a different track list for ReplaceAllTracks</span>
        <span class="n">zone</span><span class="o">.</span><span class="n">Queue</span><span class="o">.</span><span class="n">ReplaceAllTracks</span><span class="p">(</span><span class="n">queue_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">queue_ids</span><span class="p">[</span><span class="n">zone</span><span class="o">.</span><span class="n">raw_udn</span><span class="p">],</span>
                                    <span class="n">update_id</span><span class="o">=</span><span class="n">helpers</span><span class="o">.</span><span class="n">get_private_queue_update_id</span><span class="p">(</span><span class="n">zone</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">queue_ids</span><span class="p">[</span><span class="n">zone</span><span class="o">.</span><span class="n">raw_udn</span><span class="p">]),</span>
                                    <span class="n">container_uri</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                                    <span class="n">container_metadata</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                                    <span class="n">current_track_index</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                                    <span class="n">new_current_track_indices</span><span class="o">=</span><span class="s2">&quot;5,0,0,0,0&quot;</span><span class="p">,</span>
                                    <span class="n">number_of_uris</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">five_track_list</span><span class="p">),</span>
                                    <span class="n">enqueued_uris_and_metadata</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">five_track_md_and_uris</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">verifyTrueOrFailCase</span><span class="p">(</span><span class="n">helpers</span><span class="o">.</span><span class="n">_verify_tracks_in_queue</span><span class="p">(</span><span class="n">zone</span><span class="o">=</span><span class="n">zone</span><span class="p">,</span>
                                                                  <span class="n">queue_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">queue_ids</span><span class="p">[</span><span class="n">zone</span><span class="o">.</span><span class="n">raw_udn</span><span class="p">],</span>
                                                                  <span class="n">expected_track_list</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">five_track_list</span><span class="p">,</span>
                                                                  <span class="n">start_position</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span>
                                  <span class="s2">&quot;Expected tracks should remain in queue.&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">verifyEqualOrFailCase</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="nb">int</span><span class="p">(</span><span class="n">zone</span><span class="o">.</span><span class="n">AVTransport</span><span class="o">.</span><span class="n">GetPositionInfo</span><span class="p">()[</span><span class="s2">&quot;Track&quot;</span><span class="p">]),</span>
                                   <span class="s2">&quot;Preserved track should be at index given&quot;</span><span class="p">)</span></div>

<div class="viewcode-block" id="ReplaceAllTracksTests.test_replace_all_tracks_invalid_xml"><a class="viewcode-back" href="../../../../upnp.api.queue.html#upnp.api.queue.replacealltracks.ReplaceAllTracksTests.test_replace_all_tracks_invalid_xml">[docs]</a>    <span class="nd">@combinatorial</span><span class="p">(</span><span class="n">playable_zone_generator</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">test_replace_all_tracks_invalid_xml</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">zone</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Test: Queue.ReplaceAllTracks where the xml passed in does not match the spec</span>
<span class="sd">        Devices: All playable</span>
<span class="sd">        Expected: 1000 error</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1">#Add tracks to the queue</span>
        <span class="n">zone</span><span class="o">.</span><span class="n">Queue</span><span class="o">.</span><span class="n">AddMultipleURIs</span><span class="p">(</span><span class="n">queue_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">queue_ids</span><span class="p">[</span><span class="n">zone</span><span class="o">.</span><span class="n">raw_udn</span><span class="p">],</span>
                                   <span class="n">update_id</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                                   <span class="n">container_uri</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                                   <span class="n">container_metadata</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                                   <span class="n">desired_first_track_number_enqueued</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                                   <span class="n">enqueue_as_next</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                                   <span class="n">number_of_uris</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">track_list</span><span class="p">),</span>
                                   <span class="n">enqueued_uris_and_metadata</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">tracks_and_metadata_for_setup</span><span class="p">)</span>

        <span class="n">zone</span><span class="o">.</span><span class="n">AVTransport</span><span class="o">.</span><span class="n">SetAVTransportURI</span><span class="p">(</span><span class="n">uri</span><span class="o">=</span><span class="s2">&quot;x-rincon-queue:</span><span class="si">{}</span><span class="s2">#</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                                           <span class="n">zone</span><span class="o">.</span><span class="n">raw_udn</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">queue_ids</span><span class="p">[</span><span class="n">zone</span><span class="o">.</span><span class="n">raw_udn</span><span class="p">]),</span>
                                           <span class="n">metadata</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
        <span class="n">zone</span><span class="o">.</span><span class="n">AVTransport</span><span class="o">.</span><span class="n">Play</span><span class="p">()</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">zone</span><span class="o">.</span><span class="n">Queue</span><span class="o">.</span><span class="n">ReplaceAllTracks</span><span class="p">(</span><span class="n">queue_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">queue_ids</span><span class="p">[</span><span class="n">zone</span><span class="o">.</span><span class="n">raw_udn</span><span class="p">],</span>
                                        <span class="n">update_id</span><span class="o">=</span><span class="n">helpers</span><span class="o">.</span><span class="n">get_private_queue_update_id</span><span class="p">(</span><span class="n">zone</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">queue_ids</span><span class="p">[</span><span class="n">zone</span><span class="o">.</span><span class="n">raw_udn</span><span class="p">]),</span>
                                        <span class="n">container_uri</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                                        <span class="n">container_metadata</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                                        <span class="n">current_track_index</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                                        <span class="n">new_current_track_indices</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
                                        <span class="n">number_of_uris</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                                        <span class="n">enqueued_uris_and_metadata</span><span class="o">=</span><span class="s1">&#39;&lt;URIs xmlns:dc=&quot;http://purl.org/dc/elements/1.1/&quot;&#39;</span>
                                                                    <span class="s1">&#39;xmlns:upnp=&quot;urn:schemas-upnp-org:metadata-1-0/upnp/&quot;&gt;&#39;</span>
                                                                    <span class="s1">&#39;&lt;URI uri=&quot;http://some.server.com/path/to/a%20track.mp3&quot;&gt;&#39;</span>
                                                                    <span class="s1">&#39;&lt;DIDL-Lite xmlns=&quot;urn:schemas-upnp-org:metadata-1-0/DIDL-Lite/&quot;&gt;&#39;</span>
                                                                    <span class="s1">&#39;&lt;item id=&quot;-1&quot; parentID=&quot;-1&quot;&gt;&#39;</span>
                                                                    <span class="s1">&#39;&lt;res protocolInfo=&quot;http:*:audio/mp3:*&quot; duration=&quot;0:04:39&quot;&gt;http://some.server.com/path/to/a%20track.mp3&lt;/res&gt;&#39;</span>
                                                                    <span class="s1">&#39;&lt;upnp:albumArtURI&gt;http://some.other.server.com/path/to/art/a%20track.png&lt;/upnp:albumArtURI&gt;&#39;</span>
                                                                    <span class="s1">&#39;&lt;upnp:class&gt;object.item.audioItem.musicTrack&lt;/upnp:class&gt;&#39;</span>
                                                                    <span class="s1">&#39;&lt;dc:title&gt;Track Name&lt;/dc:title&gt;&lt;dc:creator&gt;Artist Name&lt;/dc:creator&gt;&#39;</span>
                                                                    <span class="s1">&#39;&lt;upnp:album&gt;Album Name&lt;/upnp:album&gt;&lt;/item&gt;&lt;/DIDL-Lite&gt;&lt;/URI&gt;&lt;/URIs&gt;&#39;</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">sonos</span><span class="o">.</span><span class="n">exception</span><span class="o">.</span><span class="n">UPnPError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">verifyEqualOrFailCase</span><span class="p">(</span>
                <span class="n">sonos</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">zone_player</span><span class="o">.</span><span class="n">UPNP_ERROR_1000_GENERAL_FAILURE</span><span class="p">,</span>
                <span class="n">e</span><span class="o">.</span><span class="n">upnp_error</span><span class="p">,</span>
                <span class="s2">&quot;ReplaceAllTracks with invalid XML should fail (1000)&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fail</span><span class="p">(</span><span class="s2">&quot;ReplaceAllTracks with invalid XML should raise a &quot;</span>
                      <span class="s2">&quot;UPnP error!&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">verifyTrueOrFailCase</span><span class="p">(</span><span class="n">helpers</span><span class="o">.</span><span class="n">_verify_tracks_in_queue</span><span class="p">(</span><span class="n">zone</span><span class="o">=</span><span class="n">zone</span><span class="p">,</span>
                                                                  <span class="n">queue_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">queue_ids</span><span class="p">[</span><span class="n">zone</span><span class="o">.</span><span class="n">raw_udn</span><span class="p">],</span>
                                                                  <span class="n">expected_track_list</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">track_list</span><span class="p">,</span>
                                                                  <span class="n">start_position</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span>
                                  <span class="s2">&quot;Expected tracks should remain in queue.&quot;</span><span class="p">)</span></div>

<div class="viewcode-block" id="ReplaceAllTracksTests.test_replace_all_tracks_current_track_not_in_new_list_while_playing"><a class="viewcode-back" href="../../../../upnp.api.queue.html#upnp.api.queue.replacealltracks.ReplaceAllTracksTests.test_replace_all_tracks_current_track_not_in_new_list_while_playing">[docs]</a>    <span class="nd">@combinatorial</span><span class="p">(</span><span class="n">playable_zone_generator</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">test_replace_all_tracks_current_track_not_in_new_list_while_playing</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">zone</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Test: ReplaceAllTracks while asking to preserve the current playing track, but not passing it in with the new list</span>
<span class="sd">        Devices: All playable</span>
<span class="sd">        Expected: Success</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1">#Add tracks to the queue</span>
        <span class="n">zone</span><span class="o">.</span><span class="n">Queue</span><span class="o">.</span><span class="n">AddMultipleURIs</span><span class="p">(</span><span class="n">queue_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">queue_ids</span><span class="p">[</span><span class="n">zone</span><span class="o">.</span><span class="n">raw_udn</span><span class="p">],</span>
                                   <span class="n">update_id</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                                   <span class="n">container_uri</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                                   <span class="n">container_metadata</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                                   <span class="n">desired_first_track_number_enqueued</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                                   <span class="n">enqueue_as_next</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                                   <span class="n">number_of_uris</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">track_list</span><span class="p">),</span>
                                   <span class="n">enqueued_uris_and_metadata</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">tracks_and_metadata_for_setup</span><span class="p">)</span>

        <span class="n">zone</span><span class="o">.</span><span class="n">AVTransport</span><span class="o">.</span><span class="n">SetAVTransportURI</span><span class="p">(</span><span class="n">uri</span><span class="o">=</span><span class="s2">&quot;x-rincon-queue:</span><span class="si">{}</span><span class="s2">#</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                                           <span class="n">zone</span><span class="o">.</span><span class="n">raw_udn</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">queue_ids</span><span class="p">[</span><span class="n">zone</span><span class="o">.</span><span class="n">raw_udn</span><span class="p">]),</span>
                                           <span class="n">metadata</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
        <span class="n">zone</span><span class="o">.</span><span class="n">AVTransport</span><span class="o">.</span><span class="n">Play</span><span class="p">()</span>

        <span class="c1"># Use a different track list for ReplaceAllTracks</span>
        <span class="n">zone</span><span class="o">.</span><span class="n">Queue</span><span class="o">.</span><span class="n">ReplaceAllTracks</span><span class="p">(</span><span class="n">queue_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">queue_ids</span><span class="p">[</span><span class="n">zone</span><span class="o">.</span><span class="n">raw_udn</span><span class="p">],</span>
                                    <span class="n">update_id</span><span class="o">=</span><span class="n">helpers</span><span class="o">.</span><span class="n">get_private_queue_update_id</span><span class="p">(</span><span class="n">zone</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">queue_ids</span><span class="p">[</span><span class="n">zone</span><span class="o">.</span><span class="n">raw_udn</span><span class="p">]),</span>
                                    <span class="n">container_uri</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                                    <span class="n">container_metadata</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                                    <span class="n">current_track_index</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                                    <span class="n">new_current_track_indices</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                                    <span class="n">number_of_uris</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">five_track_list</span><span class="p">),</span>
                                    <span class="n">enqueued_uris_and_metadata</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">five_track_md_and_uris</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">verifyTrueOrFailCase</span><span class="p">(</span><span class="n">helpers</span><span class="o">.</span><span class="n">_verify_tracks_in_queue</span><span class="p">(</span><span class="n">zone</span><span class="o">=</span><span class="n">zone</span><span class="p">,</span>
                                                                  <span class="n">queue_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">queue_ids</span><span class="p">[</span><span class="n">zone</span><span class="o">.</span><span class="n">raw_udn</span><span class="p">],</span>
                                                                  <span class="n">expected_track_list</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">five_track_list</span><span class="p">,</span>
                                                                  <span class="n">start_position</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span>
                                  <span class="s2">&quot;Expected tracks should remain in the queue&quot;</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">wait_until_true</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="n">zone</span><span class="o">.</span><span class="n">AVTransport</span><span class="o">.</span><span class="n">is_playing</span><span class="p">(),</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">sonos</span><span class="o">.</span><span class="n">exception</span><span class="o">.</span><span class="n">TimeoutError</span><span class="p">:</span>
            <span class="k">pass</span>  <span class="c1"># We&#39;re going to verify the playing state anyhow, the wait is to give the ZP more time to update.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">verifyInOrFailCase</span><span class="p">(</span>
            <span class="n">zone</span><span class="o">.</span><span class="n">AVTransport</span><span class="o">.</span><span class="n">get_transport_state</span><span class="p">(),</span>
            <span class="p">(</span><span class="n">AVTransportService</span><span class="o">.</span><span class="n">TRANSITIONING_STATE</span><span class="p">,</span>
                <span class="n">AVTransportService</span><span class="o">.</span><span class="n">PLAYING_STATE</span><span class="p">),</span>
            <span class="s2">&quot;Player should be in the playing or transitioning state&quot;</span><span class="p">)</span></div>

<div class="viewcode-block" id="ReplaceAllTracksTests.test_replace_all_tracks_current_track_not_in_new_list_while_paused"><a class="viewcode-back" href="../../../../upnp.api.queue.html#upnp.api.queue.replacealltracks.ReplaceAllTracksTests.test_replace_all_tracks_current_track_not_in_new_list_while_paused">[docs]</a>    <span class="nd">@combinatorial</span><span class="p">(</span><span class="n">playable_zone_generator</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">test_replace_all_tracks_current_track_not_in_new_list_while_paused</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">zone</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Test: ReplaceAllTracks while asking to preserve the current playing track, but not passing it in with the new list</span>
<span class="sd">        Devices: All playable</span>
<span class="sd">        Expected: Success</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1">#Add tracks to the queue</span>
        <span class="n">zone</span><span class="o">.</span><span class="n">Queue</span><span class="o">.</span><span class="n">AddMultipleURIs</span><span class="p">(</span><span class="n">queue_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">queue_ids</span><span class="p">[</span><span class="n">zone</span><span class="o">.</span><span class="n">raw_udn</span><span class="p">],</span>
                                   <span class="n">update_id</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                                   <span class="n">container_uri</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                                   <span class="n">container_metadata</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                                   <span class="n">desired_first_track_number_enqueued</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                                   <span class="n">enqueue_as_next</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                                   <span class="n">number_of_uris</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">track_list</span><span class="p">),</span>
                                   <span class="n">enqueued_uris_and_metadata</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">tracks_and_metadata_for_setup</span><span class="p">)</span>

        <span class="n">zone</span><span class="o">.</span><span class="n">AVTransport</span><span class="o">.</span><span class="n">SetAVTransportURI</span><span class="p">(</span><span class="n">uri</span><span class="o">=</span><span class="s2">&quot;x-rincon-queue:</span><span class="si">{}</span><span class="s2">#</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                                           <span class="n">zone</span><span class="o">.</span><span class="n">raw_udn</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">queue_ids</span><span class="p">[</span><span class="n">zone</span><span class="o">.</span><span class="n">raw_udn</span><span class="p">]),</span>
                                           <span class="n">metadata</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">)</span>

        <span class="c1"># Use a different track list for ReplaceAllTracks</span>
        <span class="n">zone</span><span class="o">.</span><span class="n">Queue</span><span class="o">.</span><span class="n">ReplaceAllTracks</span><span class="p">(</span><span class="n">queue_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">queue_ids</span><span class="p">[</span><span class="n">zone</span><span class="o">.</span><span class="n">raw_udn</span><span class="p">],</span>
                                    <span class="n">update_id</span><span class="o">=</span><span class="n">helpers</span><span class="o">.</span><span class="n">get_private_queue_update_id</span><span class="p">(</span><span class="n">zone</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">queue_ids</span><span class="p">[</span><span class="n">zone</span><span class="o">.</span><span class="n">raw_udn</span><span class="p">]),</span>
                                    <span class="n">container_uri</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                                    <span class="n">container_metadata</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                                    <span class="n">current_track_index</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                                    <span class="n">new_current_track_indices</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                                    <span class="n">number_of_uris</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">five_track_list</span><span class="p">),</span>
                                    <span class="n">enqueued_uris_and_metadata</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">five_track_md_and_uris</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">verifyTrueOrFailCase</span><span class="p">(</span><span class="n">helpers</span><span class="o">.</span><span class="n">_verify_tracks_in_queue</span><span class="p">(</span><span class="n">zone</span><span class="o">=</span><span class="n">zone</span><span class="p">,</span>
                                                                  <span class="n">queue_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">queue_ids</span><span class="p">[</span><span class="n">zone</span><span class="o">.</span><span class="n">raw_udn</span><span class="p">],</span>
                                                                  <span class="n">expected_track_list</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">five_track_list</span><span class="p">,</span>
                                                                  <span class="n">start_position</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span>
                                  <span class="s2">&quot;Expected tracks should remain in the queue&quot;</span><span class="p">)</span></div>

<div class="viewcode-block" id="ReplaceAllTracksTests.test_replace_all_tracks_number_of_tracks_doesnt_match_uris_while_playing"><a class="viewcode-back" href="../../../../upnp.api.queue.html#upnp.api.queue.replacealltracks.ReplaceAllTracksTests.test_replace_all_tracks_number_of_tracks_doesnt_match_uris_while_playing">[docs]</a>    <span class="nd">@combinatorial</span><span class="p">(</span><span class="n">playable_zone_generator</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">test_replace_all_tracks_number_of_tracks_doesnt_match_uris_while_playing</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">zone</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Test: ReplaceAllTracks where number_of_uris doesn&#39;t match the count in enqueued_uris_and_metadata</span>
<span class="sd">        Devices: All playable</span>
<span class="sd">        Expected: 402 Error</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">zone</span><span class="o">.</span><span class="n">Queue</span><span class="o">.</span><span class="n">AddMultipleURIs</span><span class="p">(</span><span class="n">queue_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">queue_ids</span><span class="p">[</span><span class="n">zone</span><span class="o">.</span><span class="n">raw_udn</span><span class="p">],</span>
                                   <span class="n">update_id</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                                   <span class="n">container_uri</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                                   <span class="n">container_metadata</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                                   <span class="n">desired_first_track_number_enqueued</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                                   <span class="n">enqueue_as_next</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                                   <span class="n">number_of_uris</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">track_list</span><span class="p">),</span>
                                   <span class="n">enqueued_uris_and_metadata</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">tracks_and_metadata_for_setup</span><span class="p">)</span>

        <span class="n">zone</span><span class="o">.</span><span class="n">AVTransport</span><span class="o">.</span><span class="n">SetAVTransportURI</span><span class="p">(</span><span class="n">uri</span><span class="o">=</span><span class="s2">&quot;x-rincon-queue:</span><span class="si">{}</span><span class="s2">#</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                                           <span class="n">zone</span><span class="o">.</span><span class="n">raw_udn</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">queue_ids</span><span class="p">[</span><span class="n">zone</span><span class="o">.</span><span class="n">raw_udn</span><span class="p">]),</span>
                                           <span class="n">metadata</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
        <span class="n">zone</span><span class="o">.</span><span class="n">AVTransport</span><span class="o">.</span><span class="n">Play</span><span class="p">()</span>

        <span class="c1"># Use a different track list for ReplaceAllTracks</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">zone</span><span class="o">.</span><span class="n">Queue</span><span class="o">.</span><span class="n">ReplaceAllTracks</span><span class="p">(</span><span class="n">queue_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">queue_ids</span><span class="p">[</span><span class="n">zone</span><span class="o">.</span><span class="n">raw_udn</span><span class="p">],</span>
                                        <span class="n">update_id</span><span class="o">=</span><span class="n">helpers</span><span class="o">.</span><span class="n">get_private_queue_update_id</span><span class="p">(</span><span class="n">zone</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">queue_ids</span><span class="p">[</span><span class="n">zone</span><span class="o">.</span><span class="n">raw_udn</span><span class="p">]),</span>
                                        <span class="n">container_uri</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                                        <span class="n">container_metadata</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                                        <span class="n">current_track_index</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                                        <span class="n">new_current_track_indices</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                                        <span class="n">number_of_uris</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
                                        <span class="n">enqueued_uris_and_metadata</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">four_track_md_and_uris</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">sonos</span><span class="o">.</span><span class="n">exception</span><span class="o">.</span><span class="n">UPnPError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">verifyEqualOrFailCase</span><span class="p">(</span>
                <span class="n">sonos</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">zone_player</span><span class="o">.</span><span class="n">UPNP_ERROR_402_INVALID_ARGUMENTS</span><span class="p">,</span>
                <span class="n">e</span><span class="o">.</span><span class="n">upnp_error</span><span class="p">,</span>
                <span class="s2">&quot;ReplaceAllTracks should fail (402)&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fail</span><span class="p">(</span><span class="s2">&quot;ReplaceAllTracks should raise a UPnP error!&quot;</span><span class="p">)</span></div>

<div class="viewcode-block" id="ReplaceAllTracksTests.test_replace_all_tracks_number_of_tracks_doesnt_match_uris_while_paused"><a class="viewcode-back" href="../../../../upnp.api.queue.html#upnp.api.queue.replacealltracks.ReplaceAllTracksTests.test_replace_all_tracks_number_of_tracks_doesnt_match_uris_while_paused">[docs]</a>    <span class="nd">@combinatorial</span><span class="p">(</span><span class="n">playable_zone_generator</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">test_replace_all_tracks_number_of_tracks_doesnt_match_uris_while_paused</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">zone</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Test: ReplaceAllTracks where number_of_uris doesn&#39;t match the count in enqueued_uris_and_metadata</span>
<span class="sd">        Devices: All playable</span>
<span class="sd">        Expected: 402 Error</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">zone</span><span class="o">.</span><span class="n">Queue</span><span class="o">.</span><span class="n">AddMultipleURIs</span><span class="p">(</span><span class="n">queue_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">queue_ids</span><span class="p">[</span><span class="n">zone</span><span class="o">.</span><span class="n">raw_udn</span><span class="p">],</span>
                                   <span class="n">update_id</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                                   <span class="n">container_uri</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                                   <span class="n">container_metadata</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                                   <span class="n">desired_first_track_number_enqueued</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                                   <span class="n">enqueue_as_next</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                                   <span class="n">number_of_uris</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">track_list</span><span class="p">),</span>
                                   <span class="n">enqueued_uris_and_metadata</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">tracks_and_metadata_for_setup</span><span class="p">)</span>

        <span class="n">zone</span><span class="o">.</span><span class="n">AVTransport</span><span class="o">.</span><span class="n">SetAVTransportURI</span><span class="p">(</span><span class="n">uri</span><span class="o">=</span><span class="s2">&quot;x-rincon-queue:</span><span class="si">{}</span><span class="s2">#</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                                           <span class="n">zone</span><span class="o">.</span><span class="n">raw_udn</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">queue_ids</span><span class="p">[</span><span class="n">zone</span><span class="o">.</span><span class="n">raw_udn</span><span class="p">]),</span>
                                           <span class="n">metadata</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">)</span>

        <span class="c1"># Use a different track list for ReplaceAllTracks</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">zone</span><span class="o">.</span><span class="n">Queue</span><span class="o">.</span><span class="n">ReplaceAllTracks</span><span class="p">(</span><span class="n">queue_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">queue_ids</span><span class="p">[</span><span class="n">zone</span><span class="o">.</span><span class="n">raw_udn</span><span class="p">],</span>
                                        <span class="n">update_id</span><span class="o">=</span><span class="n">helpers</span><span class="o">.</span><span class="n">get_private_queue_update_id</span><span class="p">(</span><span class="n">zone</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">queue_ids</span><span class="p">[</span><span class="n">zone</span><span class="o">.</span><span class="n">raw_udn</span><span class="p">]),</span>
                                        <span class="n">container_uri</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                                        <span class="n">container_metadata</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                                        <span class="n">current_track_index</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                                        <span class="n">new_current_track_indices</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                                        <span class="n">number_of_uris</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
                                        <span class="n">enqueued_uris_and_metadata</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">five_track_md_and_uris</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">sonos</span><span class="o">.</span><span class="n">exception</span><span class="o">.</span><span class="n">UPnPError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">verifyEqualOrFailCase</span><span class="p">(</span>
                <span class="n">sonos</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">zone_player</span><span class="o">.</span><span class="n">UPNP_ERROR_402_INVALID_ARGUMENTS</span><span class="p">,</span>
                <span class="n">e</span><span class="o">.</span><span class="n">upnp_error</span><span class="p">,</span>
                <span class="s2">&quot;ReplaceAllTracks should fail (402)&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fail</span><span class="p">(</span><span class="s2">&quot;ReplaceAllTracks should raise a UPnP error!&quot;</span><span class="p">)</span></div>

<div class="viewcode-block" id="ReplaceAllTracksTests.test_replace_all_tracks_zero_new_index_while_playing"><a class="viewcode-back" href="../../../../upnp.api.queue.html#upnp.api.queue.replacealltracks.ReplaceAllTracksTests.test_replace_all_tracks_zero_new_index_while_playing">[docs]</a>    <span class="nd">@combinatorial</span><span class="p">(</span><span class="n">playable_zone_generator</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">test_replace_all_tracks_zero_new_index_while_playing</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">zone</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Test: ReplaceAllTracks with a NCI of 0</span>
<span class="sd">        Devices: All playable</span>
<span class="sd">        Expected: Success</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">zone</span><span class="o">.</span><span class="n">Queue</span><span class="o">.</span><span class="n">AddMultipleURIs</span><span class="p">(</span><span class="n">queue_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">queue_ids</span><span class="p">[</span><span class="n">zone</span><span class="o">.</span><span class="n">raw_udn</span><span class="p">],</span>
                                   <span class="n">update_id</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                                   <span class="n">container_uri</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                                   <span class="n">container_metadata</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                                   <span class="n">desired_first_track_number_enqueued</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                                   <span class="n">enqueue_as_next</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                                   <span class="n">number_of_uris</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">track_list</span><span class="p">),</span>
                                   <span class="n">enqueued_uris_and_metadata</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">tracks_and_metadata_for_setup</span><span class="p">)</span>

        <span class="n">zone</span><span class="o">.</span><span class="n">AVTransport</span><span class="o">.</span><span class="n">SetAVTransportURI</span><span class="p">(</span><span class="n">uri</span><span class="o">=</span><span class="s2">&quot;x-rincon-queue:</span><span class="si">{}</span><span class="s2">#</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                                           <span class="n">zone</span><span class="o">.</span><span class="n">raw_udn</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">queue_ids</span><span class="p">[</span><span class="n">zone</span><span class="o">.</span><span class="n">raw_udn</span><span class="p">]),</span>
                                           <span class="n">metadata</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
        <span class="n">zone</span><span class="o">.</span><span class="n">AVTransport</span><span class="o">.</span><span class="n">Play</span><span class="p">()</span>

        <span class="c1"># Use a different track list for ReplaceAllTracks</span>
        <span class="n">zone</span><span class="o">.</span><span class="n">Queue</span><span class="o">.</span><span class="n">ReplaceAllTracks</span><span class="p">(</span><span class="n">queue_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">queue_ids</span><span class="p">[</span><span class="n">zone</span><span class="o">.</span><span class="n">raw_udn</span><span class="p">],</span>
                                    <span class="n">update_id</span><span class="o">=</span><span class="n">helpers</span><span class="o">.</span><span class="n">get_private_queue_update_id</span><span class="p">(</span><span class="n">zone</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">queue_ids</span><span class="p">[</span><span class="n">zone</span><span class="o">.</span><span class="n">raw_udn</span><span class="p">]),</span>
                                    <span class="n">container_uri</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                                    <span class="n">container_metadata</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                                    <span class="n">current_track_index</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                                    <span class="n">new_current_track_indices</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                                    <span class="n">number_of_uris</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                                    <span class="n">enqueued_uris_and_metadata</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">)</span></div>

<div class="viewcode-block" id="ReplaceAllTracksTests.test_replace_all_tracks_zero_new_index_while_paused"><a class="viewcode-back" href="../../../../upnp.api.queue.html#upnp.api.queue.replacealltracks.ReplaceAllTracksTests.test_replace_all_tracks_zero_new_index_while_paused">[docs]</a>    <span class="nd">@combinatorial</span><span class="p">(</span><span class="n">playable_zone_generator</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">test_replace_all_tracks_zero_new_index_while_paused</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">zone</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Test: ReplaceAllTracks with a NCI of 0</span>
<span class="sd">        Devices: All playable</span>
<span class="sd">        Expected: Success</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">track_list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">while</span> <span class="nb">len</span><span class="p">(</span><span class="n">track_list</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">9</span><span class="p">:</span>
            <span class="n">track_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">track_source</span><span class="o">.</span><span class="n">tracks</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">3</span><span class="p">]))</span>
        <span class="c1"># Populate the queue with track_list</span>
        <span class="n">helpers</span><span class="o">.</span><span class="n">generate_metadata_and_add_tracks_to_queue</span><span class="p">(</span><span class="n">zone</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">queue_ids</span><span class="p">[</span><span class="n">zone</span><span class="o">.</span><span class="n">raw_udn</span><span class="p">],</span> <span class="n">track_list</span><span class="p">)</span>

        <span class="n">zone</span><span class="o">.</span><span class="n">AVTransport</span><span class="o">.</span><span class="n">SetAVTransportURI</span><span class="p">(</span><span class="n">uri</span><span class="o">=</span><span class="s2">&quot;x-rincon-queue:</span><span class="si">{}</span><span class="s2">#</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                                           <span class="n">zone</span><span class="o">.</span><span class="n">raw_udn</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">queue_ids</span><span class="p">[</span><span class="n">zone</span><span class="o">.</span><span class="n">raw_udn</span><span class="p">]),</span>
                                           <span class="n">metadata</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">)</span>

        <span class="n">zone</span><span class="o">.</span><span class="n">Queue</span><span class="o">.</span><span class="n">ReplaceAllTracks</span><span class="p">(</span><span class="n">queue_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">queue_ids</span><span class="p">[</span><span class="n">zone</span><span class="o">.</span><span class="n">raw_udn</span><span class="p">],</span>
                                    <span class="n">update_id</span><span class="o">=</span><span class="n">helpers</span><span class="o">.</span><span class="n">get_private_queue_update_id</span><span class="p">(</span><span class="n">zone</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">queue_ids</span><span class="p">[</span><span class="n">zone</span><span class="o">.</span><span class="n">raw_udn</span><span class="p">]),</span>
                                    <span class="n">container_uri</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                                    <span class="n">container_metadata</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                                    <span class="n">current_track_index</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                                    <span class="n">new_current_track_indices</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                                    <span class="n">number_of_uris</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                                    <span class="n">enqueued_uris_and_metadata</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">)</span></div>

<div class="viewcode-block" id="ReplaceAllTracksTests.test_replace_all_tracks_shuffle_sonos_queue"><a class="viewcode-back" href="../../../../upnp.api.queue.html#upnp.api.queue.replacealltracks.ReplaceAllTracksTests.test_replace_all_tracks_shuffle_sonos_queue">[docs]</a>    <span class="nd">@combinatorial</span><span class="p">(</span><span class="n">playable_zone_generator</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">test_replace_all_tracks_shuffle_sonos_queue</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">zone</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Test: Queue:ReplaceAllTracks with shuffle mode turned on for the Sonos queue</span>
<span class="sd">        Devices: All playable</span>
<span class="sd">        Expected: Success</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">skip</span><span class="p">(</span><span class="s2">&quot;Skipping test until a the expected behavior is ironed out.&quot;</span><span class="p">)</span>
        <span class="n">track_list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">while</span> <span class="nb">len</span><span class="p">(</span><span class="n">track_list</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">9</span><span class="p">:</span>
            <span class="n">track_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">track_source</span><span class="o">.</span><span class="n">tracks</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">3</span><span class="p">]))</span>
        <span class="c1"># Populate the queue with track_list</span>
        <span class="n">helpers</span><span class="o">.</span><span class="n">generate_metadata_and_add_tracks_to_queue</span><span class="p">(</span><span class="n">zone</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">queue_ids</span><span class="p">[</span><span class="n">zone</span><span class="o">.</span><span class="n">raw_udn</span><span class="p">],</span> <span class="n">track_list</span><span class="p">)</span>

        <span class="c1"># Create a new track list from the existing list and corresponding didl-lite md</span>
        <span class="n">new_track_list</span> <span class="o">=</span> <span class="n">track_list</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">track_list</span><span class="p">[</span><span class="mi">5</span><span class="p">],</span> <span class="n">track_list</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">track_list</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span>
        <span class="n">new_track_list_md</span> <span class="o">=</span> <span class="n">helpers</span><span class="o">.</span><span class="n">create_didl_lite_md</span><span class="p">(</span><span class="n">new_track_list</span><span class="p">)</span>
        <span class="n">enqueued_uris_and_metadata</span> <span class="o">=</span> <span class="n">helpers</span><span class="o">.</span><span class="n">create_uri_and_metadata_xml</span><span class="p">(</span><span class="n">new_track_list</span><span class="p">,</span> <span class="n">new_track_list_md</span><span class="p">)</span>

        <span class="c1"># Start playing the private queue</span>
        <span class="n">zone</span><span class="o">.</span><span class="n">AVTransport</span><span class="o">.</span><span class="n">SetAVTransportURI</span><span class="p">(</span><span class="n">uri</span><span class="o">=</span><span class="s2">&quot;x-rincon-queue:</span><span class="si">{}</span><span class="s2">#</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                                           <span class="n">zone</span><span class="o">.</span><span class="n">raw_udn</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">queue_ids</span><span class="p">[</span><span class="n">zone</span><span class="o">.</span><span class="n">raw_udn</span><span class="p">]),</span>
                                           <span class="n">metadata</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
        <span class="n">zone</span><span class="o">.</span><span class="n">AVTransport</span><span class="o">.</span><span class="n">Play</span><span class="p">()</span>

        <span class="c1"># Skip ahead so that current_index!=1</span>
        <span class="n">zone</span><span class="o">.</span><span class="n">AVTransport</span><span class="o">.</span><span class="n">Next</span><span class="p">()</span>

        <span class="c1"># Turn on shuffle mode</span>
        <span class="n">zone</span><span class="o">.</span><span class="n">AVTransport</span><span class="o">.</span><span class="n">SetPlayMode</span><span class="p">(</span><span class="s2">&quot;SHUFFLE&quot;</span><span class="p">)</span>

        <span class="n">zone</span><span class="o">.</span><span class="n">Queue</span><span class="o">.</span><span class="n">ReplaceAllTracks</span><span class="p">(</span><span class="n">queue_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">queue_ids</span><span class="p">[</span><span class="n">zone</span><span class="o">.</span><span class="n">raw_udn</span><span class="p">],</span>
                                    <span class="n">update_id</span><span class="o">=</span><span class="n">helpers</span><span class="o">.</span><span class="n">get_private_queue_update_id</span><span class="p">(</span><span class="n">zone</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">queue_ids</span><span class="p">[</span><span class="n">zone</span><span class="o">.</span><span class="n">raw_udn</span><span class="p">]),</span>
                                    <span class="n">container_uri</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                                    <span class="n">container_metadata</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                                    <span class="n">current_track_index</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
                                    <span class="n">new_current_track_indices</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
                                    <span class="n">number_of_uris</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">new_track_list</span><span class="p">),</span>
                                    <span class="n">enqueued_uris_and_metadata</span><span class="o">=</span><span class="n">enqueued_uris_and_metadata</span><span class="p">)</span>

        <span class="n">final_track_list</span> <span class="o">=</span> <span class="n">new_track_list</span>
        <span class="n">final_track_list</span><span class="o">.</span><span class="n">insert</span><span class="p">[</span><span class="n">track_list</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">verifyTrueOrFailCase</span><span class="p">(</span><span class="n">helpers</span><span class="o">.</span><span class="n">_verify_tracks_in_queue</span><span class="p">(</span><span class="n">zone</span><span class="o">=</span><span class="n">zone</span><span class="p">,</span>
                                                                  <span class="n">queue_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">queue_ids</span><span class="p">[</span><span class="n">zone</span><span class="o">.</span><span class="n">raw_udn</span><span class="p">],</span>
                                                                  <span class="n">expected_track_list</span><span class="o">=</span><span class="n">final_track_list</span><span class="p">,</span>
                                                                  <span class="n">start_position</span><span class="o">=</span><span class="mi">1</span><span class="p">))</span></div>

<div class="viewcode-block" id="ReplaceAllTracksTests.test_replace_all_tracks_current_track_index_out_of_range"><a class="viewcode-back" href="../../../../upnp.api.queue.html#upnp.api.queue.replacealltracks.ReplaceAllTracksTests.test_replace_all_tracks_current_track_index_out_of_range">[docs]</a>    <span class="nd">@combinatorial</span><span class="p">(</span><span class="n">playable_zone_generator</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">test_replace_all_tracks_current_track_index_out_of_range</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">zone</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Test: Queue:ReplaceAllTracks where the current track index is out of range</span>
<span class="sd">        Devices: All playable</span>
<span class="sd">        Expected: 402 Error</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">zone</span><span class="o">.</span><span class="n">Queue</span><span class="o">.</span><span class="n">AddMultipleURIs</span><span class="p">(</span><span class="n">queue_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">queue_ids</span><span class="p">[</span><span class="n">zone</span><span class="o">.</span><span class="n">raw_udn</span><span class="p">],</span>
                                   <span class="n">update_id</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                                   <span class="n">container_uri</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                                   <span class="n">container_metadata</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                                   <span class="n">desired_first_track_number_enqueued</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                                   <span class="n">enqueue_as_next</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                                   <span class="n">number_of_uris</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">track_list</span><span class="p">),</span>
                                   <span class="n">enqueued_uris_and_metadata</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">tracks_and_metadata_for_setup</span><span class="p">)</span>

        <span class="n">zone</span><span class="o">.</span><span class="n">AVTransport</span><span class="o">.</span><span class="n">SetAVTransportURI</span><span class="p">(</span><span class="n">uri</span><span class="o">=</span><span class="s2">&quot;x-rincon-queue:</span><span class="si">{}</span><span class="s2">#</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                                           <span class="n">zone</span><span class="o">.</span><span class="n">raw_udn</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">queue_ids</span><span class="p">[</span><span class="n">zone</span><span class="o">.</span><span class="n">raw_udn</span><span class="p">]),</span>
                                           <span class="n">metadata</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">)</span>

        <span class="c1"># Use a different track list for ReplaceAllTracks</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">zone</span><span class="o">.</span><span class="n">Queue</span><span class="o">.</span><span class="n">ReplaceAllTracks</span><span class="p">(</span><span class="n">queue_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">queue_ids</span><span class="p">[</span><span class="n">zone</span><span class="o">.</span><span class="n">raw_udn</span><span class="p">],</span>
                                        <span class="n">update_id</span><span class="o">=</span><span class="n">helpers</span><span class="o">.</span><span class="n">get_private_queue_update_id</span><span class="p">(</span><span class="n">zone</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">queue_ids</span><span class="p">[</span><span class="n">zone</span><span class="o">.</span><span class="n">raw_udn</span><span class="p">]),</span>
                                        <span class="n">container_uri</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                                        <span class="n">container_metadata</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                                        <span class="n">current_track_index</span><span class="o">=</span><span class="mi">13</span><span class="p">,</span>
                                        <span class="n">new_current_track_indices</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                                        <span class="n">number_of_uris</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">two_track_list</span><span class="p">),</span>
                                        <span class="n">enqueued_uris_and_metadata</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">two_track_md_and_uris</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">sonos</span><span class="o">.</span><span class="n">exception</span><span class="o">.</span><span class="n">UPnPError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">verifyEqualOrFailCase</span><span class="p">(</span>
                <span class="n">sonos</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">zone_player</span><span class="o">.</span><span class="n">UPNP_ERROR_402_INVALID_ARGUMENTS</span><span class="p">,</span>
                <span class="n">e</span><span class="o">.</span><span class="n">upnp_error</span><span class="p">,</span>
                <span class="s2">&quot;ReplaceAllTracks should fail (402)&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fail</span><span class="p">(</span><span class="s2">&quot;ReplaceAllTracks should raise a UPnP error!&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">verifyTrueOrFailCase</span><span class="p">(</span><span class="n">helpers</span><span class="o">.</span><span class="n">_verify_tracks_in_queue</span><span class="p">(</span><span class="n">zone</span><span class="o">=</span><span class="n">zone</span><span class="p">,</span>
                                                                  <span class="n">queue_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">queue_ids</span><span class="p">[</span><span class="n">zone</span><span class="o">.</span><span class="n">raw_udn</span><span class="p">],</span>
                                                                  <span class="n">expected_track_list</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">track_list</span><span class="p">,</span>
                                                                  <span class="n">start_position</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span>
                                  <span class="s2">&quot;Expected tracks should remain in the queue&quot;</span><span class="p">)</span></div>

<div class="viewcode-block" id="ReplaceAllTracksTests.test_replace_all_tracks_new_list_index_out_of_range"><a class="viewcode-back" href="../../../../upnp.api.queue.html#upnp.api.queue.replacealltracks.ReplaceAllTracksTests.test_replace_all_tracks_new_list_index_out_of_range">[docs]</a>    <span class="nd">@combinatorial</span><span class="p">(</span><span class="n">playable_zone_generator</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">test_replace_all_tracks_new_list_index_out_of_range</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">zone</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Test: Queue:ReplaceAllTracks with a new track index out of range</span>
<span class="sd">        Devices: All playable</span>
<span class="sd">        Expected: 402 Error, queue is left with CTI tracks</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">zone</span><span class="o">.</span><span class="n">Queue</span><span class="o">.</span><span class="n">AddMultipleURIs</span><span class="p">(</span><span class="n">queue_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">queue_ids</span><span class="p">[</span><span class="n">zone</span><span class="o">.</span><span class="n">raw_udn</span><span class="p">],</span>
                                   <span class="n">update_id</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                                   <span class="n">container_uri</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                                   <span class="n">container_metadata</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                                   <span class="n">desired_first_track_number_enqueued</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                                   <span class="n">enqueue_as_next</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                                   <span class="n">number_of_uris</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">track_list</span><span class="p">),</span>
                                   <span class="n">enqueued_uris_and_metadata</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">tracks_and_metadata_for_setup</span><span class="p">)</span>

        <span class="n">zone</span><span class="o">.</span><span class="n">AVTransport</span><span class="o">.</span><span class="n">SetAVTransportURI</span><span class="p">(</span><span class="n">uri</span><span class="o">=</span><span class="s2">&quot;x-rincon-queue:</span><span class="si">{}</span><span class="s2">#</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                                           <span class="n">zone</span><span class="o">.</span><span class="n">raw_udn</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">queue_ids</span><span class="p">[</span><span class="n">zone</span><span class="o">.</span><span class="n">raw_udn</span><span class="p">]),</span>
                                           <span class="n">metadata</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">)</span>

        <span class="c1"># Use a different track list for ReplaceAllTracks</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">zone</span><span class="o">.</span><span class="n">Queue</span><span class="o">.</span><span class="n">ReplaceAllTracks</span><span class="p">(</span><span class="n">queue_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">queue_ids</span><span class="p">[</span><span class="n">zone</span><span class="o">.</span><span class="n">raw_udn</span><span class="p">],</span>
                                        <span class="n">update_id</span><span class="o">=</span><span class="n">helpers</span><span class="o">.</span><span class="n">get_private_queue_update_id</span><span class="p">(</span><span class="n">zone</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">queue_ids</span><span class="p">[</span><span class="n">zone</span><span class="o">.</span><span class="n">raw_udn</span><span class="p">]),</span>
                                        <span class="n">container_uri</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                                        <span class="n">container_metadata</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                                        <span class="n">current_track_index</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                                        <span class="n">new_current_track_indices</span><span class="o">=</span><span class="s2">&quot;6,0,0&quot;</span><span class="p">,</span>
                                        <span class="n">number_of_uris</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">two_track_list</span><span class="p">),</span>
                                        <span class="n">enqueued_uris_and_metadata</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">two_track_md_and_uris</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">sonos</span><span class="o">.</span><span class="n">exception</span><span class="o">.</span><span class="n">UPnPError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">verifyEqualOrFailCase</span><span class="p">(</span>
                <span class="n">sonos</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">zone_player</span><span class="o">.</span><span class="n">UPNP_ERROR_402_INVALID_ARGUMENTS</span><span class="p">,</span>
                <span class="n">e</span><span class="o">.</span><span class="n">upnp_error</span><span class="p">,</span>
                <span class="s2">&quot;ReplaceAllTracks should fail (402) when current track index &quot;</span>
                <span class="s2">&quot;is out of range&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fail</span><span class="p">(</span><span class="s2">&quot;ReplaceAllTracks should raise a UPnP error when &quot;</span>
                      <span class="s2">&quot;current track index is out of range!&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">verifyEqualOrFailCase</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">int</span><span class="p">(</span><span class="n">zone</span><span class="o">.</span><span class="n">AVTransport</span><span class="o">.</span><span class="n">GetPositionInfo</span><span class="p">()[</span><span class="s2">&quot;Track&quot;</span><span class="p">]),</span>
                                   <span class="s2">&quot;Track should reset to first track&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">verifyTrueOrFailCase</span><span class="p">(</span><span class="n">helpers</span><span class="o">.</span><span class="n">_verify_tracks_in_queue</span><span class="p">(</span><span class="n">zone</span><span class="o">=</span><span class="n">zone</span><span class="p">,</span>
                                                                  <span class="n">queue_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">queue_ids</span><span class="p">[</span><span class="n">zone</span><span class="o">.</span><span class="n">raw_udn</span><span class="p">],</span>
                                                                  <span class="n">expected_track_list</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">track_list</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">3</span><span class="p">],</span>
                                                                  <span class="n">start_position</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span>
                                  <span class="s2">&quot;Expected tracks should remain in the queue&quot;</span><span class="p">)</span></div>

<div class="viewcode-block" id="ReplaceAllTracksTests.test_replace_all_tracks_full_queue_no_current"><a class="viewcode-back" href="../../../../upnp.api.queue.html#upnp.api.queue.replacealltracks.ReplaceAllTracksTests.test_replace_all_tracks_full_queue_no_current">[docs]</a>    <span class="nd">@combinatorial</span><span class="p">(</span><span class="n">playable_zone_generator</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">test_replace_all_tracks_full_queue_no_current</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">zone</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Test: Queue:ReplaceAllTracks with a full queue, replacing with another full queue by specifying 0 for CTI</span>
<span class="sd">        Devices: all playable</span>
<span class="sd">        Expected: Success</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1">#add 250 tracks to the queue (current track limit)</span>
        <span class="n">zone</span><span class="o">.</span><span class="n">Queue</span><span class="o">.</span><span class="n">AddMultipleURIs</span><span class="p">(</span><span class="n">queue_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">queue_ids</span><span class="p">[</span><span class="n">zone</span><span class="o">.</span><span class="n">raw_udn</span><span class="p">],</span>
                                   <span class="n">update_id</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                                   <span class="n">container_uri</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                                   <span class="n">container_metadata</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                                   <span class="n">desired_first_track_number_enqueued</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                                   <span class="n">enqueue_as_next</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                                   <span class="n">number_of_uris</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">limit_track_list</span><span class="p">),</span>
                                   <span class="n">enqueued_uris_and_metadata</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">limit_track_md_and_uris</span><span class="p">)</span>

        <span class="n">zone</span><span class="o">.</span><span class="n">AVTransport</span><span class="o">.</span><span class="n">SetAVTransportURI</span><span class="p">(</span><span class="n">uri</span><span class="o">=</span><span class="s2">&quot;x-rincon-queue:</span><span class="si">{}</span><span class="s2">#</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                                           <span class="n">zone</span><span class="o">.</span><span class="n">raw_udn</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">queue_ids</span><span class="p">[</span><span class="n">zone</span><span class="o">.</span><span class="n">raw_udn</span><span class="p">]),</span>
                                           <span class="n">metadata</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">)</span>

        <span class="n">zone</span><span class="o">.</span><span class="n">Queue</span><span class="o">.</span><span class="n">ReplaceAllTracks</span><span class="p">(</span><span class="n">queue_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">queue_ids</span><span class="p">[</span><span class="n">zone</span><span class="o">.</span><span class="n">raw_udn</span><span class="p">],</span>
                                    <span class="n">update_id</span><span class="o">=</span><span class="n">helpers</span><span class="o">.</span><span class="n">get_private_queue_update_id</span><span class="p">(</span><span class="n">zone</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">queue_ids</span><span class="p">[</span><span class="n">zone</span><span class="o">.</span><span class="n">raw_udn</span><span class="p">]),</span>
                                    <span class="n">container_uri</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                                    <span class="n">container_metadata</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                                    <span class="n">current_track_index</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                                    <span class="n">new_current_track_indices</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                                    <span class="n">number_of_uris</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">two_track_list</span><span class="p">),</span>
                                    <span class="n">enqueued_uris_and_metadata</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">two_track_md_and_uris</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">verifyTrueOrFailCase</span><span class="p">(</span><span class="n">helpers</span><span class="o">.</span><span class="n">_verify_tracks_in_queue</span><span class="p">(</span><span class="n">zone</span><span class="o">=</span><span class="n">zone</span><span class="p">,</span>
                                                                  <span class="n">queue_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">queue_ids</span><span class="p">[</span><span class="n">zone</span><span class="o">.</span><span class="n">raw_udn</span><span class="p">],</span>
                                                                  <span class="n">expected_track_list</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">two_track_list</span><span class="p">,</span>
                                                                  <span class="n">start_position</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span>
                                  <span class="s2">&quot;Expect tracks added to match what is in the queue&quot;</span><span class="p">)</span></div>

<div class="viewcode-block" id="ReplaceAllTracksTests.test_replace_all_tracks_full_queue_with_current"><a class="viewcode-back" href="../../../../upnp.api.queue.html#upnp.api.queue.replacealltracks.ReplaceAllTracksTests.test_replace_all_tracks_full_queue_with_current">[docs]</a>    <span class="nd">@combinatorial</span><span class="p">(</span><span class="n">playable_zone_generator</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">test_replace_all_tracks_full_queue_with_current</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">zone</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Test: Queue:ReplaceAllTracks with a full queue, replacing with another full queue by specifying some CTI</span>
<span class="sd">        Devices: all playable</span>
<span class="sd">        Expected: Failure (803), queue should be left with minimal tracks</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1">#add 250 tracks to the queue (current track limit)</span>
        <span class="n">zone</span><span class="o">.</span><span class="n">Queue</span><span class="o">.</span><span class="n">AddMultipleURIs</span><span class="p">(</span><span class="n">queue_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">queue_ids</span><span class="p">[</span><span class="n">zone</span><span class="o">.</span><span class="n">raw_udn</span><span class="p">],</span>
                                   <span class="n">update_id</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                                   <span class="n">container_uri</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                                   <span class="n">container_metadata</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                                   <span class="n">desired_first_track_number_enqueued</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                                   <span class="n">enqueue_as_next</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                                   <span class="n">number_of_uris</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">limit_track_list</span><span class="p">),</span>
                                   <span class="n">enqueued_uris_and_metadata</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">limit_track_md_and_uris</span><span class="p">)</span>

        <span class="n">zone</span><span class="o">.</span><span class="n">AVTransport</span><span class="o">.</span><span class="n">SetAVTransportURI</span><span class="p">(</span><span class="n">uri</span><span class="o">=</span><span class="s2">&quot;x-rincon-queue:</span><span class="si">{}</span><span class="s2">#</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                                           <span class="n">zone</span><span class="o">.</span><span class="n">raw_udn</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">queue_ids</span><span class="p">[</span><span class="n">zone</span><span class="o">.</span><span class="n">raw_udn</span><span class="p">]),</span>
                                           <span class="n">metadata</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
        
        <span class="c1"># randomize the list and ReplaceAllTracks</span>
        <span class="n">new_track_list</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">limit_track_list</span><span class="p">)</span>
        <span class="n">random</span><span class="o">.</span><span class="n">shuffle</span><span class="p">(</span><span class="n">new_track_list</span><span class="p">)</span>
        <span class="n">new_track_list_md</span> <span class="o">=</span> <span class="n">helpers</span><span class="o">.</span><span class="n">create_didl_lite_md</span><span class="p">(</span><span class="n">new_track_list</span><span class="p">)</span>
        <span class="n">new_enqueued_uris_and_metadata</span> <span class="o">=</span> <span class="n">helpers</span><span class="o">.</span><span class="n">create_uri_and_metadata_xml</span><span class="p">(</span><span class="n">new_track_list</span><span class="p">,</span> <span class="n">new_track_list_md</span><span class="p">)</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">zone</span><span class="o">.</span><span class="n">Queue</span><span class="o">.</span><span class="n">ReplaceAllTracks</span><span class="p">(</span><span class="n">queue_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">queue_ids</span><span class="p">[</span><span class="n">zone</span><span class="o">.</span><span class="n">raw_udn</span><span class="p">],</span>
                                        <span class="n">update_id</span><span class="o">=</span><span class="n">helpers</span><span class="o">.</span><span class="n">get_private_queue_update_id</span><span class="p">(</span><span class="n">zone</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">queue_ids</span><span class="p">[</span><span class="n">zone</span><span class="o">.</span><span class="n">raw_udn</span><span class="p">]),</span>
                                        <span class="n">container_uri</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                                        <span class="n">container_metadata</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                                        <span class="n">current_track_index</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span>
                                        <span class="n">new_current_track_indices</span><span class="o">=</span><span class="s2">&quot;20,21&quot;</span><span class="p">,</span>
                                        <span class="n">number_of_uris</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">new_track_list</span><span class="p">),</span>
                                        <span class="n">enqueued_uris_and_metadata</span><span class="o">=</span><span class="n">new_enqueued_uris_and_metadata</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">sonos</span><span class="o">.</span><span class="n">exception</span><span class="o">.</span><span class="n">UPnPError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">verifyEqualOrFailCase</span><span class="p">(</span>
                <span class="n">sonos</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">zone_player</span><span class="o">.</span><span class="n">UPNP_ERROR_803_QUEUE_AT_CAPACITY</span><span class="p">,</span>
                <span class="n">e</span><span class="o">.</span><span class="n">upnp_error</span><span class="p">,</span>
                <span class="s2">&quot;ReplaceAllTracks should fail (803) when replacing a full queue &quot;</span>
                <span class="s2">&quot;with a full queue&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fail</span><span class="p">(</span><span class="s2">&quot;ReplaceAllTracks should raise a UPnP error when &quot;</span>
                      <span class="s2">&quot;replacing a full queue with a full queue!&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">verifyTrueOrFailCase</span><span class="p">(</span><span class="n">helpers</span><span class="o">.</span><span class="n">_verify_tracks_in_queue</span><span class="p">(</span><span class="n">zone</span><span class="o">=</span><span class="n">zone</span><span class="p">,</span>
                                                                  <span class="n">queue_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">queue_ids</span><span class="p">[</span><span class="n">zone</span><span class="o">.</span><span class="n">raw_udn</span><span class="p">],</span>
                                                                  <span class="n">expected_track_list</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">limit_track_list</span><span class="p">[</span><span class="mi">3</span><span class="p">:</span><span class="mi">5</span><span class="p">],</span>  <span class="c1"># just 4th and 5th track</span>
                                                                  <span class="n">start_position</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span>
                                  <span class="s2">&quot;Should have left just two tracks&quot;</span><span class="p">)</span></div>

<div class="viewcode-block" id="ReplaceAllTracksTests.test_replace_all_tracks_full_queue_with_current_fits"><a class="viewcode-back" href="../../../../upnp.api.queue.html#upnp.api.queue.replacealltracks.ReplaceAllTracksTests.test_replace_all_tracks_full_queue_with_current_fits">[docs]</a>    <span class="nd">@combinatorial</span><span class="p">(</span><span class="n">playable_zone_generator</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">test_replace_all_tracks_full_queue_with_current_fits</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">zone</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Test: Queue:ReplaceAllTracks with a full queue, replacing with an almost full queue by specifying some CTI</span>
<span class="sd">        Devices: all playable</span>
<span class="sd">        Expected: Success</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1">#add 250 tracks to the queue (current track limit)</span>
        <span class="n">zone</span><span class="o">.</span><span class="n">Queue</span><span class="o">.</span><span class="n">AddMultipleURIs</span><span class="p">(</span><span class="n">queue_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">queue_ids</span><span class="p">[</span><span class="n">zone</span><span class="o">.</span><span class="n">raw_udn</span><span class="p">],</span>
                                   <span class="n">update_id</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                                   <span class="n">container_uri</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                                   <span class="n">container_metadata</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                                   <span class="n">desired_first_track_number_enqueued</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                                   <span class="n">enqueue_as_next</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                                   <span class="n">number_of_uris</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">limit_track_list</span><span class="p">),</span>
                                   <span class="n">enqueued_uris_and_metadata</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">limit_track_md_and_uris</span><span class="p">)</span>

        <span class="n">zone</span><span class="o">.</span><span class="n">AVTransport</span><span class="o">.</span><span class="n">SetAVTransportURI</span><span class="p">(</span><span class="n">uri</span><span class="o">=</span><span class="s2">&quot;x-rincon-queue:</span><span class="si">{}</span><span class="s2">#</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                                           <span class="n">zone</span><span class="o">.</span><span class="n">raw_udn</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">queue_ids</span><span class="p">[</span><span class="n">zone</span><span class="o">.</span><span class="n">raw_udn</span><span class="p">]),</span>
                                           <span class="n">metadata</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
        <span class="c1"># create a new list of 249 tracks, randomize it and ReplaceAllTracks</span>
        <span class="n">new_track_list</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">limit_track_list</span><span class="p">)</span>
        <span class="n">random</span><span class="o">.</span><span class="n">shuffle</span><span class="p">(</span><span class="n">new_track_list</span><span class="p">)</span>
        <span class="n">new_track_list</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
        <span class="n">new_track_list_md</span> <span class="o">=</span> <span class="n">helpers</span><span class="o">.</span><span class="n">create_didl_lite_md</span><span class="p">(</span><span class="n">new_track_list</span><span class="p">)</span>
        <span class="n">new_enqueued_uris_and_metadata</span> <span class="o">=</span> <span class="n">helpers</span><span class="o">.</span><span class="n">create_uri_and_metadata_xml</span><span class="p">(</span><span class="n">new_track_list</span><span class="p">,</span> <span class="n">new_track_list_md</span><span class="p">)</span>

        <span class="n">zone</span><span class="o">.</span><span class="n">Queue</span><span class="o">.</span><span class="n">ReplaceAllTracks</span><span class="p">(</span><span class="n">queue_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">queue_ids</span><span class="p">[</span><span class="n">zone</span><span class="o">.</span><span class="n">raw_udn</span><span class="p">],</span>
                                    <span class="n">update_id</span><span class="o">=</span><span class="n">helpers</span><span class="o">.</span><span class="n">get_private_queue_update_id</span><span class="p">(</span><span class="n">zone</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">queue_ids</span><span class="p">[</span><span class="n">zone</span><span class="o">.</span><span class="n">raw_udn</span><span class="p">]),</span>
                                    <span class="n">container_uri</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                                    <span class="n">container_metadata</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                                    <span class="n">current_track_index</span><span class="o">=</span><span class="mi">40</span><span class="p">,</span>
                                    <span class="n">new_current_track_indices</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span>
                                    <span class="n">number_of_uris</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">new_track_list</span><span class="p">),</span>
                                    <span class="n">enqueued_uris_and_metadata</span><span class="o">=</span><span class="n">new_enqueued_uris_and_metadata</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">verifyTrueOrFailCase</span><span class="p">(</span><span class="n">helpers</span><span class="o">.</span><span class="n">_verify_tracks_in_queue</span><span class="p">(</span><span class="n">zone</span><span class="o">=</span><span class="n">zone</span><span class="p">,</span>
                                                                  <span class="n">queue_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">queue_ids</span><span class="p">[</span><span class="n">zone</span><span class="o">.</span><span class="n">raw_udn</span><span class="p">],</span>
                                                                  <span class="n">expected_track_list</span><span class="o">=</span><span class="n">new_track_list</span><span class="p">,</span>
                                                                  <span class="n">start_position</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span>
                                  <span class="s2">&quot;Should have the expected tracks&quot;</span><span class="p">)</span></div>

<div class="viewcode-block" id="ReplaceAllTracksTests.test_replace_all_tracks_full_queue_no_new_current"><a class="viewcode-back" href="../../../../upnp.api.queue.html#upnp.api.queue.replacealltracks.ReplaceAllTracksTests.test_replace_all_tracks_full_queue_no_new_current">[docs]</a>    <span class="nd">@combinatorial</span><span class="p">(</span><span class="n">playable_zone_generator</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">test_replace_all_tracks_full_queue_no_new_current</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">zone</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Test: Queue:ReplaceAllTracks with a full queue, replacing with a full queue by specifying no NewCTI</span>
<span class="sd">        Devices: all playable</span>
<span class="sd">        Expected: Success</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1">#add 250 tracks to the queue (current track limit)</span>
        <span class="n">zone</span><span class="o">.</span><span class="n">Queue</span><span class="o">.</span><span class="n">AddMultipleURIs</span><span class="p">(</span><span class="n">queue_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">queue_ids</span><span class="p">[</span><span class="n">zone</span><span class="o">.</span><span class="n">raw_udn</span><span class="p">],</span>
                                   <span class="n">update_id</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                                   <span class="n">container_uri</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                                   <span class="n">container_metadata</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                                   <span class="n">desired_first_track_number_enqueued</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                                   <span class="n">enqueue_as_next</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                                   <span class="n">number_of_uris</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">limit_track_list</span><span class="p">),</span>
                                   <span class="n">enqueued_uris_and_metadata</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">limit_track_md_and_uris</span><span class="p">)</span>

        <span class="n">zone</span><span class="o">.</span><span class="n">AVTransport</span><span class="o">.</span><span class="n">SetAVTransportURI</span><span class="p">(</span><span class="n">uri</span><span class="o">=</span><span class="s2">&quot;x-rincon-queue:</span><span class="si">{}</span><span class="s2">#</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                                           <span class="n">zone</span><span class="o">.</span><span class="n">raw_udn</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">queue_ids</span><span class="p">[</span><span class="n">zone</span><span class="o">.</span><span class="n">raw_udn</span><span class="p">]),</span>
                                           <span class="n">metadata</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">)</span>

        <span class="c1"># randomize the track list and ReplaceAllTracks</span>
        <span class="n">new_track_list</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">limit_track_list</span><span class="p">)</span>
        <span class="n">random</span><span class="o">.</span><span class="n">shuffle</span><span class="p">(</span><span class="n">new_track_list</span><span class="p">)</span>
        <span class="n">new_track_list_md</span> <span class="o">=</span> <span class="n">helpers</span><span class="o">.</span><span class="n">create_didl_lite_md</span><span class="p">(</span><span class="n">new_track_list</span><span class="p">)</span>
        <span class="n">new_enqueued_uris_and_metadata</span> <span class="o">=</span> <span class="n">helpers</span><span class="o">.</span><span class="n">create_uri_and_metadata_xml</span><span class="p">(</span><span class="n">new_track_list</span><span class="p">,</span> <span class="n">new_track_list_md</span><span class="p">)</span>

        <span class="n">zone</span><span class="o">.</span><span class="n">Queue</span><span class="o">.</span><span class="n">ReplaceAllTracks</span><span class="p">(</span><span class="n">queue_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">queue_ids</span><span class="p">[</span><span class="n">zone</span><span class="o">.</span><span class="n">raw_udn</span><span class="p">],</span>
                                    <span class="n">update_id</span><span class="o">=</span><span class="n">helpers</span><span class="o">.</span><span class="n">get_private_queue_update_id</span><span class="p">(</span><span class="n">zone</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">queue_ids</span><span class="p">[</span><span class="n">zone</span><span class="o">.</span><span class="n">raw_udn</span><span class="p">]),</span>
                                    <span class="n">container_uri</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                                    <span class="n">container_metadata</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                                    <span class="n">current_track_index</span><span class="o">=</span><span class="mi">40</span><span class="p">,</span>
                                    <span class="n">new_current_track_indices</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                                    <span class="n">number_of_uris</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">new_track_list</span><span class="p">),</span>
                                    <span class="n">enqueued_uris_and_metadata</span><span class="o">=</span><span class="n">new_enqueued_uris_and_metadata</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">verifyTrueOrFailCase</span><span class="p">(</span><span class="n">helpers</span><span class="o">.</span><span class="n">_verify_tracks_in_queue</span><span class="p">(</span><span class="n">zone</span><span class="o">=</span><span class="n">zone</span><span class="p">,</span>
                                                                  <span class="n">queue_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">queue_ids</span><span class="p">[</span><span class="n">zone</span><span class="o">.</span><span class="n">raw_udn</span><span class="p">],</span>
                                                                  <span class="n">expected_track_list</span><span class="o">=</span><span class="n">new_track_list</span><span class="p">,</span>
                                                                  <span class="n">start_position</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span>
                                  <span class="s2">&quot;Should have the expected tracks&quot;</span><span class="p">)</span></div></div>

<span class="c1"># Main</span>
<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">suite</span> <span class="o">=</span> <span class="n">WorkflowTestSuite</span><span class="p">(</span><span class="s2">&quot;UPnP.Queue:ReplaceAllTracksTests&quot;</span><span class="p">)</span>
    <span class="n">suite</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">ReplaceAllTracksTests</span><span class="p">())</span>
</pre></div>

          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../../../../index.html">TestCase Documentation</a></h1>








<h3>Navigation</h3>
<p class="caption"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../audio.html">audio package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../cloud.html">cloud package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../common.html">common package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../data_reporting.html">data_reporting package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../dataio.html">dataio package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../examples.html">examples package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../hdmi.html">hdmi package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../ixchariot.html">ixchariot package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../networking.html">networking package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../other.html">other package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../perf.html">perf package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../pytest_automation.html">pytest_automation package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../secure_registration.html">secure_registration package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../syssw.html">syssw package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../upnp.html">upnp package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../voice.html">voice package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../webserver.html">webserver package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../webserver_v0.html">webserver_v0 package</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../../../index.html">Documentation overview</a><ul>
  <li><a href="../../../index.html">Module code</a><ul>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2019, Author.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.8.5</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
    </div>

    

    
  </body>
</html>